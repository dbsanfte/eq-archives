<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir="ltr" lang="en">
<head>
<title>ErollisiMarr.Com Forum - Could use some C/Unix help</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="vBulletin 3.0.0" />
<style type="text/css">
<!--
td, p, li, div
{
	font: 10pt verdana, geneva, lucida, 'lucida grande', arial, helvetica, sans-serif;
}
.smallfont
{
	font-size: 11px;
}
.tborder
{
	border: 1px solid #808080;
}
.thead
{
	background-color: #EEEEEE;
}
.page
{
	background-color: #FFFFFF;
	color: #000000;
}
-->
</style>
</head>
<body class="page">

<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
	<td><a href="http://www.erollisimarr.com/forum/"><img src="http://www.erollisimarr.com/styles/black/emarr.gif" alt="ErollisiMarr.Com Forum" border="0" /></a></td>
	<td align="right">
		<div class="smallfont"></div>
		
	</td>
</tr>
</table>

<br />

<div>
	<a href="http://www.erollisimarr.com/forum/index.php"><strong>ErollisiMarr.Com Forum</strong></a>
	(<span class="smallfont"><em>http://www.erollisimarr.com/forum/index.php</em></span>)
</div>
<div>
	- &nbsp; <a href="forumdisplay.php?f=32"><strong>Technical Related</strong></a>
	(<span class="smallfont"><em>http://www.erollisimarr.com/forum/forumdisplay.php?f=32</em></span>)
</div>
<div>
	- &nbsp; - &nbsp; <a href="showthread.php?t=33366"><strong>Could use some C/Unix help</strong></a>
	(<span class="smallfont"><em>http://www.erollisimarr.com/forum/showthread.php?t=33366</em></span>)
</div>

<br />

<table class="tborder" cellpadding="6" cellspacing="1" border="0" width="100%">
<tr>
	<td class="page">
	
		<table cellpadding="0" cellspacing="0" border="0" width="100%">
		<tr valign="bottom">
			<td style="font-size:14pt">Felinah</td>
			<td class="smallfont" align="right">10-22-2006 01:46 PM</td>
		</tr>
		</table>
		
		<hr />
		
		
			<div><strong>Could use some C/Unix help</strong><br />&nbsp;</div>
		
		
		
		<div>I need some help with a c program that I am writing to create my own unix shell (for a class assignment).  I know we have some great computer gurus here on emarr!  :)<br />
 <br />
At one point in the program, I need to print out some process statistics, but only for the pid of my shell process.  If I just use system(&quot;ps -o pid,ppid,pcpu,pmem,etime,user,command&quot;);, I get the statistics for all processes.  I've read every man page on ps that I can find.  I know that -p and --pid are supposed to be flags that I can use to only print stats for that pid. <br />
 <br />
My PID variable is declared at the beginning of my main function as pid_t PID;  And the line of code above my system() line is: PID = getpid();  In system(), I have tried &quot;ps -p PID&quot;, &quot;ps --pid PID&quot;, I've tried with the variable name in quotes, with a $ in front, I've tried converting it to an integer first before the system() line, I've even tried changing the variable name from all lower case to all caps.  I've tried everything I can think of, but no luck. <br />
 <br />
Does anyone know how do get the ps process to work with my PID variable?  Any help would be very very very much appreciated!  This program is due Tuesday and I've been working on this particular problem for days.  I'm ready to pull all my hair out! <br />
 <br />
Thank you very much. <br />
 <br />
Felinah<br />
<br />
PS: Hi to everyone who remembers me!  :)</div>
	</td>
</tr>
</table>
<br /><table class="tborder" cellpadding="6" cellspacing="1" border="0" width="100%">
<tr>
	<td class="page">
	
		<table cellpadding="0" cellspacing="0" border="0" width="100%">
		<tr valign="bottom">
			<td style="font-size:14pt">FafnerMorell</td>
			<td class="smallfont" align="right">10-22-2006 02:35 PM</td>
		</tr>
		</table>
		
		<hr />
		
		
		
		
		<div>What if you print out the stats for all processes, but then search through that looking for the process which matches your PID?<br />
<br />
Regular expression matching would make this a breeze (and I bet you could find an open source C library that provides it), but another easy way (if your professor allows it) is to do a system call to a Perl program you write. Perl then does the &quot;ps&quot; and regular expression matching and returns the result to your C program. If you don't like Perl, use Python.<br />
<br />
Now, using Perl/Python might be considered cheating if you're supposed to do your OS - so worst case, I bet you could just use C to convert the string to tokens (seperating by spaces), and figure out which token in each line corresponds to the PID.</div>
	</td>
</tr>
</table>
<br /><table class="tborder" cellpadding="6" cellspacing="1" border="0" width="100%">
<tr>
	<td class="page">
	
		<table cellpadding="0" cellspacing="0" border="0" width="100%">
		<tr valign="bottom">
			<td style="font-size:14pt">FafnerMorell</td>
			<td class="smallfont" align="right">10-22-2006 03:22 PM</td>
		</tr>
		</table>
		
		<hr />
		
		
		
		
		<div>Hmm, another variation on parsing the input in C is to use scanf() (you'll need to figure out how to get the output into something you can parse using scanf() or sscanf() )</div>
	</td>
</tr>
</table>
<br /><table class="tborder" cellpadding="6" cellspacing="1" border="0" width="100%">
<tr>
	<td class="page">
	
		<table cellpadding="0" cellspacing="0" border="0" width="100%">
		<tr valign="bottom">
			<td style="font-size:14pt">AylluesaMT</td>
			<td class="smallfont" align="right">10-26-2006 07:00 PM</td>
		</tr>
		</table>
		
		<hr />
		
		
		
		
		<div>It sounds more like a C programming error then your linux knowledge being flawed.<br />
<br />
try:<br />
<br />
pid_t PID = getpid();<br />
<br />
( can you make strings? or do you have to use character arrays, this depends on the C / libraries you are using )<br />
<br />
string my_command = &quot;ps -p &quot; + PID;<br />
<br />
system(my_command);<br />
<br />
It has been a while since I used C so my syntax maybe wrong, but the idea is you create a string that contains all the elements of the command you want to execute, then you execute the string. If you can't use &quot;strings&quot; you will need to use char[&lt;some size&gt;] = &quot;mlah blah blah&quot; + '\0'. Where \0 is the null terminator for character arrays.</div>
	</td>
</tr>
</table>
<br />

<br />

<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="top">
	<td class="smallfont">All times are GMT -8. The time now is <span class="time">05:42 PM</span>.</td>
	<td align="right">
		<div class="smallfont"></div>
		
	</td>
</tr>
</table>

<p class="smallfont" align="center">
	Powered by: vBulletin<br />Copyright &copy;2000 - 2006, Jelsoft Enterprises Ltd.
	<br />
	
</p>

</body>
</html>