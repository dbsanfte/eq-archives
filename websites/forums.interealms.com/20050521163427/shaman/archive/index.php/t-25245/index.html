<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
	<title>Interealms - The Shaman's Crucible</title>
	<meta name="keywords" content="" />
	<meta name="description" content="" />
	<link rel="stylesheet" href="http://forums.interealms.com/shaman/archive/archive.css" />
	<style type="text/css">
	<!--
	div.username { behavior: url(http://forums.interealms.com/shaman/archive/post.htc); }
	#thread a { behavior: url(http://forums.interealms.com/shaman/archive/thread.htc); }
	-->
	</style>
</head>
<body>
<div class="pagebody">
<div id="navbar"><a href="./">Interealms - The Shaman's Crucible</a> &gt; <a href="f-1">General</a> &gt; Possible bug with Can4, other Can spells, and Mana Pres / specialization</div>
<hr />
<p class="largefont">Click here for full thread: <a href="http://forums.interealms.com/shaman/showthread.php?threadid=25245">Possible bug with Can4, other Can spells, and Mana Pres / specialization</a></p>
<hr />

<div class="post"><div class="username" id="u1"><b>Michael J. Kaspar</b></div><div class="posttext" id="p1">Greetings folks,<br />
<br />
Recently I acquired a couple items I felt would improve my character substantially:<br />
<br />
Pendant of the Triumphant Victor (http://everquest.allakhazam.com/db/item.html?item=17030) <br />
<br />
Rosrak's Boots of the Primal (http://everquest.allakhazam.com/db/item.html?item=18185) <br />
<br />
The effects are pretty straightforward.  You cast a spell, and instead of it costing X, it costs X - (Y * X), where X is spell cost and Y is either .10 (from the neck, Mana Pres IV) or .15 (from the boots, Preservation of Xegony).  All good since I spend less mana, right?<br />
<br />
Well, not quite.  When I toss Can 4, something I still do quite frequently even though I have Can AA, it doesn't seem to be returning the proper amount of mana.  I am definitely taking the proper amount of damage, but when I watched my inventory screen it was only returning 70 mana, not 80 as Lucy suggests it should return.<br />
<br />
Digging a bit further, I noticed first my neck, then my boots, glowing everytime I cast Can IV.<br />
<br />
To me, this means the focus effects are being applied to the spell being cast.  However, if it follows the rules above, it appears that Can IV is actually returning less mana than it should.  Instead of getting 81 back from the spell, I was getting 70 back.  This is with the neck effect.<br />
<br />
The math:<br />
<br />
81 - (.1 * 81) = 72.9<br />
<br />
Still not the correct number.  However, as Can IV is an alteration spell, and I am spec Alt, I wonder if I am landing my spec check in addition to the focus effect.  This would account for the additional missing mana.<br />
<br />
My hypothesis is this is an &quot;unintended bug&quot; that has probably been affecting shaman for quite a while.  I haven't seen any mention of it here on the Crucible, and I lurk here 5 times a week.<br />
<br />
I intend to bug this as soon as I get home, and I can probably post to other spots as well.  What I am looking for here is confirmation from other shaman that this is in fact happening, and some suggestions how to proceed.  Should our Spec or Focus effects add mana, or should they not apply?  I would be willing to settle for &quot;not apply&quot; as this would return the spell to working as intended, but if we got more mana back so much the better.<br />
<br />
Thoughts?</div></div><hr />


<div class="post"><div class="username" id="u2"><b>Gojirra</b></div><div class="posttext" id="p2">When you cast the spell and the UI updates itself, you are actually only seeing a estimate basically.  At the &quot;tick&quot; the server will tell you how much mana / hp you have and the UI will adjust.  This may be what is actually happening here.<br />
<br />
Also, just for completeness, focus effects don't always do the full effect.  So Mana Preservation IV for example will save you some random amount of mana between 1% and 10%.</div></div><hr />


<div class="post"><div class="username" id="u3"><b>Wulfbane</b></div><div class="posttext" id="p3">There is a bug going round with canni 1 and 2.<br />
<br />
I wonder though has this bug always been there rather than it being a new one.<br />
Maybe people are only discovering it now because they have SoE's own manna numbers and not some of the 3rd party manna calcs to look at.<br />
<br />
<br />
Saramin</div></div><hr />


<div class="post"><div class="username" id="u4"><b>Jahvah</b></div><div class="posttext" id="p4">I don't have Cann IV yet, but I was watching my mana numbers while dancing with Cann III I noticed an oddity. I was losing mana when I fizzled. It didn't happen every time, but it was enough to get my attention. I /bugged it so the dev's could officially ignore the problem.</div></div><hr />


<div class="post"><div class="username" id="u5"><b>veeshanMurtak</b></div><div class="posttext" id="p5">I have no clue if there is currently a bug going around but before you all cry &quot;cannibalize bug&quot; because the numbers on your screen do not match the numbers on lucy please run some tests.<br />
<br />
The mana number (and HP number and so on) you see is based on the last server info your got plus what your client thinks you have gotten since then. I am sure you have all seen a HP bar lag or jump some time. The same thing happens to mana too.<br />
<br />
If you want to test your mana regeneration take of all of your gear, get down to some round number of mana and then stand. Preferably do this on a shaman without mental clarity too. Now cannibalize a couple of times. Be sure to keep track of time too. 10 casts of cannibalize and then 10 seconds of waiting should suffice to get a clear count even with a bad connection. Now divide your spent time by 6, tick off that many ticks worth of standing mana regeneration (1 + whatever mental clarity / flowing thought, etc you have) from your mana and compare this number to the mana number you started with. If you still get an error of more then a couple missing mana you have probably found a bug.<br />
<br />
Just watching your mana bar jump up and down from lag and resynchronisation will not let you find a bug, even if there is one - it is like finding a regen bug while tanking a raid boss.</div></div><hr />


<div class="post"><div class="username" id="u6"><b>Michael J. Kaspar</b></div><div class="posttext" id="p6">I have no clue if there is currently a bug going around but before you all cry &quot;cannibalize bug&quot; because the numbers on your screen do not match the numbers on lucy please run some tests.<br />
<br />
The mana number (and HP number and so on) you see is based on the last server info your got plus what your client thinks you have gotten since then. I am sure you have all seen a HP bar lag or jump some time. The same thing happens to mana too.<br />
<br />
If you want to test your mana regeneration take of all of your gear, get down to some round number of mana and then stand. Preferably do this on a shaman without mental clarity too. Now cannibalize a couple of times. Be sure to keep track of time too. 10 casts of cannibalize and then 10 seconds of waiting should suffice to get a clear count even with a bad connection. Now divide your spent time by 6, tick off that many ticks worth of standing mana regeneration (1 + whatever mental clarity / flowing thought, etc you have) from your mana and compare this number to the mana number you started with. If you still get an error of more then a couple missing mana you have probably found a bug.<br />
<br />
Just watching your mana bar jump up and down from lag and resynchronisation will not let you find a bug, even if there is one - it is like finding a regen bug while tanking a raid boss.<br />
<br />
Mana regen seems to be working fine.  I was running the canna test yesterday and I could tell when the FT pulse was hitting, and it seemed to be hitting for the correct amount.  I was even able to identify when the bard song was hitting me.  All of those calc's were working just fine.<br />
<br />
With Can4, sometimes I was getting 70 back, and sometimes 81.  It didn't matter if I had focus items on or not.  It was easy to set timing so you could observe the FT tick (on the pulse), get a new value of total mana, then watch the value increase when the Can4 spell took effect.<br />
<br />
I am convinced now that the Can4 mana return is not being affected by Mana Pres, but I am unable to figure out why I am getting 70 back vs. 81 on some occasions.  Perhaps this is the spec check?<br />
<br />
I will continue testing tonight.</div></div><hr />


<div class="post"><div class="username" id="u7"><b>cattywumpus</b></div><div class="posttext" id="p7">This canni bug has been mentioned by others here including myself.  <br />
<br />
Now that you report a problem with canni4 it seems to be affecting all four regular canni spells, still haven't heard anything about the AA or the new cannis from GoD and OoW.<br />
<br />
It doesn't seem to follow a specific pattern and is hard to duplicate on demand so may be rough to troubleshoot and fix.  It does seem to be more likely to happen when using a canni-dance hotkey than if you are maually canniing though.<br />
<br />
It isn't lag related because both times I noticed it I was in low lag zones for me and could clearly see all expected rises in mana numbersas they occured.  Canni3 was not returning the proper amount of mana and there was no adjustment from lag afterwards.  The effect would come and go at random.  Some have noticed that moving seems to stop the problem for a short while then it comes back.<br />
<br />
With the small numbers of players reporting a problem I don't expect to see much of an effort by the devs to fix it any time soon with all the serious issues screaming for attention.</div></div><hr />


<div class="post"><div class="username" id="u8"><b>veeshanMurtak</b></div><div class="posttext" id="p8">Let me repeat:<br />
<br />
The &quot;watching your mana bar go up by x amount&quot; method will NOT help you to positively identify a bug.<br />
<br />
You may or may not see said bug (if it does exist at all) when it happens but you can never be sure you did not see the result of lag. 10 mana less might well be a server check every couple of minutes that tells your client that it miscalculated your meditation and to substract 10 mana. It may be the result of such a check occuring every time you cast a spell - I remember clicking an instantcast item when being affected by a ghost mana drain resetting my mana to the correct numbers and this &quot;cannibalize bug&quot; may well be the same thing: merely the server resetting your mana to the correct number,<br />
<br />
Strip down and debuff, go to 2000 mana (or any round number), cast cannibalize IV 10 times, calculate your standing regen mana and substract it from your total - then you can calculate what cannibalizing gave you and wether it works correctly.<br />
<br />
Surely 5 minutes of work is not too much to be sure of your claims?</div></div><hr />


<div class="post"><div class="username" id="u9"><b>cattywumpus</b></div><div class="posttext" id="p9">Been done already, as much as is possible with a random bug.<br />
<br />
I was very careful to observe the mana changes for several minutes while canni-dancing.<br />
<br />
sitting tick = +25 mana every time for me.  Canni3-dancing gets me 39 mana per cast most times but sometimes gets a string of 20 mana per cast over a dozen or more casts.  I clearly see both the sitting mana regen tick and the result of canni separately.  <br />
<br />
There is no adjustment to the amount of mana from lag over the entire period it takes me to get to full mana.  The numbers were entirely consistent with what I expected except for the periods of 20 mana per cast and there was never a catch-up tick.<br />
<br />
As I also said the bug is random making consistent testing difficult to do because I cannot force it to happen when I want to try to test it.</div></div><hr />


<div class="post"><div class="username" id="u10"><b>veeshanMurtak</b></div><div class="posttext" id="p10">Why are you attempting to canni dance if you want to test cannibalize?<br />
<br />
The mere fact that you are telling me you see that &quot;bug&quot; only when cannidancing and/or using a hotkey to cannibalize several times already suggests to me that is a lag issue.<br />
<br />
Take off FT, buffs and test again, while standing.<br />
<br />
Until then all you can tell is that your mana numbers are jumping around but not wether or not they are actually correct as you have no clue what med ticks you did and did not miss and what mana bumps are actually serverside corrections.<br />
<br />
Example:<br />
I will do the numbers with a 40 point cannibalize and 20 mana per tick from medding (and 0 from standing regen) just for easy numbers.<br />
<br />
1. You are at 1000 mana.<br />
2. You med a tick. You are at 1020 mana.<br />
3. You stand to cannibalize. You are at 1060 mana.<br />
4. You sit. Your client thinks you caught the med tick, due to lag the server thinks you did not. Perceived (client side) mana: 1080: real mana: 1060.<br />
5. You cannibalize again. This forces mana synchronisation. The server sends the accurate mana: 1100. You see a 20 point jump in mana. You yell &quot;bug!&quot;.<br />
<br />
This is why you just can not &quot;test&quot; with cannadancing. We are not even sure what forces a serverside mana check and we certainly can not calculate the effects of lag on cannadancing.<br />
<br />
Testing with just base standing mana regeneration eliminates this issue. If you can not reproduce your findings without cannadancing odds are that all you are experiencing is lag.</div></div><hr />

<div id="copyright">Powered by: vBulletin Version 3.0.0 Beta 2<br />Copyright &copy;2000 - 2005, Jelsoft Enterprises Ltd.</div>
</div>
</body>
</html>