<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage Express 2.0">
<title>NPC's</title>
<base href="http://www.prophesy.ca/ds/dsmaps/">
</head>

<body bgcolor="#000000" text="#FFFF00" link="#0000FF"
vlink="#800080">

<table border="0">
    <tr>
        <td valign="top">&nbsp;</td>
        <td><p align="center"><font color="#C0C0C0" size="7"><strong>NPC's</strong></font></p>
        </td>
    </tr>
    <tr>
        <td valign="top"><p align="left"><a href="index.htm"><font
        size="5">Index</font></a></p>
        <p align="left"><a
        href="http://www.prophesy.ca/ds/dsmaps/maps.htm"><font
        size="5">Maps</font></a></p>
        <p align="left"><a
        href="http://www.prophesy.ca/ds/dsmaps/tutorials.htm"><font
        size="5">Tutorials</font></a></p>
        <p align="left"><a
        href="http://68.3.21.42:8080/cgi-bin/Miral/ikonboard.cgi?s=3cfec4b359afffff;act=SF;f=39"><font
        size="5">Forums</font></a></p>
        <p align="left"><a
        href="http://www.prophesy.ca/ds/dsmaps/downloads.htm"><font
        size="5">Downloads</font></a></p>
        <p align="left"><a
        href="http://www.prophesy.ca/ds/dsmaps/links.htm"><font
        size="5">Links</font></a></p>
        <p align="left"><a href="mailto:nintastic@hotmail.com"
        target="frm-new"><font size="5">Contact</font></a></p>
        </td>
        <td><p align="center"><font color="#FFFFFF">This tutorial
        will cover various aspects on the proper implementation
        of your NPC's, including hireables, blacksmiths,
        potion/spell vendors, regular talking NPC's, and quests
        (when I find out how! hehe)</font></p>
        <p align="center"><font color="#FFFF00" size="4"><strong>Section
        1: My NPC isn't talking!</strong></font></p>
        <p align="center"><font color="#FFFFFF">This is an easy
        to solve problem, yet I only figured out the way to do it
        last night while sodding about with the Siege Editor and
        the Logic.dsres file. Firstly, open siege editor, open
        the region your problem NPC is located, select him/her,
        right click and select properties. In the &quot;Template
        Properties&quot; tab, scroll down in the main box until
        you locate the value &quot;jat_talk&quot;, it's about 3/4
        of the way down from the top. To the right of
        &quot;jat_talk&quot;, there is a field that should say
        &quot;jat_none&quot;. This basically means that your NPC
        has not been assigned the ability to talk. So what we're
        gonna do is tell that stubborn SOB to talk already! Where
        &quot;jat_none&quot; is, delete that entry and enter
        &quot;world\ai\jobs\common\job_talk.skrit&quot;.</font></p>
        <p align="center"><font color="#FFFFFF">Click OK, save,
        and convert your map to .dsmap. I am assuming you have
        already made conversations for that NPC. If not, right
        click on the NPC and select &quot;Conversation
        Editor&quot;. Click NEW, then enter the name for the new
        conversation. Click OK. Select the conversation you made
        in the left box, then click EDIT. Click NEW, select from
        the left box, and click edit. Enter your conversation
        text, along with the choices you want to make, such as
        shop, potential member, or buy packmule. These are in the
        drop down menu at the bottom right. If this is the only
        conversation you want IE you click on him/her and that's
        all they say, leave the &quot;Order&quot; field blank. If
        not, Set the order to 0, then make the second part. If
        this is not the last conversation, leave it blank,
        otherwise put the order to 1. Keep adding numbers until
        you are at your last conversation, just leave the order
        for the last one blank. Your conversation is now set up.
        Follow the steps above to add &quot;jat&quot;talk&quot;,
        save, save as .dsmap, and play it to try it out.</font></p>
        <p align="center"><font color="#FFFF00" size="4"><strong>Section
        2: Sit your ass down, biatch!</strong></font></p>
        <p align="center"><font color="#FFFFFF" size="3">So you
        want your NPC to sit down do you? Maybe you want him to
        lie down on a bed/floor. First, I'm assuming you have
        your NPC created already. Set him up so he is quite close
        to the chair, as if he were getting ready to sit down in
        it, like this:</font></p>
        <p align="center"><font color="#FFFFFF" size="3"><img
        src="tutorials/sit1.JPG" width="474" height="334"></font></p>
        <p align="center"><font color="#FFFFFF" size="3">Next, we
        want to create a new &quot;cmd_animation_command&quot;.
        This is located in &quot;game
        objects/gizmos/commands/specialized/&quot;. Make one
        beside your NPC. Select your NPC, right click, select
        properties. In the Template Properties tab, on the top
        right there is a field called SCID, followed by a set of
        HEX numbers. Copy the numbers by highlighting and uing
        the keyboard shortcut CTRL-C, or right click on the
        highlight and select COPY. Next, select the
        &quot;cmd_animation_command&quot; object, right click,
        properties, and under Template Properties there should be
        a value field called &quot;client_scid&quot;. Paste the
        SCID of the NPC that you copied by hitting CTRL-V, or
        right clicking on the field and selecting PASTE. Next,
        scroll to the field that says &quot;Animation&quot;.
        Enter one of the following values:</font></p>
        <p align="center"><font color="#FFFFFF" size="3">Farmboys:<br>
        Sit1: sitting on a chair with arms resting on a table<br>
        sit2: sitting on a chair with hands on knees<br>
        sit3: variation of sit2<br>
        sleep1: sleeping on a bed<br>
        sleep2: sleeping variation<br>
        hoe1: hoeing animation<br>
        talk1: talking/social animation<br>
        <br>
        Farmgirls:<br>
        Sit1: sitting on a chair with legs crossed<br>
        talk1: talking/social animation<br>
        hoe1: hoeing animation<br>
        <br>
        Skeletons:<br>
        talk1: talking/social animation<br>
        hoe1: hoeing animation</font></p>
        <p align="center"><font color="#FFFFFF" size="3">If it is
        a sleeping animation, obviously your character needs to
        be on a bed, or on the floor, whatever. If hoeing, stick
        him in a field and equip a hoe in his inventory under
        &quot;melee weapon&quot;. One last thing you will need to
        do is look for the value &quot;initially_active&quot;. By
        default, it is set as &quot;false&quot;, so change it to
        &quot;true&quot;, so that when the map loads, the
        character is performing this animation. Since this will
        be the actor's default animation, it will hold it until
        another command is given, which you won't have unless
        you're planning some intricate movie sequence. I don't
        know how to make these yet, but expect a tutorial far in
        the future. Now that you have given him/her an animation
        command, there should be a red arrow line pointing at the
        NPC. Simply move the &quot;cmd_animation_command&quot;
        object so it is underneath the NPC, like this:</font></p>
        <p align="center"><font color="#FFFFFF" size="3"><img
        src="tutorials/sit2.JPG" width="526" height="430"></font></p>
        <p align="center"><font color="#FFFFFF" size="3">Viola!
        That's all there is to it! Save, export as .dsmap, and
        play it to see the man/woman sit! HE'S SITTING! OOOH!
        AAAAH!</font></p>
        <p align="center"><font color="#FFFF00" size="4"><strong>Section
        3: Mules R Us</strong></font></p>
        <p align="center"><font color="#FFFFFF" size="3">Believe
        it or not, this is one of the most difficult NPC's to
        incorporate into your maps. A mule merchant requires
        specialized objects and such in order to function
        properly. Be warned that there is some GAS file editing
        that needs to be done, so make sure you back up these
        files before you start tinkering with them. With that
        said and done, LET'S SELL SOME ASS! lol I had to say
        that, cmon!</font></p>
        <p align="center"><font color="#FFFFFF" size="3">Ok first
        off, let's make our stable. I'm sure you know how to
        place nodes and all that, so I won't explain that part to
        you. Once you have the base of the stable in place, we
        are going to want to add the Mules, the Mule Merchant,
        and a &quot;party_humanoid&quot; object. The
        party_humanoid is a special object that acts like a
        &quot;ghost&quot; of the packmule. It's there, but it
        isn't as in you can't see it. When you buy a mule, the
        party_humanoid takes one of the mules in the stable that
        you specefied in the special.gas file, and
        &quot;Transforms&quot; it into a packmule object, then
        adds it to your party. Ok, so let's place the NPC
        &quot;Ghilbertnor&quot;, located in game
        objects/actors/good_characters/storekeeps/regular. We
        want her to use the talk script made for her, so right
        click with her selected, select object properties. In the
        Template Properties tab, scroll down until you find the
        field &quot;jat_talk&quot;. In the value field beside
        that entry, it should say &quot;jat_none&quot;. Replace
        &quot;jat_none&quot; with
        &quot;world\ai\jobs\actors\good\job_talk_ghilbertnor.skrit&quot;.
        Next, place 3 &quot;mule_nt_r1&quot; objects, one in each
        stall, located in game objects/actors/ambients/regular.
        Lastly, in the middle of the barn, place any object, then
        right click on it and select &quot;properties&quot;. In
        the Template Properties tab, there is a drop down menu
        called Template Name: Browse through it until you find
        the object &quot;party_humanoid&quot;, then click on it,
        hit apply in the bottom right corner of the Properties
        window, then hit ok. Your original object should now look
        like a transparent block man (my Ghilbertnor looks
        different because I edited her template file, tutorial on
        that soon!):</font></p>
        <p align="center"><font color="#FFFFFF" size="3"><img
        src="tutorials/mule1.JPG" width="490" height="378"></font></p>
        <p align="center"><font color="#FFFFFF" size="3">Ok, next
        make a new conversation for the Ghilbertnor NPC, and make
        sure &quot;buy_packmule&quot; is set as an option choice.
        If you want to change how much the mules cost to buy,
        just change the &quot;Value&quot; field in the Template
        Properties tab of the Object properties window. Save your
        map, and copy down the SCID's of all the mules, and
        Ghilbertnor. You can find out the SCID by clicking on the
        object, it's the number beside SCID, obviously. Make sure
        you know what SCID belongs to which NPC. Now for the GAS
        file editing. Open the &quot;special.gas&quot; file for
        the region where you put the mules, party_humanoid, and
        Ghilbertnor. This will be located in &quot;my
        documents/dungeon
        siege/bits/world/maps/your_map/region_name/objects&quot;.
        Find the party_humanoid object, the entry in the gas file
        should look like this:</font></p>
        <p align="left"><font color="#0000FF" size="3">[t:party_humanoid,n:0x00100006]<br>
        {<br>
        [placement]<br>
        {<br>
        q orientation = 0,0.993572,0,-0.113203;<br>
        p position = -0.651538,-1.25,-0.128825,0x0f44d430;<br>
        }<br>
        }</font></p>
        <p align="left"><font color="#FFFFFF" size="3">You will
        want to add the </font><font color="#FF0000" size="3">red</font><font
        color="#FFFFFF" size="3"> text, so that it looks like
        this (you don't need to add the </font><font
        color="#FFFF00" size="3">//comments</font><font
        color="#FFFFFF" size="3">):</font></p>
        <p align="left"><font color="#0000FF" size="3">[t:party_humanoid,n:0x00100006]<br>
        {</font><font color="#FFFFFF" size="3"><br>
        </font><font color="#FFFF00" size="3">//begin mind
        modification, so that the party_humanoid doesn't run off
        if an enemy comes in range</font></p>
        <p align="left"><font color="#FF0000" size="3">[mind]<br>
        {<br>
        b on_enemy_entered_weapon_engage_range_attack = false;<br>
        }</font></p>
        <p align="left"><font color="#FFFF00" size="3">//end mind
        modification</font></p>
        <p align="left"><font color="#FFFF00" size="3">//begin
        party script to add mules</font><font color="#FF0000"
        size="3"><br>
        [party]<br>
        {<br>
        [add_members]<br>
        {<br>
        x * = 0x02700041; </font><font color="#FFFF00" size="3">//this
        is ghilbertnor's SCID</font><font color="#FF0000"
        size="3"><br>
        x * = 0x00100041; </font><font color="#FFFF00" size="3">//this
        is mule #1's SCID</font><font color="#FF0000" size="3"><br>
        x * = 0x00100043; </font><font color="#FFFF00" size="3">//this
        is mule #2's SCID</font><font color="#FF0000" size="3"><br>
        x * = 0x001000BD; </font><font color="#FFFF00" size="3">//this
        is mule #3's SCID</font><font color="#FF0000" size="3"><br>
        }</font></p>
        <p align="left"><font color="#FFFF00" size="3">//end
        party sscript to add mules</font><font color="#FFFFFF"
        size="3"><br>
        </font><font color="#0000FF" size="3">}<br>
        [placement]<br>
        {<br>
        q orientation = 0,0.993572,0,-0.113203;<br>
        p position = -0.651538,-1.25,-0.128825,0x0f44d430;<br>
        }<br>
        }</font></p>
        <p align="center"><font color="#FFFFFF" size="3">Save the
        file, convert the map into .dsmap, and TEST IT! This
        should work, it worked for me anyways!</font></p>
        <p align="center"><font color="#FFFFFF" size="3">I have
        been made aware of a crash that can occur, so make sure
        that in &quot;Preferences&quot; in the View menu, misc.
        section, the &quot;Update World&quot; option is
        UNCHECKED, otherwise upon adding the
        &quot;party_humanoid&quot; object, SE will crash with the
        following error:</font></p>
        <p align="left"><font color="#FF0000">Type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        : Error </font></p>
        <p align="left"><font color="#FF0000">Module&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        : D:\Program Files\Dungeon Siege Tool Kit\Siege
        Editor\SiegeEditor.exe </font></p>
        <p align="left"><font color="#FF0000">Location&nbsp;&nbsp;&nbsp;&nbsp;
        : WorldState.cpp line 506 (at P:\ds1
        \main\gpg\projects\Tattoo\world\) </font></p>
        <p align="left"><font color="#FF0000">Fail
        Count&nbsp;&nbsp; : 1 (w:9, e:1, x:0) </font></p>
        <p align="left"><font color="#FF0000">Exe timestamp: May
        14 2002 11:51:20 </font></p>
        <p align="left"><font color="#FF0000">WorldState::Request(
        ws_sp_defeat ): transition from 'ws_sp_ingame' is illegal
        at this time (requested by [P:\ds1
        \main\gpg\projects\Tattoo\world\victory.cpp,575]).
        Request ignored. Check the WorldState.vsd diagram for
        allowed transitions, and check your usage and requests of
        WorldState. </font></p>
        <p align="center"><font color="#FFFFFF">Something you
        should be aware of, and thanks to &quot;12Sectalon&quot;
        for submitting the error and solution to it!</font></p>
        </td>
    </tr>
</table>

<p align="center"><font color="#FFFFFF">Gas Powered Games&trade;
and</font> <a href="http://www.dungeonsiege.com/">Dungeon
Siege&trade;</a> <font color="#FFFFFF">are the copyrighted
property of</font><font color="#008080"> </font><a
href="http://www.gaspoweredgames.com/">Gas Powered Games, Corp.</a>
</p>
</body>
</html>
