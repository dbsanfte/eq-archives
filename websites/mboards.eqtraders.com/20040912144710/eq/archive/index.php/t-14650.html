<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir="ltr" lang="en">
<head>
	<title>EQTC Forums - Bandwidth issues on the main site</title>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<meta name="keywords" content="vbulletin,forum,bbs,discussion,jelsoft,bulletin board,eq,everquest,trade,skill,tradeskills,eqtraders" />
	<meta name="description" content="This is a discussion forum about everquest tradeskills powered by vBulletin. To find out about vBulletin, go to http://www.vbulletin.com/ ." />
	<link rel="stylesheet" href="http://mboards.eqtraders.com/eq/archive/archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar"><a href="./">EQTC Forums</a> &gt; <a href="f-1.html">Announcements</a> &gt; <a href="f-11.html">DenMother's Corner</a> &gt; Bandwidth issues on the main site</div>
<hr />
<p class="largefont" style="text-align: left">View Full Version : <a href="http://mboards.eqtraders.com/eq/showthread.php?t=14650">Bandwidth issues on the main site</a></p>
<hr />

<div class="post"><div class="username" id="u1"><b>KyrosKrane</b></div><div class="posttext" id="p1">You're probably aware of this already, but trying to load the main site gives an error message:<br />
<br />
Bandwidth Limit Exceeded<br />
The server is temporarily unable to service your request due to the site owner reaching his/her bandwidth limit. Please try again later.</div></div><hr />


<div class="post"><div class="username" id="u2"><b>Ngreth Thergn</b></div><div class="posttext" id="p2">Yes it has been exceded.<br />
<br />
Since the day it will be down the most is sunday, I am just thinking of letting it drop for the one day, it should be back on Monday (new month).  Especially because, by the time all the processing was done on the credit card, and they have time to change the switch...  it would be Monday....<br />
<br />
Yes you guys did more than 225 Gigs of data transfer in the month of Febuary, just on the main site...</div></div><hr />


<div class="post"><div class="username" id="u3"><b>Michealus</b></div><div class="posttext" id="p3">Thanks for the information, and to whomever suggested having the forums bookmarked as well as the main site.<br />
<br />
I am in awe of the resource you've created guys, and the numbers of us that use it.  <br />
<br />
Thank you Niami and Nygreth, for everything you and your faithful crew do to make this site the gem it is.  Thanks to the faithful crew too.</div></div><hr />


<div class="post"><div class="username" id="u4"><b>Niami DenMother</b></div><div class="posttext" id="p4">Thankfully, Racknine took pity on us and got us back up for the rest of the weekend.</div></div><hr />


<div class="post"><div class="username" id="u5"><b>Ngreth Thergn</b></div><div class="posttext" id="p5">I don't know how many people read this but...<br />
<br />
I was wondering if folks could NOT make EQTraders their homepage.<br />
<br />
I know many sites strive for that, but they have ADs.  We have no AD's, so we have no NEED to drive trafic to our site to get AD impressions.<br />
<br />
So basically, while we still love you and want you to visit... we don't wan't you to &quot;visit everytiime you are passing through&quot;  I.E. evertime you open your browser.<br />
<br />
Doing this will save us a bit of bandwidth :)</div></div><hr />


<div class="post"><div class="username" id="u6"><b>Serenya</b></div><div class="posttext" id="p6">/blush<br />
You're not my home page exactly.  errmm.  somehow I can't quite ever seem to remember the path to the boards, so I always start at the homepage.  /squirms.  I'll attempt to retrain myself.  I'll also change my netcaptor setup so it too starts at the boards instead of the main page, and just check the news occasionally.  (To get my fix yesterday I had to google you till I found a link on another site /laugh).<br />
<br />
I do love this site, and I'm quite addicted, so I hate to see it go down.   I'm stunned at the collective amount of bandwith used though.  /boggle</div></div><hr />


<div class="post"><div class="username" id="u7"><b>KyrosKrane</b></div><div class="posttext" id="p7">Ngreth, about the time the database launched, I suggested making &quot;placeholder&quot; recipes for common components with dozens of subcombines.  This would be stuff like celestial essence, leather padding, and assorted bricks, blocks, and pieces of metals.  I really don't need to know all 40-some-odd ways of making CE and leather padding when what I'm really looking up is Heraldic armor.<br />
<br />
My suggestion would be to have a placeholder item with no subcombines.  Then, you would create a new label or tag, something like &quot;Utility item - click for recipes.&quot;  In the notes field for that item, you can have the link to the actual item with the assorted subcombines.<br />
<br />
This would shave off something like half the page size for more complicated recipes while having no real effect on the usability or readability of the site.<br />
<br />
Another way to save bandwidth is to optimize the HTML of each page.  I haven't looked at the various pages in detail, but it might be possible to shave off some unnecesary material (especially tags that have little or no effect on the actual layout of the page).  A few bytes here and there may not count for much individually, but over thousands and thousands of page views, they add up.</div></div><hr />


<div class="post"><div class="username" id="u8"><b>Ngreth Thergn</b></div><div class="posttext" id="p8">Favorite Places add no bandwidth to us :)  Your 2 favorites can be...<br />
<br />
www,eqtraders.com<br />
<br />
and<br />
<br />
mboards.eqtraders.com<br />
<br />
with those you can get ot our site just fine :)  The mboards being... these boards :) <br />
<br />
And KyrosKrane We may still think about it.</div></div><hr />


<div class="post"><div class="username" id="u9"><b>Dunthor Warsmith</b></div><div class="posttext" id="p9">Originally posted by Ngreth Thergn <br />
Favorite Places add no bandwidth to us :)  Your 2 favorites can be...<br />
&lt;snip&gt;<br />
mboards.eqtraders.com Is it better to do mboards.eqtraders.com or mboards.eqtraders.com/upload/index.php ?  I've always had much better luck with the second (the first often timed out for me when the php boards were new, and still seems to take longer nowadays).  I could just be having bad luck :p but it seems like it would be the microscopic bandwidth/processor advantage of one fewer hit, too.<br />
<br />
---------<br />
heh, the CE tree is approximately 30kbytes of data (+-500bytes, depending on how I counted), whereas some miscellaneous entire pages for some relatively small recipes are ~7kbytes.</div></div><hr />


<div class="post"><div class="username" id="u10"><b>Tudani</b></div><div class="posttext" id="p10">Maybe just show the standard scent of marr recipe in the tree with a &quot;click here to see more recipes for this item&quot; link that would take you to the CE page or load the full tree.  I for one wouldn't care about the slight lack of data as it's easy to find the data if I needed it, and it will save bandwidth costs, and it will save loading time.  IMO you can do this with all of the common items that have more than a few recipes, though even with just CE's at saving almost 30kbytes per load that's probably looking at a ton less bandwidth for the site.</div></div><hr />


<div class="post"><div class="username" id="u11"><b>KyrosKrane</b></div><div class="posttext" id="p11">Just for fun, I did a breakdown for how many bytes of data each section of the Fierce Heraldic Breastplate (http://www.eqtraders.com/items/show_item.php?item=7936&amp;menustr=035000000000) page takes.<br />
<br />
Page header - 741 bytes (1.0%) - includes HTML Head tag and site banner<br />
Menu and related text - 2,385 bytes (3.2%) <br />
Page layout - 153 bytes (0.2%) <br />
Unnecessary comment - 246 bytes (0.3%) <br />
Link to expanding script - 96 bytes (0.1%) <br />
Item name, stats, and description - 578 bytes (0.8%) <br />
Reverse recipe link - 175 bytes (0.2%) <br />
Recipe summary - 1,046 bytes (1.4%) <br />
Sources - 224 bytes (0.3%) <br />
Full recipe header - 902 bytes (1.2%) <br />
Leather Padding - 23,714 bytes (31.5%)  - includes Skinning Knife subcombines and pelt conversions, among others<br />
royal temper - 486 bytes (0.6%) <br />
breastplate mold - 78 bytes (0.1%) <br />
smithy hammer - 75 bytes (0.1%) <br />
imbued jade - 480 bytes (0.6%) <br />
enchanted chain jointing - 7,907 bytes (10.5%)  - includes some brick and block conversions.<br />
infused high quality rings (Part 1) - 979 bytes (1.3%) <br />
Celestial essence - 29,334 bytes (38.9%)  - includes all the variations<br />
infused high quality rings (Part 2) - 4006 bytes (5.3%) <br />
Printer Friendly link - 136 bytes (0.2%) <br />
Page footer - 1,588 bytes (2.1%) <br />
Total - 75,329 bytes (99.9%)  - Grand total<br />
<br />
The counts are probably a bit understated since I was using MS Word; I'm not sure if it counts new line characters as &quot;spaces&quot; or not.  Assume an extra 1-3% per figure if it doesn't, as a guess.<br />
<br />
Later on, I'll put up a ZIP file of the Word document that I used -- don't want to post it here to conserve bandwidth. :D<br />
<br />
Edit: the numbers don't add up to 100% due to rounding, obviously.</div></div><hr />


<div class="post"><div class="username" id="u12"><b>Ngreth Thergn</b></div><div class="posttext" id="p12">Originally posted by Dunthor Warsmith <br />
Is it better to do mboards.eqtraders.com or mboards.eqtraders.com/upload/index.php ?  I've always had much better luck with the second (the first often timed out for me when the php boards were new, and still seems to take longer nowadays).  I could just be having bad luck :p but it seems like it would be the microscopic bandwidth/processor advantage of one fewer hit, too.<br />
<br />
 <br />
<br />
yes... mboards.eqtraders.com/upload/index.php  is more direct, and can be used :)<br />
<br />
mboards.eqtradres.com is a redirect :)  but it is easier to remember for people that want to type it out.... so yes, for a favorite place use mboards.eqtraders.com/upload/index.php</div></div><hr />


<div class="post"><div class="username" id="u13"><b>gnormy</b></div><div class="posttext" id="p13">I'm just impressed that Ngreth was able to employ coding that avoided infintite looping such as with with Clay Converions. <br />
WELL DONE! :cheers:<br />
<br />
<br />
For poeple who think they know a better a way to do it - stop and think - then stop and think again.  And if you do have a worthwhile idea - share it and then let it go.  Just because you dont get an answer doesnt mean you haven't been heard or that they wont use your idea.  Surprisingly simple tweaks can send programs spiralling into the ground and require alot of backend testing for feasibility and reality checks.</div></div><hr />


<div class="post"><div class="username" id="u14"><b>KyrosKrane</b></div><div class="posttext" id="p14">Here's another possible alternative that would be more applicable generally.<br />
<br />
Add a true/false field to the recipes table called something like &quot;NoSubcombines&quot;.  This field is false by default.  When it's set to true, this indicates that you do not want the subcombines to be displayed.<br />
<br />
Then, in the function that displays subcombines, add an IF statement near the start that checks this flag. If the flag is true, and the current item or recipe being printed is not the top-level recipe, then print the link (only) to the item, else, print the item's subcombines.<br />
<br />
The second check (for top-level items) is to ensure that when someone clicks on a NoSubcombines item, they still see the subcombines.  So, if CE is set to NoSubcombines = true and you click on Heraldic Armor (as above), you wouldn't see CE subcombines.  If you click on CE directly, you'd still see all the subcombines.<br />
<br />
Candidates for NoSubcombines = true would be:<br />
 Items with more than 2-3 recipes to make, such as CE and leather padding.<br />
 Any item that is vendor sold, such as bricks and blocks of ore.<br />
 Utility items that are normally returned on success or fail, such as dairy spoons or files<br />
 Basic items like bricks and blocks, for which conversions are an option (small brick to large brick, small pieces to small brick, etc.)<br />
This allows the user to know there are subcombines and if he or she is interested, he can click to get the needed info.  I would imagine that the vast majority of users, however, dont really need to see the brick-to-block conversion recipes or the recipe details for a skinning knife, when what they really want is the recipe for a piece of armor.  Likewise, if I'm looking up Bristlebane's Party Platter, I probably don't want to know how to make a dairy spoon (not to mention the brick-to-block conversions you get as subcombines for it).</div></div><hr />


<div class="post"><div class="username" id="u15"><b>Ngreth Thergn</b></div><div class="posttext" id="p15">I had something like this to start with, but it worked poorly (I even managed an infinite loop in one of my itterations...  mainly the ore conversions!!!)... and I came up with the ONLY ONCE method that worked more consistantly.  It will still take much thought on what to do.  I also expect it to be a manual choice (therefore take time of making database entry changes) not automatic.... (automatic will be harder on the back end even if posible)</div></div><hr />


<div class="post"><div class="username" id="u16"><b>Ngreth Thergn</b></div><div class="posttext" id="p16">Oh MY...<br />
<br />
I forgot how horribly complex the code that makes that area is...<br />
<br />
it may take a while for me to figure out how to unravel it and put anything like that in...</div></div><hr />


<div class="post"><div class="username" id="u17"><b>KyrosKrane</b></div><div class="posttext" id="p17">Heh.  One of these days I'd like to take a look at the actual code that runs this site.  I think it would be a real eye-opener. :)<br />
<br />
Anywho, good luck, and holler if you need a hand.</div></div><hr />


<div class="post"><div class="username" id="u18"><b>Ngreth Thergn</b></div><div class="posttext" id="p18">Ok Code is now in for that, and set for Celestial Essense...  Now we jsut need to decide what gets marked as such :)</div></div><hr />


<div class="post"><div class="username" id="u19"><b>Sanna</b></div><div class="posttext" id="p19">/agree Kryos. The small code-monkey part of me finds that fascinating. (I've never had to run a large site where much is automated, all the ones I've done have been muuuch smaller... I can't even imagine what it takes to do something like EQTC, but it would be fascinating to know.) <br />
<br />
<br />
<br />
<br />
If the question is not rhetorical and inputting a copper or two is ok... <br />
<br />
-- Anything to do with [any kind of] Ore or Rusty/Tarnished/FS weapon conversions. <br />
-- Egg-type recipes (Noodles, Dough, where you have 15+ recipies that make the same finished Item). <br />
-- Anything where it's easier AND cheaper to buy from a vendor, than to make*; Bread comes to mind, as do brewing things like Short Beer and Elvish Wine. Sure you can /make/ Elvish Wine, but no one in their right mind will spend the Morning Dews for it.<br />
<br />
<br />
-- Sanna <br />
 hoping she hasn't missed a cue again &gt;_&lt;  but the idea is great; every little bit somewhere will add up.<br />
<br />
<br />
* I know this gets a little... nitpicky? not to mention that since I have no idea /HOW/ this code is going to have to be tagged to each item/combine, that may not be imaginably feasable.</div></div><hr />


<div class="post"><div class="username" id="u20"><b>mikebridge</b></div><div class="posttext" id="p20">perhaps using cookies to add 'recently viewed recipes' under the primary menu list on the left would end up with an overall decrease in the bandwidth? (haven't seen the weblogs to see if there are trends in pageviews, i.e. frontpage, search, recipe over and over to same recipe).<br />
<br />
also, are the pages dynamically created every request, or do you statically generated the recipes every X minutes/hours to reduce CPU/database hits? the only thing that i see that should be dynamic is the search, the rest could easily be scripted out to static pages....</div></div><hr />


<div class="post"><div class="username" id="u21"><b>Ngreth Thergn</b></div><div class="posttext" id="p21">Originally posted by mikebridge <br />
perhaps using cookies to add 'recently viewed recipes' under the primary menu list on the left would end up with an overall decrease in the bandwidth? (haven't seen the weblogs to see if there are trends in pageviews, i.e. frontpage, search, recipe over and over to same recipe).<br />
 not sure this would be a huge help...  but the logs don;t generate much help :)<br />
<br />
also, are the pages dynamically created every request, or do you statically generated the recipes every X minutes/hours to reduce CPU/database hits? the only thing that i see that should be dynamic is the search, the rest could easily be scripted out to static pages....  <br />
it is dynamic...  just items alone would be &gt;10000 pages created.  I know it is posible... but it would take a major redesign of how the site works.</div></div><hr />


<div class="post"><div class="username" id="u22"><b>mikebridge</b></div><div class="posttext" id="p22">actually, now that i think about it, you could add about 20 lines of code + 1 database field to do this (depending on how you have the generation setup)<br />
add a 'last mint timestamp' field onto the items/recipes in the database, then when a page is requested, check the stamp, if its been &gt; than XX time since that stamp, have the output of the page generation dump to a standardized filename like item.ITEMID (instead of it being sent to client), then just pipe the contents of that file as the 'body' of the request html page. if the XX time hasn't come up yet, then just pipe them the contents of the text file as the body of the page....</div></div><hr />


<div class="post"><div class="username" id="u23"><b>KyrosKrane</b></div><div class="posttext" id="p23">This would reduce the load on the database server somewhat, but to my understanding, that hasn't been an issue (barring some mistakes like infinite recursion).  The problem in general appears to be bandwidth consumption by data transferred to the clients.  While static page generation would help server load, it would have no effect on data transmitted to end users as either way, the same page is getting sent.</div></div><hr />

<div id="copyright">vBulletin v3.0.1, Copyright &copy;2000-2004, Jelsoft Enterprises Ltd.</div>
</div>
</body>
</html>