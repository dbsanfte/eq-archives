<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<HEAD>
 	<TITLE> TWiki Templates - TWiki - DLC   </TITLE>
 <LINK HREF="/main.css" REL="stylesheet" TYPE="text/css" TITLE="DLC CSS"> 
 	<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />  
</HEAD>
<BODY BGCOLOR="#9C9A9C" TEXT="#000000" LINK="#0000CC" VLINK="#990000" ALINK="#0000CC">
<a name="PageTop"></a>
<!-- HEADER START -->
<TABLE ALIGN="CENTER" WIDTH="750" CELLPADDING="0" CELLSPACING="0" BORDER="0">
<TR>
        <TD VALIGN="top" BGCOLOR="#105AAD"><A HREF="/Home/Index"><IMG SRC="/gfx/TWiki_left_top.gif" WIDTH="150" HEIGHT="30" ALT="TWiki" BORDER="0"></A></TD>
        <TD VALIGN="top" WIDTH="600" BGCOLOR="#105AAD"><IMG SRC="/gfx/TWiki_right_top.gif" WIDTH="600" HEIGHT="30" ALT="TWiki" BORDER="0"></TD>
</TR>
<TR>
        <TD VALIGN="TOP" HEIGHT="200" BGCOLOR="#CECECE"><IMG SRC="/gfx/TWiki_left.jpg" WIDTH="150" HEIGHT="200" ALT="TWiki" BORDER="0">
      <TABLE WIDTH="100%" BORDER="0" CELLPADDING="4" CELLSPACING="4">
      <TR><TD>
<FONT SIZE="-1">
 <A HREF="/TWiki/Index">Index</A>
<p />
<A HREF="/TWiki/WebIndex">Web Index</A>
<p />
 <BR><BR><HR><BR> 
<table border="0" cellspacing="0" cellpadding="0" width="100%">
<tr><th  colspan="2" align="center" valign="top" bgcolor="#9C9A9C"> <strong><font SIZE="-2">Players on</font></strong> </th></tr>
<tr><td  valign="top"> <font SIZE="-2">TeamSpeak:</font>  </td><td  align="right" valign="top"> <FONT COLOR="green" SIZE="-2">0/64</FONT> </td></tr>
<tr><td  valign="top"> <font SIZE="-2"><A HREF="/Home/MuaddibsCS">Muaddib's CS</A>:</font>  </td><td  align="right" valign="top"> <FONT COLOR="green" SIZE="-2">7/20</FONT> </td></tr>
<tr><td  colspan="2" valign="top"> <BR>  </td></tr>
<tr><td  colspan="2" valign="top"> <BR><font SIZE="-2"><I>Info updated every 5 min.</I></font> </td></tr>
</table>
<p />
</FONT>
      </TD></TR></TABLE>
        </TD>
        <TD ROWSPAN="2" BGCOLOR="#DEDFDE" VALIGN="TOP">
<!-- HEADER END --> 
<H2 ALIGN="center">TWiki Templates</H2>
<p />
<ul >
<li> <a href="#TWiki_Template_System">TWiki Template System</a>
<ul >
<li> <a href="#Overview">Overview</a>
</li>
<li> <a href="#Major_changes_from_the_previous_">Major changes from the previous template system</a>
</li>
<li> <a href="#Functional_Specifications">Functional Specifications</a>
</li>
<li> <a href="#TWiki_Master_Template">TWiki Master Template</a>
</li>
<li> <a href="#Types_of_Template">Types of Template</a>
<ul >
<li> <a href="#HTML_Page_Templates">HTML Page Templates</a>
</li>
<li> <a href="#Template_Topics">Template Topics</a>
<ul >
<li> <a href="#Template_Topics_in_Action">Template Topics in Action</a>
</li>
</ul>
</li>
</ul>
</li>
<li> <a href="#Templates_by_Example">Templates by Example</a>
<ul >
<li> <a href="#Base_template_oopsbase_tmpl">Base template oopsbase.tmpl</a>
</li>
<li> <a href="#Test_template_oopstest_tmpl">Test template oopstest.tmpl</a>
</li>
<li> <a href="#Sample_screen_shot_of_oopstest_t">Sample screen shot of oopstest.tmpl</a>
</li>
</ul>
</li>
<li> <a href="#Known_Issues">Known Issues</a>
</li>
</ul>
</li>
</ul>
<HR WIDTH="85%">
<p />
<ul >
<li> <a href="#TWiki_Template_System">TWiki Template System</a>
<ul >
<li> <a href="#Overview">Overview</a>
</li>
<li> <a href="#Major_changes_from_the_previous_">Major changes from the previous template system</a>
</li>
<li> <a href="#Functional_Specifications">Functional Specifications</a>
</li>
<li> <a href="#TWiki_Master_Template">TWiki Master Template</a>
</li>
<li> <a href="#Types_of_Template">Types of Template</a>
<ul >
<li> <a href="#HTML_Page_Templates">HTML Page Templates</a>
</li>
<li> <a href="#Template_Topics">Template Topics</a>
<ul >
<li> <a href="#Template_Topics_in_Action">Template Topics in Action</a>
</li>
</ul>
</li>
</ul>
</li>
<li> <a href="#Templates_by_Example">Templates by Example</a>
<ul >
<li> <a href="#Base_template_oopsbase_tmpl">Base template oopsbase.tmpl</a>
</li>
<li> <a href="#Test_template_oopstest_tmpl">Test template oopstest.tmpl</a>
</li>
<li> <a href="#Sample_screen_shot_of_oopstest_t">Sample screen shot of oopstest.tmpl</a>
</li>
</ul>
</li>
<li> <a href="#Known_Issues">Known Issues</a>
</li>
</ul>
</li>
</ul>
<p />
<h1><a name ="TWiki_Template_System"> </a> TWiki Template System </h1>
<p />
<em>Definition of the templates used to render all HTML pages displayed in TWiki</em> 
<p />
<h2><a name ="Overview"> </a> Overview </h2>
<p />
The new modular template system is more flexible, efficient, and easily updated than the old set-up, where each template is a complete HTML file. The new master template approach places common templates parts, like headers and footers, in one shared file. This simplifies the conversion of templates into XHTML format, and provides a more versatile solution for templates and for <A HREF="/TWiki/TWikiSkins">TWikiSkins</A>.
<p />
<h2><a name ="Major_changes_from_the_previous_"> </a> Major changes from the previous template system </h2>
<p />
The main difference is that templates are now defined using variables to include template parts. You change one stored instance of a common element to update all occurrences. The new system:
<p />
<ul >
<li> separates a set of common template parts into a base template that is included by all of the related templates;
</li>
</ul>
<p />
<ul >
<li> defines common variables, like a standard separator (ex: "|"), in the base template;
</li>
</ul>
<p />
<ul >
<li> defines variable text in the individual templates and passes it back to the base template.
</li>
</ul>
<p />
<h2><a name ="Functional_Specifications"> </a> Functional Specifications </h2>
<p />
<ul >
<li> Special template directives (or preprocessor commands) are embedded in normal templates.
</li>
<li> Use of template directives is optional, templates work without them.
</li>
<li> All template preprocessing is done in <code>&TWiki::Store::readTemplate()</code> so that the caller simply gets an expanded template file (the same as before).
</li>
<li> Directives are of the form <code>%TMPL:&lt;key&gt;%</code> and <code>%TMPL:&lt;key&gt;{"attr"}%</code>.
</li>
<li> Directives:
<ul >
<li> <code>%TMPL:INCLUDE{"file"}%</code>: Includes a template file. The template directory of the current web is searched first, then the templates root (<code>twiki/templates</code>).
</li>
<li> <code>%TMPL:DEF{"var"}%</code>: Define a variable. Text between this and the END directive is not returned, but put into a hash for later use.
</li>
<li> <code>%TMPL:END%</code>: Ends variable definition.
</li>
<li> <code>%TMPL:P{"var"}%</code>: Prints a previously defined variable.
</li>
</ul>
</li>
<li> Variables are live in a global name space, there is no parameter passing.
</li>
<li> Two-pass processing, so that you can use a variable before declaring it or after.
</li>
<li> Templates and <A HREF="/TWiki/TWikiSkins">TWikiSkins</A> work transparently and interchangeably. For example, you can create a skin that overloads just the <code>twiki.tmpl</code>, like <code>twiki.print.tmpl</code>, that redefines the header and footer.
</li>
<li> <strong><em>Note:</em></strong> The template directives work only for templates, they do not get processed in topic text.
</li>
</ul>
<p />
<h2><a name ="TWiki_Master_Template"> </a> TWiki Master Template </h2>
<p />
All common parts are defined in a master template, <code><b>twiki.tmpl</b></code>, that all other templates use.
<blockquote>
<table border="0" cellspacing="1" cellpadding="0">
<tr><th  align="left" valign="top" bgcolor="#9C9A9C"> <strong>Template variable:</strong> </th><th  align="left" valign="top" bgcolor="#9C9A9C"> <strong>Defines:</strong> </th></tr>
<tr><td  valign="top"> %TMPL:DEF{"sep"}%  </td><td  valign="top"> "&#124;" separator  </td></tr>
<tr><td  valign="top"> %TMPL:DEF{"htmldoctype"}%  </td><td  valign="top"> Start of all HTML pages  </td></tr>
<tr><td  valign="top"> %TMPL:DEF{"standardheader"}%  </td><td  valign="top"> Standard header (ex: view, index, seach)   </td></tr>
<tr><td  valign="top"> %TMPL:DEF{"simpleheader"}%  </td><td  valign="top"> Simple header with reduced links (ex: edit, attach, oops)  </td></tr>
<tr><td  valign="top"> %TMPL:DEF{"standardfooter"}%  </td><td  valign="top"> Footer, excluding revision and copyright parts  </td></tr>
<tr><td  valign="top"> %TMPL:DEF{"oops"}%  </td><td  valign="top"> Skeleton of oops dialog  </td></tr>
</table>
</blockquote>
<p />
<h2><a name ="Types_of_Template"> </a> Types of Template </h2>
<p />
There are two types of templates:
<p />
<ul >
<li> <strong>HTML Page Templates</strong>: Defines layout of DLC pages
</li>
<li> <strong>Template Topics</strong>: Defines default text when you create a new topic
</li>
</ul>
<p />
<h3><a name ="HTML_Page_Templates"> </a> HTML Page Templates </h3>
<p />
DLC uses HTML template files for all actions like topic view, edit, preview and so on. This allows you to change the look and feel of all pages by editing just some template files.
<p />
The template files are in the <code><b>twiki/templates</b></code> directory. As an example, <code><b>twiki/templates/view.tmpl</b></code> is the template file for the <code><b>twiki/bin/view</b></code> script. Templates can be overloaded per web. The following search order applies:
<p />
<ol >
<li> <code><b>twiki/templates/$webName/$scriptName.tmpl</b></code>
</li>
<li> <code><b>twiki/templates/$scriptName.tmpl</b></code>
</li>
</ol>
<p />
<strong><em>Note:</em></strong> <code>$webName</code> is the name of the web (ex: <code>Main</code>), and <code><b>$scriptName</b></code> is the script (ex: <code>view</code>).
<p />
<strong><em>Note:</em></strong> <A HREF="/TWiki/TWikiSkins">TWikiSkins</A> can be defined to overload the standard templates.
<p />
Special variables are used in templates, especially in <code>view</code>, to display <A HREF="/TWiki/TWikiMetaData#MetaDataRendering">meta data</A>.
<p />
<h3><a name ="Template_Topics"> </a> Template Topics </h3>
<p />
Template topics define the default text for new topics. There are three types of template topics:
<blockquote>
<table border="0" cellspacing="1" cellpadding="0">
<tr><th  align="left" valign="top" bgcolor="#9C9A9C"> <strong>Topic Name:</strong> </th><th  align="left" valign="top" bgcolor="#9C9A9C"> <strong>What it is:</strong> </th></tr>
<tr><td  valign="top"> <A HREF="/TWiki/WebTopicViewTemplate">WebTopicViewTemplate</A>  </td><td  valign="top"> Help text shown when you view a non existing topic.  </td></tr>
<tr><td  valign="top"> <A HREF="/TWiki/WebTopicNonWikiTemplate">WebTopicNonWikiTemplate</A>  </td><td  valign="top"> Help text shown when you view a non existing topic that has not a <span style='background : #FFFFCE;'><font color="#0000FF">WikiName</font></span><a href="/bin/edit/TWiki/WikiName?topicparent=TWiki.TWikiTemplates">?</a>.  </td></tr>
<tr><td  valign="top"> <A HREF="/TWiki/WebTopicEditTemplate">WebTopicEditTemplate</A>  </td><td  valign="top"> Default text shown when you create a new topic.  </td></tr>
</table>
</blockquote>
All template topics are located in the TWiki web. The <A HREF="/TWiki/WebTopicEditTemplate">WebTopicEditTemplate</A> can be overloaded. The following search order applies when you create a new topic:
<p />
<ol >
<li> The topic name specified by the <code>templatetopic</code> CGI parameter.
</li>
<li> WebTopicEditTemplate in the current web.
</li>
<li> WebTopicEditTemplate in the TWiki web.
</li>
</ol>
<p />
<h4><a name ="Template_Topics_in_Action"> </a> Template Topics in Action </h4>
<p />
Here is an example for creating new topics based on a specific template topic:
<p />
<form name="new" action="/bin/edit/TWiki/">
<ul >
<li> New example topic: 
     <input type="text" name="topic" value="ExampleTopic2004x07x14" size="23" />
     <input type="hidden" name="templatetopic" value="ExampleTopicTemplate" />
     <input type="submit" value="Create" />
     (date format is YYYYxMMxDD)
</li>
</ul>
</form>
<p />
Above form asks for a topic name. A hidden input tag of name "templatetopic" specifies the <A HREF="/TWiki/ExampleTopicTemplate">ExampleTopicTemplate</A> as the template topic. Here is the HTML source of the form:
<p />
<pre>
&lt;form name="new" action="%SCRIPTURLPATH%/edit%SCRIPTSUFFIX%/%WEB%/"&gt;
   * New example topic: 
     &lt;input type="text" name="topic" value="ExampleTopic%SERVERTIME{$yearx$mox$day}%" size="23" /&gt;
     &lt;input type="hidden" name="templatetopic" value="ExampleTopicTemplate" /&gt;
     &lt;input type="hidden" name="onlywikiname" value="on" /&gt;
     &lt;input type="submit" value="Create" /&gt;
     (date format is &lt;nop&gt;YYYYxMMxDD)
&lt;/form&gt;
</pre>
<p />
The "onlywikiname" parameter enforces <A HREF="/TWiki/WikiWord">WikiWords</A> for topic names.
<p />
<strong><em>Note:</em></strong> Use can use the <code>%WIKIUSERNAME%</code> and <code>%DATE%</code> variables in your topic templates as the signature; those variables are expanded when a new topic is created. The standard topic signature is: <br> <code>-- %WIKIUSERNAME% - %DATE%</code>
<p />
<h2><a name ="Templates_by_Example"> </a> Templates by Example </h2>
<p />
Attached is an example of an oops base template <code>oopsbase.tmpl</code> and a example oops dialog <code>oopstest.tmpl</code> which is based on the base template. <strong><em>NOTE:</em></strong> This isn't the release version, just a quick, simple demo.
<p />
<h3><a name ="Base_template_oopsbase_tmpl"> </a> Base template oopsbase.tmpl </h3>
<p />
The first line declares the delimiter variable called "sep", used to separate multiple link items. The variable can be called anywhere by writing <code>%TMPL:P{"sep"}%</code>
<p />
<blockquote>
<table border="1" cellspacing="0" cellpadding="1" bgcolor="#f5f5f5">
<tr><td>
<pre>
%TMPL:DEF{"sep"}% | %TMPL:END%
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt; %WIKITOOLNAME% . %WEB% . %TOPIC% %.TMPL:P{"titleaction"}%&lt;/title&gt;
  &lt;base href="%SCRIPTURL%/view%SCRIPTSUFFIX%/%WEB%/%TOPIC%"&gt;
  &lt;meta name="robots" content="noindex"&gt;
&lt;/head&gt;
&lt;body bgcolor="#FFFFFF"&gt;
&lt;table width="100%" border="0" cellpadding="3" cellspacing="0"&gt;
  &lt;tr&gt;
    &lt;td bgcolor="%WEBBGCOLOR%" rowspan="2" valign="top" width="1%"&gt;
      &lt;a href="%WIKIHOMEURL%"&gt;
      &lt;img src="%PUBURLPATH%/wikiHome.gif" border="0"&gt;&lt;/a&gt;
    &lt;/td&gt;
    &lt;td&gt;
      &lt;b&gt;%WIKITOOLNAME% . %WEB% . &lt;/b&gt;&lt;font size="+2"&gt;
      &lt;B&gt;%TOPIC%&lt;/b&gt; %TMPL:P{"titleaction"}%&lt;/font&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr bgcolor="%WEBBGCOLOR%"&gt;
    &lt;td colspan="2"&gt;
      %TMPL:P{"webaction"}%
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
--- ++ %TMPL:P{"heading"}%
%TMPL:P{"message"}%
&lt;table width="100%" border="0" cellpadding="3" cellspacing="0"&gt;
  &lt;tr bgcolor="%WEBBGCOLOR%"&gt;
    &lt;td valign="top"&gt;
      Topic &lt;b&gt;%TOPIC%&lt;/b&gt; . {
        %TMPL:P{"topicaction"}%
      }
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;/body&gt;
</pre>
</td></tr>
</table>
</blockquote>
<p />
<h3><a name ="Test_template_oopstest_tmpl"> </a> Test template oopstest.tmpl </h3>
<p />
Each oops template basically just defines some variables and includes the base template that does the layout work.
<p />
<blockquote>
<table border="1" cellspacing="0" cellpadding="1" bgcolor="#f5f5f5">
<tr><td>
<pre>
%TMPL:DEF{"titleaction"}% (test =titleaction=) %TMPL:END%
%TMPL:DEF{"webaction"}% test =webaction= %TMPL:END%
%TMPL:DEF{"heading"}%
Test heading %TMPL:END%
%TMPL:DEF{"message"}%
Test =message=. Blah blah blah blah blah blah blah blah blah blah blah...

   * Some more blah blah blah blah blah blah blah blah blah blah...
   * Param1: %PARAM1%
   * Param2: %PARAM2%
   * Param3: %PARAM3%
   * Param4: %PARAM4%
%TMPL:END%
%TMPL:DEF{"topicaction"}%
Test =topicaction=:
[[%WEB%.%TOPIC%][OK]] %TMPL:P{"sep"}%
[[%TWIKIWEB%.TWikiRegistration][Register]] %TMPL:END%
%TMPL:INCLUDE{"oopsbase"}%
</pre>
</td></tr>
</table >
</blockquote>
<p />
<h3><a name ="Sample_screen_shot_of_oopstest_t"> </a> Sample screen shot of oopstest.tmpl </h3>
<p />
With URL: <code><b>.../bin/oops/Test/TestTopic2?template=oopstest&param1=Index&param2=WebNotify</b></code>
<p />
<blockquote>
<table border="0" cellspacing="1" cellpadding="0">
<tr><td  valign="top"> <img src="/attach/TWiki/TWikiTemplates/testscreen.gif" width="554" height="304" alt="testscreen.gif">  </td></tr>
</table>
</blockquote>
<p />
<h2><a name ="Known_Issues"> </a> Known Issues </h2>
<p />
<ul >
<li> A drawback of referring to a master template is that you can only test a template from within TWiki, where the include variables are resolved. In the previous system, each template is a structurally complete HTML document with a <code>.tmpl</code> filename extension - it contains unresolved <code>%VARIABLES%</code>, but can still be previewed directly in a browser.
</li>
</ul>
<p />
&#151; <span style='background : #FFFFCE;'><font color="#0000FF">PeterThoeny</font></span><a href="/bin/edit/TWiki/PeterThoeny?topicparent=TWiki.TWikiTemplates">?</a> - 23 Jul 2001 <br />
&#151; <span style='background : #FFFFCE;'><font color="#0000FF">MikeMannix</font></span><a href="/bin/edit/TWiki/MikeMannix?topicparent=TWiki.TWikiTemplates">?</a> - 14 Sep 2001 <br />   
<BR CLEAR="all">
<HR WIDTH="85%">
<p />
<p />
<form name="main" action="/TWiki/">
<!-- FOOTER START -->
<BR CLEAR="all"></TD></TR>
</TABLE>
<!-- FOOTER END --> 
<TABLE ALIGN="CENTER" WIDTH="750" CELLPADDING="0" CELLSPACING="0" BORDER="0">
<TR><TD BGCOLOR="#9C9A9C" ALIGN="center"><FONT SIZE="-1">Topic <b>TWikiTemplates</b> (   <a href="/bin/edit/TWiki/TWikiTemplates"><b>Edit</b></a>
   |  <a href="/bin/attach/TWiki/TWikiTemplates">Attach</a>
   |  <a href="/bin/search/TWiki/SearchResult?scope=text&amp;regex=on&amp;search=TWiki%20*Templates%5B%5EA-Za-z%5D">Ref-By</a>
   |  <a href="/bin/rdiff/TWiki/TWikiTemplates">Diffs</a>  | r1.9 | <a href="/bin/rdiff/TWiki/TWikiTemplates?rev1=1.9&amp;rev2=1.8">&gt;</a> | <a href="/bin/view/TWiki/TWikiTemplates?rev=1.8">r1.8</a> | <a href="/bin/rdiff/TWiki/TWikiTemplates?rev1=1.8&amp;rev2=1.7">&gt;</a> | <a href="/bin/view/TWiki/TWikiTemplates?rev=1.7">r1.7</a>
   |  <a href="/bin/oops/TWiki/TWikiTemplates?template=oopsmore&param1=1.9&param2=1.9">More</a> 
  |  Go <input type="text" name="topic" size="16" />
 )</FONT></TD></TR>
</TABLE> 
</form>
<CENTER><FONT SIZE="-1">Revision r1.9 - 23 Mar 2003 - 19:03 GMT - Khelan<BR><BR>
<p />
   <font size="-2">Copyright &copy; 2000 by the contributing authors. 
All material on this collaboration tool is the property of the contributing authors. <br> 
Ideas, requests, problems regarding DLC? <a href="mailto:khelan@clandlc.com?subject=DLC&#32;Feedback">Send</a> feedback. </font><BR><BR>
 <p><i>TWiki.TWikiTemplates moved from TWiki.TWikiTemplateSystem on 12 Sep 2001 - 06:49 by <span style='background : #FFFFCE;'><font color="#0000FF">MikeMannix</font></span><a href="/bin/edit/TWiki/MikeMannix?topicparent=TWiki.TWikiTemplates">?</a> </i> - <a title="Click to move topic back to previous location, with option to change references." href="/bin/rename/TWiki/TWikiTemplates?newweb=TWiki&newtopic=TWikiTemplateSystem&confirm=on">put it back</a></p></FONT></CENTER>
<a name="PageBottom"></a>
</body>
</html>