<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<HEAD>
 	<TITLE> TWiki Access Control - TWiki - DLC   </TITLE>
 <LINK HREF="/main.css" REL="stylesheet" TYPE="text/css" TITLE="DLC CSS"> 
 	<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />  
</HEAD>
<BODY BGCOLOR="#9C9A9C" TEXT="#000000" LINK="#0000CC" VLINK="#990000" ALINK="#0000CC">
<a name="PageTop"></a>
<!-- HEADER START -->
<TABLE ALIGN="CENTER" WIDTH="750" CELLPADDING="0" CELLSPACING="0" BORDER="0">
<TR>
        <TD VALIGN="top" BGCOLOR="#105AAD"><A HREF="/Home/Index"><IMG SRC="/gfx/TWiki_left_top.gif" WIDTH="150" HEIGHT="30" ALT="TWiki" BORDER="0"></A></TD>
        <TD VALIGN="top" WIDTH="600" BGCOLOR="#105AAD"><IMG SRC="/gfx/TWiki_right_top.gif" WIDTH="600" HEIGHT="30" ALT="TWiki" BORDER="0"></TD>
</TR>
<TR>
        <TD VALIGN="TOP" HEIGHT="200" BGCOLOR="#CECECE"><IMG SRC="/gfx/TWiki_left.jpg" WIDTH="150" HEIGHT="200" ALT="TWiki" BORDER="0">
      <TABLE WIDTH="100%" BORDER="0" CELLPADDING="4" CELLSPACING="4">
      <TR><TD>
<FONT SIZE="-1">
 <A HREF="/TWiki/Index">Index</A>
<p />
<A HREF="/TWiki/WebIndex">Web Index</A>
<p />
 <BR><BR><HR><BR> 
<table border="0" cellspacing="0" cellpadding="0" width="100%">
<tr><th  colspan="2" align="center" valign="top" bgcolor="#9C9A9C"> <strong><font SIZE="-2">Players on</font></strong> </th></tr>
<tr><td  valign="top"> <font SIZE="-2">TeamSpeak:</font>  </td><td  align="right" valign="top"> <FONT COLOR="green" SIZE="-2">3/64</FONT> </td></tr>
<tr><td  valign="top"> <font SIZE="-2"><A HREF="/Home/MuaddibsCS">Muaddib's CS</A>:</font>  </td><td  align="right" valign="top"> <FONT COLOR="green" SIZE="-2">10/20</FONT> </td></tr>
<tr><td  colspan="2" valign="top"> <BR>  </td></tr>
<tr><td  colspan="2" valign="top"> <BR><font SIZE="-2"><I>Info updated every 5 min.</I></font> </td></tr>
</table>
<p />
</FONT>
      </TD></TR></TABLE>
        </TD>
        <TD ROWSPAN="2" BGCOLOR="#DEDFDE" VALIGN="TOP">
<!-- HEADER END --> 
<H2 ALIGN="center">TWiki Access Control</H2>
<p />
<ul >
<li> <a href="#TWiki_Access_Control">TWiki Access Control</a>
<ul >
<li> <a href="#Overview">Overview</a>
</li>
<li> <a href="#An_Important_Control_Considerati">An Important Control Consideration</a>
</li>
<li> <a href="#Users_and_Groups">Users and Groups</a>
<ul >
<li> <a href="#Managing_Users">Managing Users</a>
</li>
<li> <a href="#Managing_Groups">Managing Groups</a>
</li>
</ul>
</li>
<li> <a href="#Restricting_Write_Access">Restricting Write Access</a>
<ul >
<li> <a href="#Deny_Editing_by_Topic">Deny Editing by Topic</a>
</li>
<li> <a href="#Deny_Editing_by_Web">Deny Editing by Web</a>
</li>
</ul>
</li>
<li> <a href="#Restricting_Rename_Access">Restricting Rename Access</a>
<ul >
<li> <a href="#Deny_Renaming_by_Topic">Deny Renaming by Topic</a>
</li>
<li> <a href="#Deny_Renaming_by_Web">Deny Renaming by Web</a>
</li>
</ul>
</li>
<li> <a href="#Restricting_Read_Access">Restricting Read Access</a>
<ul >
<li> <a href="#Known_Issues">Known Issues</a>
<ul >
<li> <a href="#Selective_Unrestricted_Web_Acces">Selective Unrestricted Web Access</a>
</li>
</ul>
</li>
</ul>
</li>
<li> <a href="#The_SuperAdminGroup">The SuperAdminGroup</a>
</li>
</ul>
</li>
</ul>
<HR WIDTH="85%">
<p />
<p />
<h1><a name ="TWiki_Access_Control"> </a> TWiki Access Control </h1>
<p />
<em>Restricting read and write access to topics and webs, by users and groups</em>
<p />
<h2><a name ="Overview"> </a> Overview </h2>
<p />
<A HREF="/TWiki/TWikiAccessControl">TWikiAccessControl</A> allows you restrict access to single topics and entire webs, by individual user and by user groups, in three main areas: view; edit &amp; attach; and rename/move/delete. These controls, combined with <span style='background : #FFFFCE;'><font color="#0000FF">TWikiUserAuthentication</font></span><a href="/bin/edit/TWiki/TWikiUserAuthentication?topicparent=TWiki.TWikiAccessControl">?</a>, let you easily create and manage an extremely flexible, fine-grained privilege system.
<p />
<h2><a name ="An_Important_Control_Considerati"> </a> An Important Control Consideration </h2>
<p />
Open, freeform editing is the essence of the <span style='background : #FFFFCE;'><font color="#0000FF">WikiCulture</font></span><a href="/bin/edit/TWiki/WikiCulture?topicparent=TWiki.TWikiAccessControl">?</a> - it's what makes TWiki different and often more effective than other collaboration tools. So, it is strongly recommended that decisions to restrict read or write access to a web or a topic are made with care. Experience shows that <em>unrestricted write access</em> works very well because:
<p />
<ul >
<li> Peer influence is enough to ensure that only relevant content is posted.
</li>
</ul>
<p />
<ul >
<li> Peer editing - the ability to rearrange anything on a page - keeps topics focussed.
</li>
</ul>
<p />
<ul >
<li> All content is preserved under revision control.
<ul >
<li> Edits can be undone by the <span style='background : #FFFFCE;'><font color="#0000FF">TWikiAdminGroup</font></span><a href="/bin/edit/Home/TWikiAdminGroup?topicparent=TWiki.TWikiAccessControl">?</a> (the default administrators group; see #ManagingGroups).
</li>
<li> Users are encouraged to edit and refactor (condense a long topic), since there's a safety net.
</li>
</ul>
</li>
</ul>
<p />
As a collaboration guideline:
<p />
<ul >
<li> Create broad groups (more and varied input), and...
</li>
<li> Avoid creating view-only users (if you can read it, you can contribute to it).
</li>
</ul>
<p />
<h2><a name ="Users_and_Groups"> </a> Users and Groups </h2>
<p />
Access control is based on users and groups. Users are defined by their <span style='background : #FFFFCE;'><font color="#0000FF">WikiNames</font></span><a href="/bin/edit/TWiki/WikiNames?topicparent=TWiki.TWikiAccessControl">?</a>, an then organized into unlimited combinations under different user groups.  
<p />
<h3><a name ="Managing_Users"> </a> Managing Users </h3>
<p />
A user is created by with the <span style='background : #FFFFCE;'><font color="#0000FF">TWikiRegistration</font></span><a href="/bin/edit/TWiki/TWikiRegistration?topicparent=TWiki.TWikiAccessControl">?</a> form. The process generates a topic in the Home web in the new user's <span style='background : #FFFFCE;'><font color="#0000FF">WikiName</font></span><a href="/bin/edit/TWiki/WikiName?topicparent=TWiki.TWikiAccessControl">?</a>. The default visitor name is <span style='background : #FFFFCE;'><font color="#0000FF">TWikiGuest</font></span><a href="/bin/edit/Home/TWikiGuest?topicparent=TWiki.TWikiAccessControl">?</a>.
<p />
<ul >
<li> Users can be authenticated using Basic Authentication or SSL. <span style='background : #FFFFCE;'><font color="#0000FF">TWikiUserAuthentication</font></span><a href="/bin/edit/TWiki/TWikiUserAuthentication?topicparent=TWiki.TWikiAccessControl">?</a> is required in order to track user identities.
</li>
</ul>
<p />
<a name="ManagingGroups"></a>
<h3><a name ="Managing_Groups"> </a> Managing Groups </h3>
<p />
Groups are defined by group topics in the <code><b>Home</b></code> web, like the <span style='background : #FFFFCE;'><font color="#0000FF">TWikiAdminGroup</font></span><a href="/bin/edit/Home/TWikiAdminGroup?topicparent=TWiki.TWikiAccessControl">?</a>. To start a new group:
<ol >
<li> <strong>Create</strong> a new topic with A name that ends in <strong>Group</strong>, <code>SomeGroup</code>
</li>
<li> <strong>Define</strong> two variables:
<ul >
<li> Set GROUP = &lt; list of users and groups &gt;
</li>
<li> Set ALLOWTOPICCHANGE = &lt; list of users and groups &gt;
</li>
</ul>
</li>
</ol>
<p />
<ul >
<li>
<ul >
<li> GROUP is a comma-separated list of users and of other groups:<br>
     <code><b>&nbsp; &nbsp; * Set GROUP = Home.SomeUser, Home.OtherUser, Home.SomeOtherGroup</b></code>
</li>
</ul>
</li>
</ul>
<p />
<ul >
<li>
<ul >
<li> ALLOWTOPICCHANGE defines who is allowed to change the group topic; it is a comma delimited list of users and groups. You typically want to restrict that to the members of the group itself, so it should contain the name of the topic,<br> <code>&nbsp; &nbsp; * Set ALLOWTOPICCHANGE = Home.TWikiAdminGroup</code> <br> for the TWikiAdminGroup topic. (This prevents users not in the group from editing the topic and from gaining unauthorized membership to the group.)
</li>
</ul>
</li>
</ul>
<p />
<h2><a name ="Restricting_Write_Access"> </a> Restricting Write Access </h2>
<p />
You can define who is allowed to make changes to a web or a topic. 
<p />
<h3><a name ="Deny_Editing_by_Topic"> </a> Deny Editing by Topic </h3>
<p />
Denying editing of a topic also restricts attaching files to it; both privileges are assigned together.
<ul >
<li> Define one or both of these variables in a topic, preferably at the end of the page:
<ul >
<li> Set DENYTOPICCHANGE = &lt; list of users and groups &gt;
</li>
<li> Set ALLOWTOPICCHANGE = &lt; list of users and groups &gt;
</li>
</ul>
</li>
</ul>
<p />
<ul >
<li> DENYTOPICCHANGE defines users or groups that <strong>are not</strong> allowed to make changes to the topic. It is a comma delimited list of users and groups. Example: <br> <code>&nbsp; &nbsp; * Set DENYTOPICCHANGE = Home.SomeBadBoy, Home.SomeBadGirl, Home.SomeHackerGroup</code>
</li>
</ul>
<p />
<ul >
<li> ALLOWTOPICCHANGE defines users or groups that <strong>are</strong> allowed to make changes to the topic. It is a comma delimited list of users and groups. Example: <br> <code>&nbsp; &nbsp; * Set ALLOWTOPICCHANGE = Home.SomeGoodGuy, Home.SomeGoodGirl, Home.TWikiAdminGroup</code>
</li>
</ul>
<p />
<ul >
<li> DENYTOPICCHANGE is evaluated before ALLOWTOPICCHANGE. Access is denied if the authenticated person is in the DENYTOPICCHANGE list, or not in the ALLOWTOPICCHANGE list. Access is granted in case DENYTOPICCHANGE and ALLOWTOPICCHANGE is not defined.
</li>
</ul>
<p />
<h3><a name ="Deny_Editing_by_Web"> </a> Deny Editing by Web </h3>
<p />
Restricting web-level editing blocks creating new topics, changing topics or attaching files.
<p />
<ul >
<li> Define one or both of these variable in the <A HREF="/TWiki/WebPreferences">WebPreferences</A> topic:
<ul >
<li> Set DENYWEBCHANGE = &lt; list of users and groups &gt;
</li>
<li> Set ALLOWWEBCHANGE = &lt; list of users and groups &gt;
</li>
</ul>
</li>
</ul>
<p />
The same rules apply as for restricting topics, with these additions:
<ul >
<li> DENYTOPICCHANGE (in topic) overrides DENYWEBCHANGE (in WebPreferences)
</li>
<li> ALLOWTOPICCHANGE (in topic) overrides ALLOWWEBCHANGE (in WebPreferences)
</li>
</ul>
<p />
<h2><a name ="Restricting_Rename_Access"> </a> Restricting Rename Access </h2>
<p />
You can define who is allowed to rename, move or delete a topic, or rename a web.
<p />
<h3><a name ="Deny_Renaming_by_Topic"> </a> Deny Renaming by Topic </h3>
<p />
To allow a user to rename, move or delete a topic, they also need write (editing) permission.  They also need write access to change references in referring topics.
<p />
<ul >
<li> Define one or both of these variables in a topic, preferably at the end of the topic:
<ul >
<li> Set DENYTOPICRENAME = &lt; list of users and groups &gt;
</li>
<li> Set ALLOWTOPICRENAME = &lt; list of users and groups &gt;
</li>
</ul>
</li>
</ul>
<p />
<ul >
<li> DENYTOPICCRENAME defines users or groups that <strong>are not</strong> allowed to rename the topic. It is a comma delimited list of users and groups. Example: <br> <code>&nbsp; &nbsp; * Set DENYTOPICRENAME = Home.SomeBadBoy, Home.SomeBadGirl, Home.SomeHackerGroup</code>
</li>
</ul>
<p />
<ul >
<li> ALLOWTOPICRENAME defines users or groups that <strong>are</strong> allowed to rename the topic. It is a comma delimited list of users and groups. Example: <br> <code>&nbsp; &nbsp; * Set ALLOWTOPICRENAME = Home.SomeGoodGuy, Home.SomeGoodGirl, Home.TWikiAdminGroup</code>
</li>
</ul>
<p />
<ul >
<li> DENYTOPICRENAME is evaluated before ALLOWTOPICRENAME. Access is denied if the authenticated person is in the DENYTOPICRENAME list, or not in the ALLOWTOPICRENAME list. Access is granted in case DENYTOPICRENAME and ALLOWTOPICRENAME is not defined.
</li>
</ul>
<p />
<h3><a name ="Deny_Renaming_by_Web"> </a> Deny Renaming by Web </h3>
<p />
You can define restrictions of who is allowed to rename a DLC web.
<p />
<ul >
<li> Define one or both of these variable in the <A HREF="/TWiki/WebPreferences">WebPreferences</A> topic:
<ul >
<li> Set DENYWEBRENAME = &lt; list of users and groups &gt;
</li>
<li> Set ALLOWWEBRENAME = &lt; list of users and groups &gt;
</li>
</ul>
</li>
</ul>
<p />
The same rules apply as for topics, with these additions:
<ul >
<li> DENYTOPICRENAME (in topic) overrides DENYWEBRENAME (in WebPreferences)
</li>
<li> ALLOWTOPICRENAME (in topic) overrides ALLOWWEBRENAME (in WebPreferences)
</li>
</ul>
<p />
<h2><a name ="Restricting_Read_Access"> </a> Restricting Read Access </h2>
<p />
You can define restrictions of who is allowed to view a DLC web.
<p />
<ul >
<li> Define one or both of these variable in the <A HREF="/TWiki/WebPreferences">WebPreferences</A> topic:
<ul >
<li> Set DENYWEBVIEW = &lt; list of users and groups &gt;
</li>
<li> Set ALLOWWEBVIEW = &lt; list of users and groups &gt;
</li>
</ul>
</li>
</ul>
<p />
<h3><a name ="Known_Issues"> </a> Known Issues </h3>
<p />
<ul >
<li> The view restriction is not suitable for very sensitive content since there is a way to circumvent the read access restriction.
</li>
<li> Read access restriction only works if the view script is authenticated, that means that users need to log on also just to read topics. <A HREF="/TWiki/TWikiInstallationGuide">TWikiInstallationGuide</A> has more on Basic Authentication based on the <code><b>.htaccess</b></code> file.
</li>
</ul>
<p />
<h4><a name ="Selective_Unrestricted_Web_Acces"> </a> Selective Unrestricted Web Access </h4>
<p />
<ul >
<li> There is a workaround if you prefer to have unrestricted access to view topics located in normal webs, and to authenticate users only for webs where view restriction is enabled:
<ol >
<li> <strong>Omit</strong> the <code><b>view</b></code> script from the <code>.htaccess</code> file.
</li>
<li> <strong>Enable</strong> the <code><b>$doRememberRemoteUser</b></code> flag in <code><b>lib/TWiki.cfg</b></code> as described in <span style='background : #FFFFCE;'><font color="#0000FF">TWikiUserAuthentication</font></span><a href="/bin/edit/TWiki/TWikiUserAuthentication?topicparent=TWiki.TWikiAccessControl">?</a>. DLC will now remember the IP address of an authenticated user.
</li>
<li> <strong>Copy</strong> the <code><b>view</b></code> script to <code><b>viewauth</b></code> (or better, create a symbolic link)
</li>
<li> <strong>Add</strong> <code><b>viewauth</b></code> to the list of authenticated scripts in the .htaccess file.
<ul >
<li> When a user accesses a web where you enabled view restriction, DLC will redirect from the <code>view</code> script to the <code>viewauth</code> script once (this happens only if the user has never edited a topic). Doing so will ask for authentication. The <code>viewauth</code> script shows the requested topic if the user could log on and if the user is authorized to see that web.
</li>
<li> If you enable view restriction for a web, it is recommended to restrict search "all webs" from searching this web. Enable this restriction with the <code><b>NOSEARCHALL</b></code> variable in its <A HREF="/TWiki/WebPreferences">WebPreferences</A>, like:
<ul >
<li> Set NOSEARCHALL = on
</li>
</ul>
</li>
<li> It is not recommended to restrict view access to individual topics since all content is searchable <em>within</em> a web.
</li>
</ul>
</li>
</ol>
</li>
</ul>
<p />
<a name="SuperAdminGroup"></a>
<h2><a name ="The_SuperAdminGroup"> </a> The SuperAdminGroup </h2>
<p />
By mistyping a user or group name in the ALLOWTOPICCHANGE setting, it's possible to lock a topic so that it no-one can edit it from a browser. To avoid this:
<ul >
<li> Set the <code>$superAdminGroup</code> variable in <code>lib/TWiki.cfg</code> to the name of a group of users that are always allowed to edit/view topics.
</li>
</ul>
<blockquote style="background-color:#f0f0f0">
<pre>
$superAdminGroup = "TWikiAdminGroup";
</pre>
</blockquote>
<ul >
<li> The default setting is not to have superusers.
</li>
</ul>
<p />
&#151; <span style='background : #FFFFCE;'><font color="#0000FF">PeterThoeny</font></span><a href="/bin/edit/TWiki/PeterThoeny?topicparent=TWiki.TWikiAccessControl">?</a> - 16 Mar 2001 <br>
&#151; <span style='background : #FFFFCE;'><font color="#0000FF">AndreaSterbini</font></span><a href="/bin/edit/TWiki/AndreaSterbini?topicparent=TWiki.TWikiAccessControl">?</a> - 11 Apr 2001 <br> 
<p />
<strong><em>Related topics:</em></strong> <A HREF="/TWiki/TWikiPreferences">TWikiPreferences</A>, <A HREF="/TWiki/WebPreferences">WebPreferences</A> (in every web), <span style='background : #FFFFCE;'><font color="#0000FF">TWikiAdminGroup</font></span><a href="/bin/edit/Home/TWikiAdminGroup?topicparent=TWiki.TWikiAccessControl">?</a>, <span style='background : #FFFFCE;'><font color="#0000FF">TWikiGroups</font></span><a href="/bin/edit/Home/TWikiGroups?topicparent=TWiki.TWikiAccessControl">?</a>
<BR CLEAR="all">
<HR WIDTH="85%">
<p />
<p />
<form name="main" action="/TWiki/">
<!-- FOOTER START -->
<BR CLEAR="all"></TD></TR>
</TABLE>
<!-- FOOTER END --> 
<TABLE ALIGN="CENTER" WIDTH="750" CELLPADDING="0" CELLSPACING="0" BORDER="0">
<TR><TD BGCOLOR="#9C9A9C" ALIGN="center"><FONT SIZE="-1">Topic <b>TWikiAccessControl</b> (   <a href="/bin/edit/TWiki/TWikiAccessControl"><b>Edit</b></a>
   |  <a href="/bin/attach/TWiki/TWikiAccessControl">Attach</a>
   |  <a href="/bin/search/TWiki/SearchResult?scope=text&amp;regex=on&amp;search=TWiki%20*Access%20*Control%5B%5EA-Za-z%5D">Ref-By</a>
   |  <a href="/bin/rdiff/TWiki/TWikiAccessControl">Diffs</a>  | r1.19 | <a href="/bin/rdiff/TWiki/TWikiAccessControl?rev1=1.19&amp;rev2=1.18">&gt;</a> | <a href="/bin/view/TWiki/TWikiAccessControl?rev=1.18">r1.18</a> | <a href="/bin/rdiff/TWiki/TWikiAccessControl?rev1=1.18&amp;rev2=1.17">&gt;</a> | <a href="/bin/view/TWiki/TWikiAccessControl?rev=1.17">r1.17</a>
   |  <a href="/bin/oops/TWiki/TWikiAccessControl?template=oopsmore&param1=1.19&param2=1.19">More</a> 
  |  Go <input type="text" name="topic" size="16" />
 )</FONT></TD></TR>
</TABLE> 
</form>
<CENTER><FONT SIZE="-1">Revision r1.19 - 23 Mar 2003 - 20:23 GMT - Khelan<BR><BR>
<p />
   <font size="-2">Copyright &copy; 2000 by the contributing authors. 
All material on this collaboration tool is the property of the contributing authors. <br> 
Ideas, requests, problems regarding DLC? <a href="mailto:khelan@clandlc.com?subject=DLC&#32;Feedback">Send</a> feedback. </font><BR><BR>
 <p /></FONT></CENTER>
<a name="PageBottom"></a>
</body>
</html>