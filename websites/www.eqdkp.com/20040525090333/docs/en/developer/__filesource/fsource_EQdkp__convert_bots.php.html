<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
<title>File Source for convert_bots.php</title>
<link rel="stylesheet" type="text/css" href="../media/styles.css">
</head>

<body>
<div id="page">
  <div id="header-wrapper">
    <div id="header-top">
      <img src="http://eqdkp.com/images/logo.gif" width="205" height="36" alt="EQdkp" />
    </div>

    <div id="header-bot">
      <img src="http://eqdkp.com/images/logo_bottom.gif" alt="Open Source DKP" />
    </div>

    <div style="clear:both;"></div>
  </div>

  <div id="content-wrapper">
    <div id="content">
      <div class="content-block">
        
        <div class="content-header" align="right">EQdkp</div>
      </div><h1 align="center">Source for file convert_bots.php</h1>
<p>Documentation is available at <a href="../EQdkp/_eqdkp2_convert_bots_php.html">convert_bots.php</a></p>
<pre class="code"><a name="a1"></a><br />1     <strong>&lt;?php</strong><a name="a2"></a><br />2     <strong>$eqdkp_root_path</strong> = <font color="#66cccc">'./'</font>;<a name="a3"></a><br />3     <a href="http://www.php.net/define">define</a><strong>(</strong><font color="#66cccc">'EQDKP_INC'</font><strong>,</strong> true<strong>)</strong>;<a name="a4"></a><br />4     <font color="blue">require_once</font><strong>(</strong><strong>$eqdkp_root_path</strong> . <font color="#66cccc">'common.php'</font><strong>)</strong>;<a name="a5"></a><br />5     <a name="a6"></a><br />6     <a href="http://www.php.net/set_time_limit">set_time_limit</a><strong>(</strong>600<strong>)</strong>;<a name="a7"></a><br />7     <a name="a8"></a><br />8     <a href="http://www.php.net/define">define</a><strong>(</strong><font color="#66cccc">'ORIGINAL_DB'</font><strong>,</strong> <font color="#66cccc">'eqdkp_bots'</font><strong>)</strong>;<a name="a9"></a><br />9     <a href="http://www.php.net/define">define</a><strong>(</strong><font color="#66cccc">'EXPERIMENTAL_DB'</font><strong>,</strong> <font color="#66cccc">'eqdkp_exp'</font><strong>)</strong>;<a name="a10"></a><br />10    <a name="a11"></a><br />11    <font color="blue">function</font> <a href="../EQdkp/_eqdkp2_convert_bots_php.html#functionconvert_members">convert_members</a><strong>(</strong><strong>)</strong><a name="a12"></a><br />12    <strong>{</strong><a name="a13"></a><br />13        <font color="blue">global</font> <strong>$db</strong><a name="a14"></a><br />14        <strong>$queries</strong> = array<strong>(</strong><strong>)</strong>;<a name="a15"></a><br />15    <a name="a16"></a><br />16        echo <font color="#66cccc">'Converting members...'</font>;<a name="a17"></a><br />17    <a name="a18"></a><br />18        <strong>$db</strong><strong>-&gt;</strong>select_db<strong>(</strong><a href="../EQdkp/_eqdkp2_convert_bots_php.html#defineORIGINAL_DB">ORIGINAL_DB</a><strong>)</strong>;<a name="a19"></a><br />19        <strong>$sql</strong> = <font color="#66cccc">'SELECT * FROM eqdkp_members'</font>;<a name="a20"></a><br />20        <strong>$result</strong> = <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><strong>$sql</strong><strong>)</strong>;<a name="a21"></a><br />21        while <strong>(</strong> <strong>$row</strong> = <strong>$db</strong><strong>-&gt;</strong>fetch_record<strong>(</strong><strong>$result</strong><strong>)</strong> <strong>)</strong><a name="a22"></a><br />22        <strong>{</strong><a name="a23"></a><br />23            <strong>$query</strong> = <strong>$db</strong><strong>-&gt;</strong>build_query<strong>(</strong><font color="#66cccc">'INSERT'</font><strong>,</strong> array<strong>(</strong><a name="a24"></a><br />24                <font color="#66cccc">'member_name'</font>       =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'member_name'</font><strong>]</strong><strong>,</strong><a name="a25"></a><br />25                <font color="#66cccc">'user_id'</font>           =&gt; 0<strong>,</strong><a name="a26"></a><br />26                <font color="#66cccc">'rank_id'</font>           =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'member_rank_id'</font><strong>]</strong><strong>,</strong><a name="a27"></a><br />27                <font color="#66cccc">'member_id'</font>         =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'member_id'</font><strong>]</strong><strong>,</strong><a name="a28"></a><br />28                <font color="#66cccc">'member_earned'</font>     =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'member_earned'</font><strong>]</strong><strong>,</strong><a name="a29"></a><br />29                <font color="#66cccc">'member_spent'</font>      =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'member_spent'</font><strong>]</strong><strong>,</strong><a name="a30"></a><br />30                <font color="#66cccc">'member_adjustment'</font> =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'member_adjustment'</font><strong>]</strong><strong>,</strong><a name="a31"></a><br />31                <font color="#66cccc">'member_active'</font>     =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'member_status'</font><strong>]</strong><strong>,</strong><a name="a32"></a><br />32                <font color="#66cccc">'member_entered'</font>    =&gt; <a href="http://www.php.net/time">time</a><strong>(</strong><strong>)</strong><strong>,</strong><a name="a33"></a><br />33                <font color="#66cccc">'member_firstraid'</font>  =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'member_firstraid'</font><strong>]</strong><strong>,</strong><a name="a34"></a><br />34                <font color="#66cccc">'member_lastraid'</font>   =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'member_lastraid'</font><strong>]</strong><strong>,</strong><a name="a35"></a><br />35                <font color="#66cccc">'member_raidcount'</font>  =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'member_raidcount'</font><strong>]</strong><strong>)</strong><a name="a36"></a><br />36            <strong>)</strong>;<a name="a37"></a><br />37    <a name="a38"></a><br />38            <strong>$queries</strong><strong>[</strong><strong>]</strong> = <font color="#66cccc">'INSERT INTO '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineMEMBERS_TABLE">MEMBERS_TABLE</a> . <strong>$query</strong>;<a name="a39"></a><br />39    <a name="a40"></a><br />40            <strong>$query</strong> = <strong>$db</strong><strong>-&gt;</strong>build_query<strong>(</strong><font color="#66cccc">'INSERT'</font><strong>,</strong> array<strong>(</strong><a name="a41"></a><br />41                <font color="#66cccc">'member_name'</font>  =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'member_name'</font><strong>]</strong><strong>,</strong><a name="a42"></a><br />42                <font color="#66cccc">'member_race'</font>  =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'member_race'</font><strong>]</strong><strong>,</strong><a name="a43"></a><br />43                <font color="#66cccc">'member_class'</font> =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'member_class'</font><strong>]</strong><strong>,</strong><a name="a44"></a><br />44                <font color="#66cccc">'member_level'</font> =&gt; <strong>(</strong> <strong>$row</strong><strong>[</strong><font color="#66cccc">'member_level'</font><strong>]</strong> == null <strong>)</strong> ? <font color="#66cccc">'0'</font> : <strong>$row</strong><strong>[</strong><font color="#66cccc">'member_level'</font><strong>]</strong><strong>)</strong><a name="a45"></a><br />45            <strong>)</strong>;<a name="a46"></a><br />46    <a name="a47"></a><br />47            <strong>$queries</strong><strong>[</strong><strong>]</strong> = <font color="#66cccc">'INSERT INTO eqdkp_everquest_members'</font> . <strong>$query</strong>;<a name="a48"></a><br />48        <strong>}</strong><a name="a49"></a><br />49        <strong>$db</strong><strong>-&gt;</strong>free_result<strong>(</strong><strong>$result</strong><strong>)</strong>;<a name="a50"></a><br />50    <a name="a51"></a><br />51        <strong>$sql</strong> = <font color="#66cccc">'SELECT * FROM eqdkp_member_ranks'</font>;<a name="a52"></a><br />52        <strong>$result</strong> = <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><strong>$sql</strong><strong>)</strong>;<a name="a53"></a><br />53        while <strong>(</strong> <strong>$row</strong> = <strong>$db</strong><strong>-&gt;</strong>fetch_record<strong>(</strong><strong>$result</strong><strong>)</strong> <strong>)</strong><a name="a54"></a><br />54        <strong>{</strong><a name="a55"></a><br />55            <strong>$query</strong> = <strong>$db</strong><strong>-&gt;</strong>build_query<strong>(</strong><font color="#66cccc">'INSERT'</font><strong>,</strong> array<strong>(</strong><a name="a56"></a><br />56                <font color="#66cccc">'rank_id'</font>     =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'rank_id'</font><strong>]</strong><strong>,</strong><a name="a57"></a><br />57                <font color="#66cccc">'rank_name'</font>   =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'rank_name'</font><strong>]</strong><strong>,</strong><a name="a58"></a><br />58                <font color="#66cccc">'rank_hide'</font>   =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'rank_hide'</font><strong>]</strong><strong>,</strong><a name="a59"></a><br />59                <font color="#66cccc">'rank_prefix'</font> =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'rank_prefix'</font><strong>]</strong><strong>,</strong><a name="a60"></a><br />60                <font color="#66cccc">'rank_suffix'</font> =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'rank_suffix'</font><strong>]</strong><strong>)</strong><a name="a61"></a><br />61            <strong>)</strong>;<a name="a62"></a><br />62    <a name="a63"></a><br />63            <strong>$queries</strong><strong>[</strong><strong>]</strong> = <font color="#66cccc">'INSERT INTO '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineMEMBER_RANKS_TABLE">MEMBER_RANKS_TABLE</a> . <strong>$query</strong>;<a name="a64"></a><br />64        <strong>}</strong><a name="a65"></a><br />65        <strong>$db</strong><strong>-&gt;</strong>free_result<strong>(</strong><strong>$result</strong><strong>)</strong>;<a name="a66"></a><br />66    <a name="a67"></a><br />67        <strong>$db</strong><strong>-&gt;</strong>select_db<strong>(</strong><a href="../EQdkp/_eqdkp2_convert_bots_php.html#defineEXPERIMENTAL_DB">EXPERIMENTAL_DB</a><strong>)</strong>;<a name="a68"></a><br />68        <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><font color="#66cccc">'DELETE FROM '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineMEMBERS_TABLE">MEMBERS_TABLE</a><strong>)</strong>;<a name="a69"></a><br />69        <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><font color="#66cccc">'DELETE FROM '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineMEMBER_RANKS_TABLE">MEMBER_RANKS_TABLE</a><strong>)</strong>;<a name="a70"></a><br />70        <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><font color="#66cccc">'DELETE FROM eqdkp_everquest_members'</font><strong>)</strong>;<a name="a71"></a><br />71        <font color="blue">foreach</font> <strong>(</strong> <strong>$queries</strong> as <strong>$sql</strong> <strong>)</strong><a name="a72"></a><br />72        <strong>{</strong><a name="a73"></a><br />73            <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><strong>$sql</strong><strong>)</strong>;<a name="a74"></a><br />74        <strong>}</strong><a name="a75"></a><br />75    <a name="a76"></a><br />76        echo <font color="#66cccc">' done.&lt;br /&gt;'</font>;<a name="a77"></a><br />77    <strong>}</strong><a name="a78"></a><br />78    <a name="a79"></a><br />79    <font color="blue">function</font> <a href="../EQdkp/_eqdkp2_convert_bots_php.html#functionconvert_raids">convert_raids</a><strong>(</strong><strong>)</strong><a name="a80"></a><br />80    <strong>{</strong><a name="a81"></a><br />81        <font color="blue">global</font> <strong>$db</strong><a name="a82"></a><br />82        <strong>$queries</strong> = array<strong>(</strong><strong>)</strong>;<a name="a83"></a><br />83    <a name="a84"></a><br />84        echo <font color="#66cccc">'Converting raids...'</font>;<a name="a85"></a><br />85    <a name="a86"></a><br />86        <strong>$db</strong><strong>-&gt;</strong>select_db<strong>(</strong><a href="../EQdkp/_eqdkp2_convert_bots_php.html#defineORIGINAL_DB">ORIGINAL_DB</a><strong>)</strong>;<a name="a87"></a><br />87        <strong>$sql</strong> = <font color="#66cccc">'SELECT * FROM eqdkp_raids'</font>;<a name="a88"></a><br />88        <strong>$result</strong> = <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><strong>$sql</strong><strong>)</strong>;<a name="a89"></a><br />89        while <strong>(</strong> <strong>$row</strong> = <strong>$db</strong><strong>-&gt;</strong>fetch_record<strong>(</strong><strong>$result</strong><strong>)</strong> <strong>)</strong><a name="a90"></a><br />90        <strong>{</strong><a name="a91"></a><br />91            <font color="blue">if</font> <strong>(</strong> <strong>(</strong><strong>$row</strong><strong>[</strong><font color="#66cccc">'raid_name'</font><strong>]</strong> != <font color="#66cccc">''</font><strong>)</strong> &amp;&amp; <strong>(</strong><strong>$row</strong><strong>[</strong><font color="#66cccc">'raid_date'</font><strong>]</strong> &gt; 0<strong>)</strong> <strong>)</strong><a name="a92"></a><br />92            <strong>{</strong><a name="a93"></a><br />93                <strong>$query</strong> = <strong>$db</strong><strong>-&gt;</strong>build_query<strong>(</strong><font color="#66cccc">'INSERT'</font><strong>,</strong> array<strong>(</strong><a name="a94"></a><br />94                    <font color="#66cccc">'raid_id'</font>         =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'raid_id'</font><strong>]</strong><strong>,</strong><a name="a95"></a><br />95                    <font color="#66cccc">'raid_name'</font>       =&gt; <a href="http://www.php.net/stripslashes">stripslashes</a><strong>(</strong><strong>$row</strong><strong>[</strong><font color="#66cccc">'raid_name'</font><strong>]</strong><strong>)</strong><strong>,</strong><a name="a96"></a><br />96                    <font color="#66cccc">'raid_date'</font>       =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'raid_date'</font><strong>]</strong><strong>,</strong><a name="a97"></a><br />97                    <font color="#66cccc">'raid_note'</font>       =&gt; <a href="http://www.php.net/stripslashes">stripslashes</a><strong>(</strong><strong>$row</strong><strong>[</strong><font color="#66cccc">'raid_note'</font><strong>]</strong><strong>)</strong><strong>,</strong><a name="a98"></a><br />98                    <font color="#66cccc">'raid_value'</font>      =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'raid_value'</font><strong>]</strong><strong>,</strong><a name="a99"></a><br />99                    <font color="#66cccc">'raid_added_by'</font>   =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'raid_added_by'</font><strong>]</strong><strong>,</strong><a name="a100"></a><br />100                   <font color="#66cccc">'raid_updated_by'</font> =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'raid_updated_by'</font><strong>]</strong><strong>)</strong><a name="a101"></a><br />101               <strong>)</strong>;<a name="a102"></a><br />102   <a name="a103"></a><br />103               <strong>$queries</strong><strong>[</strong><strong>]</strong> = <font color="#66cccc">'INSERT INTO '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineRAIDS_TABLE">RAIDS_TABLE</a> . <strong>$query</strong>;<a name="a104"></a><br />104           <strong>}</strong><a name="a105"></a><br />105       <strong>}</strong><a name="a106"></a><br />106       <strong>$db</strong><strong>-&gt;</strong>free_result<strong>(</strong><strong>$result</strong><strong>)</strong>;<a name="a107"></a><br />107   <a name="a108"></a><br />108       <strong>$db</strong><strong>-&gt;</strong>select_db<strong>(</strong><a href="../EQdkp/_eqdkp2_convert_bots_php.html#defineEXPERIMENTAL_DB">EXPERIMENTAL_DB</a><strong>)</strong>;<a name="a109"></a><br />109       <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><font color="#66cccc">'DELETE FROM '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineRAIDS_TABLE">RAIDS_TABLE</a><strong>)</strong>;<a name="a110"></a><br />110       <font color="blue">foreach</font> <strong>(</strong> <strong>$queries</strong> as <strong>$sql</strong> <strong>)</strong><a name="a111"></a><br />111       <strong>{</strong><a name="a112"></a><br />112           <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><strong>$sql</strong><strong>)</strong>;<a name="a113"></a><br />113       <strong>}</strong><a name="a114"></a><br />114   <a name="a115"></a><br />115       echo <font color="#66cccc">' done.&lt;br /&gt;'</font>;<a name="a116"></a><br />116   <strong>}</strong><a name="a117"></a><br />117   <a name="a118"></a><br />118   <font color="blue">function</font> <a href="../EQdkp/_eqdkp2_convert_bots_php.html#functionconvert_raid_attendees">convert_raid_attendees</a><strong>(</strong><strong>)</strong><a name="a119"></a><br />119   <strong>{</strong><a name="a120"></a><br />120       <font color="blue">global</font> <strong>$db</strong><a name="a121"></a><br />121       <strong>$queries</strong> = array<strong>(</strong><strong>)</strong>;<a name="a122"></a><br />122   <a name="a123"></a><br />123       echo <font color="#66cccc">'Converting raid attendees...'</font>;<a name="a124"></a><br />124   <a name="a125"></a><br />125       <strong>$db</strong><strong>-&gt;</strong>select_db<strong>(</strong><a href="../EQdkp/_eqdkp2_convert_bots_php.html#defineORIGINAL_DB">ORIGINAL_DB</a><strong>)</strong>;<a name="a126"></a><br />126       <strong>$sql</strong> = <font color="#66cccc">'SELECT * FROM eqdkp_raid_attendees'</font>;<a name="a127"></a><br />127       <strong>$result</strong> = <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><strong>$sql</strong><strong>)</strong>;<a name="a128"></a><br />128       while <strong>(</strong> <strong>$row</strong> = <strong>$db</strong><strong>-&gt;</strong>fetch_record<strong>(</strong><strong>$result</strong><strong>)</strong> <strong>)</strong><a name="a129"></a><br />129       <strong>{</strong><a name="a130"></a><br />130           <font color="blue">if</font> <strong>(</strong> <strong>(</strong><strong>$row</strong><strong>[</strong><font color="#66cccc">'raid_id'</font><strong>]</strong> &gt; 0<strong>)</strong> &amp;&amp; <strong>(</strong><strong>!</strong>empty<strong>(</strong><strong>$row</strong><strong>[</strong><font color="#66cccc">'member_name'</font><strong>]</strong><strong>)</strong><strong>)</strong> <strong>)</strong><a name="a131"></a><br />131           <strong>{</strong><a name="a132"></a><br />132               <strong>$query</strong> = <strong>$db</strong><strong>-&gt;</strong>build_query<strong>(</strong><font color="#66cccc">'INSERT'</font><strong>,</strong> array<strong>(</strong><a name="a133"></a><br />133                   <font color="#66cccc">'raid_id'</font>     =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'raid_id'</font><strong>]</strong><strong>,</strong><a name="a134"></a><br />134                   <font color="#66cccc">'member_name'</font> =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'member_name'</font><strong>]</strong><strong>)</strong><a name="a135"></a><br />135               <strong>)</strong>;<a name="a136"></a><br />136   <a name="a137"></a><br />137               <strong>$queries</strong><strong>[</strong><strong>]</strong> = <font color="#66cccc">'INSERT INTO '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineRAID_ATTENDEES_TABLE">RAID_ATTENDEES_TABLE</a> . <strong>$query</strong>;<a name="a138"></a><br />138           <strong>}</strong><a name="a139"></a><br />139       <strong>}</strong><a name="a140"></a><br />140       <strong>$db</strong><strong>-&gt;</strong>free_result<strong>(</strong><strong>$result</strong><strong>)</strong>;<a name="a141"></a><br />141   <a name="a142"></a><br />142       <strong>$db</strong><strong>-&gt;</strong>select_db<strong>(</strong><a href="../EQdkp/_eqdkp2_convert_bots_php.html#defineEXPERIMENTAL_DB">EXPERIMENTAL_DB</a><strong>)</strong>;<a name="a143"></a><br />143       <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><font color="#66cccc">'DELETE FROM '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineRAID_ATTENDEES_TABLE">RAID_ATTENDEES_TABLE</a><strong>)</strong>;<a name="a144"></a><br />144       <font color="blue">foreach</font> <strong>(</strong> <strong>$queries</strong> as <strong>$sql</strong> <strong>)</strong><a name="a145"></a><br />145       <strong>{</strong><a name="a146"></a><br />146           <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><strong>$sql</strong><strong>)</strong>;<a name="a147"></a><br />147       <strong>}</strong><a name="a148"></a><br />148   <a name="a149"></a><br />149       echo <font color="#66cccc">' done.&lt;br /&gt;'</font>;<a name="a150"></a><br />150   <strong>}</strong><a name="a151"></a><br />151   <a name="a152"></a><br />152   <font color="blue">function</font> <a href="../EQdkp/_eqdkp2_convert_bots_php.html#functionconvert_items">convert_items</a><strong>(</strong><strong>)</strong><a name="a153"></a><br />153   <strong>{</strong><a name="a154"></a><br />154       <font color="blue">global</font> <strong>$db</strong><a name="a155"></a><br />155       <strong>$queries</strong> = array<strong>(</strong><strong>)</strong>;<a name="a156"></a><br />156   <a name="a157"></a><br />157       echo <font color="#66cccc">'Converting item purchases...'</font>;<a name="a158"></a><br />158   <a name="a159"></a><br />159       <strong>$db</strong><strong>-&gt;</strong>select_db<strong>(</strong><a href="../EQdkp/_eqdkp2_convert_bots_php.html#defineORIGINAL_DB">ORIGINAL_DB</a><strong>)</strong>;<a name="a160"></a><br />160       <strong>$sql</strong> = <font color="#66cccc">'SELECT * FROM eqdkp_items'</font>;<a name="a161"></a><br />161       <strong>$result</strong> = <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><strong>$sql</strong><strong>)</strong>;<a name="a162"></a><br />162       while <strong>(</strong> <strong>$row</strong> = <strong>$db</strong><strong>-&gt;</strong>fetch_record<strong>(</strong><strong>$result</strong><strong>)</strong> <strong>)</strong><a name="a163"></a><br />163       <strong>{</strong><a name="a164"></a><br />164           <font color="blue">if</font> <strong>(</strong> <strong>$row</strong><strong>[</strong><font color="#66cccc">'item_id'</font><strong>]</strong> &gt; 0 <strong>)</strong><a name="a165"></a><br />165           <strong>{</strong><a name="a166"></a><br />166               <strong>$query</strong> = <strong>$db</strong><strong>-&gt;</strong>build_query<strong>(</strong><font color="#66cccc">'INSERT'</font><strong>,</strong> array<strong>(</strong><a name="a167"></a><br />167                   <font color="#66cccc">'item_id'</font>          =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'item_id'</font><strong>]</strong><strong>,</strong><a name="a168"></a><br />168                   <font color="#66cccc">'preset_id'</font>        =&gt; 0<strong>,</strong><a name="a169"></a><br />169                   <font color="#66cccc">'item_name'</font>        =&gt; <a href="http://www.php.net/stripslashes">stripslashes</a><strong>(</strong><strong>$row</strong><strong>[</strong><font color="#66cccc">'item_name'</font><strong>]</strong><strong>)</strong><strong>,</strong><a name="a170"></a><br />170                   <font color="#66cccc">'item_buyer'</font>       =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'item_buyer'</font><strong>]</strong><strong>,</strong><a name="a171"></a><br />171                   <font color="#66cccc">'item_value'</font>       =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'item_value'</font><strong>]</strong><strong>,</strong><a name="a172"></a><br />172                   <font color="#66cccc">'item_date'</font>        =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'item_date'</font><strong>]</strong><strong>,</strong><a name="a173"></a><br />173                   <font color="#66cccc">'raid_id'</font>          =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'raid_id'</font><strong>]</strong><strong>,</strong><a name="a174"></a><br />174                   <font color="#66cccc">'item_group_key'</font>   =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'item_group_key'</font><strong>]</strong><strong>,</strong><a name="a175"></a><br />175                   <font color="#66cccc">'item_added_by'</font>    =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'item_added_by'</font><strong>]</strong><strong>,</strong><a name="a176"></a><br />176                   <font color="#66cccc">'item_updated_by'</font>  =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'item_updated_by'</font><strong>]</strong><strong>)</strong><a name="a177"></a><br />177               <strong>)</strong>;<a name="a178"></a><br />178   <a name="a179"></a><br />179               <strong>$queries</strong><strong>[</strong><strong>]</strong> = <font color="#66cccc">'INSERT INTO '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineITEMS_TABLE">ITEMS_TABLE</a> . <strong>$query</strong>;<a name="a180"></a><br />180           <strong>}</strong><a name="a181"></a><br />181       <strong>}</strong><a name="a182"></a><br />182       <strong>$db</strong><strong>-&gt;</strong>free_result<strong>(</strong><strong>$result</strong><strong>)</strong>;<a name="a183"></a><br />183   <a name="a184"></a><br />184       <strong>$db</strong><strong>-&gt;</strong>select_db<strong>(</strong><a href="../EQdkp/_eqdkp2_convert_bots_php.html#defineEXPERIMENTAL_DB">EXPERIMENTAL_DB</a><strong>)</strong>;<a name="a185"></a><br />185       <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><font color="#66cccc">'DELETE FROM '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineITEMS_TABLE">ITEMS_TABLE</a><strong>)</strong>;<a name="a186"></a><br />186       <font color="blue">foreach</font> <strong>(</strong> <strong>$queries</strong> as <strong>$sql</strong> <strong>)</strong><a name="a187"></a><br />187       <strong>{</strong><a name="a188"></a><br />188           <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><strong>$sql</strong><strong>)</strong>;<a name="a189"></a><br />189       <strong>}</strong><a name="a190"></a><br />190   <a name="a191"></a><br />191       echo <font color="#66cccc">' done.&lt;br /&gt;'</font>;<a name="a192"></a><br />192   <strong>}</strong><a name="a193"></a><br />193   <a name="a194"></a><br />194   <font color="blue">function</font> <a href="../EQdkp/_eqdkp2_convert_bots_php.html#functionconvert_item_presets">convert_item_presets</a><strong>(</strong><strong>)</strong><a name="a195"></a><br />195   <strong>{</strong><a name="a196"></a><br />196        <font color="blue">global</font> <strong>$db</strong><a name="a197"></a><br />197        <strong>$queries</strong> = array<strong>(</strong><strong>)</strong>;<a name="a198"></a><br />198   <a name="a199"></a><br />199        echo <font color="#66cccc">'Converting item presets...'</font>;<a name="a200"></a><br />200   <a name="a201"></a><br />201        <strong>$db</strong><strong>-&gt;</strong>select_db<strong>(</strong><a href="../EQdkp/_eqdkp2_convert_bots_php.html#defineEXPERIMENTAL_DB">EXPERIMENTAL_DB</a><strong>)</strong>;<a name="a202"></a><br />202        <strong>$sql</strong> = <font color="#66cccc">'SELECT * FROM '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineITEMS_TABLE">ITEMS_TABLE</a> . <font color="#66cccc">' GROUP BY item_name'</font>;<a name="a203"></a><br />203        <strong>$result</strong> = <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><strong>$sql</strong><strong>)</strong>;<a name="a204"></a><br />204        while <strong>(</strong> <strong>$row</strong> = <strong>$db</strong><strong>-&gt;</strong>fetch_record<strong>(</strong><strong>$result</strong><strong>)</strong> <strong>)</strong><a name="a205"></a><br />205        <strong>{</strong><a name="a206"></a><br />206           <strong>$query</strong> = <strong>$db</strong><strong>-&gt;</strong>build_query<strong>(</strong><font color="#66cccc">'INSERT'</font><strong>,</strong> array<strong>(</strong><a name="a207"></a><br />207               <font color="#66cccc">'preset_id'</font>     =&gt; null<strong>,</strong><a name="a208"></a><br />208               <font color="#66cccc">'preset_gameid'</font> =&gt; null<strong>,</strong><a name="a209"></a><br />209               <font color="#66cccc">'preset_name'</font>   =&gt; <a href="http://www.php.net/stripslashes">stripslashes</a><strong>(</strong><strong>$row</strong><strong>[</strong><font color="#66cccc">'item_name'</font><strong>]</strong><strong>)</strong><strong>,</strong><a name="a210"></a><br />210               <font color="#66cccc">'preset_value'</font>  =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'item_value'</font><strong>]</strong><strong>)</strong><a name="a211"></a><br />211           <strong>)</strong>;<a name="a212"></a><br />212   <a name="a213"></a><br />213           <strong>$queries</strong><strong>[</strong><strong>]</strong> = <font color="#66cccc">'INSERT INTO '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineITEM_PRESETS_TABLE">ITEM_PRESETS_TABLE</a> . <strong>$query</strong>;<a name="a214"></a><br />214        <strong>}</strong><a name="a215"></a><br />215        <strong>$db</strong><strong>-&gt;</strong>free_result<strong>(</strong><strong>$result</strong><strong>)</strong>;<a name="a216"></a><br />216   <a name="a217"></a><br />217        <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><font color="#66cccc">'DELETE FROM '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineITEM_PRESETS_TABLE">ITEM_PRESETS_TABLE</a><strong>)</strong>;<a name="a218"></a><br />218        <font color="blue">foreach</font> <strong>(</strong> <strong>$queries</strong> as <strong>$sql</strong> <strong>)</strong><a name="a219"></a><br />219        <strong>{</strong><a name="a220"></a><br />220           <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><strong>$sql</strong><strong>)</strong>;<a name="a221"></a><br />221        <strong>}</strong><a name="a222"></a><br />222   <a name="a223"></a><br />223        echo <font color="#66cccc">' done.&lt;br /&gt;'</font>;<a name="a224"></a><br />224   <strong>}</strong><a name="a225"></a><br />225   <a name="a226"></a><br />226   <font color="blue">function</font> <a href="../EQdkp/_eqdkp2_convert_bots_php.html#functionconvert_events">convert_events</a><strong>(</strong><strong>)</strong><a name="a227"></a><br />227   <strong>{</strong><a name="a228"></a><br />228       <font color="blue">global</font> <strong>$db</strong><a name="a229"></a><br />229       <strong>$queries</strong> = array<strong>(</strong><strong>)</strong>;<a name="a230"></a><br />230   <a name="a231"></a><br />231       echo <font color="#66cccc">'Converting events...'</font>;<a name="a232"></a><br />232   <a name="a233"></a><br />233       <strong>$db</strong><strong>-&gt;</strong>select_db<strong>(</strong><a href="../EQdkp/_eqdkp2_convert_bots_php.html#defineORIGINAL_DB">ORIGINAL_DB</a><strong>)</strong>;<a name="a234"></a><br />234       <strong>$sql</strong> = <font color="#66cccc">'SELECT * FROM eqdkp_events GROUP BY event_name'</font>;<a name="a235"></a><br />235       <strong>$result</strong> = <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><strong>$sql</strong><strong>)</strong>;<a name="a236"></a><br />236       while <strong>(</strong> <strong>$row</strong> = <strong>$db</strong><strong>-&gt;</strong>fetch_record<strong>(</strong><strong>$result</strong><strong>)</strong> <strong>)</strong><a name="a237"></a><br />237       <strong>{</strong><a name="a238"></a><br />238           <strong>$query</strong> = <strong>$db</strong><strong>-&gt;</strong>build_query<strong>(</strong><font color="#66cccc">'INSERT'</font><strong>,</strong> array<strong>(</strong><a name="a239"></a><br />239               <font color="#66cccc">'event_name'</font>  =&gt; <a href="http://www.php.net/stripslashes">stripslashes</a><strong>(</strong><strong>$row</strong><strong>[</strong><font color="#66cccc">'event_name'</font><strong>]</strong><strong>)</strong><strong>,</strong><a name="a240"></a><br />240               <font color="#66cccc">'event_id'</font>    =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'event_id'</font><strong>]</strong><strong>,</strong><a name="a241"></a><br />241               <font color="#66cccc">'event_value'</font> =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'event_value'</font><strong>]</strong><strong>)</strong><a name="a242"></a><br />242           <strong>)</strong>;<a name="a243"></a><br />243   <a name="a244"></a><br />244           <strong>$queries</strong><strong>[</strong><strong>]</strong> = <font color="#66cccc">'INSERT INTO '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineEVENTS_TABLE">EVENTS_TABLE</a> . <strong>$query</strong>;<a name="a245"></a><br />245       <strong>}</strong><a name="a246"></a><br />246       <strong>$db</strong><strong>-&gt;</strong>free_result<strong>(</strong><strong>$result</strong><strong>)</strong>;<a name="a247"></a><br />247   <a name="a248"></a><br />248       <strong>$db</strong><strong>-&gt;</strong>select_db<strong>(</strong><a href="../EQdkp/_eqdkp2_convert_bots_php.html#defineEXPERIMENTAL_DB">EXPERIMENTAL_DB</a><strong>)</strong>;<a name="a249"></a><br />249       <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><font color="#66cccc">'DELETE FROM '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineEVENTS_TABLE">EVENTS_TABLE</a><strong>)</strong>;<a name="a250"></a><br />250       <font color="blue">foreach</font> <strong>(</strong> <strong>$queries</strong> as <strong>$sql</strong> <strong>)</strong><a name="a251"></a><br />251       <strong>{</strong><a name="a252"></a><br />252           <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><strong>$sql</strong><strong>)</strong>;<a name="a253"></a><br />253       <strong>}</strong><a name="a254"></a><br />254   <a name="a255"></a><br />255       echo <font color="#66cccc">' done.&lt;br /&gt;'</font>;<a name="a256"></a><br />256   <strong>}</strong><a name="a257"></a><br />257   <a name="a258"></a><br />258   <font color="blue">function</font> <a href="../EQdkp/_eqdkp2_convert_bots_php.html#functionconvert_styles">convert_styles</a><strong>(</strong><strong>)</strong><a name="a259"></a><br />259   <strong>{</strong><a name="a260"></a><br />260       <font color="blue">global</font> <strong>$db</strong><a name="a261"></a><br />261       <strong>$queries</strong> = array<strong>(</strong><strong>)</strong>;<a name="a262"></a><br />262   <a name="a263"></a><br />263       echo <font color="#66cccc">'Converting styles...'</font>;<a name="a264"></a><br />264   <a name="a265"></a><br />265       <strong>$db</strong><strong>-&gt;</strong>select_db<strong>(</strong><a href="../EQdkp/_eqdkp2_convert_bots_php.html#defineORIGINAL_DB">ORIGINAL_DB</a><strong>)</strong>;<a name="a266"></a><br />266       <strong>$sql</strong> = <font color="#66cccc">'SELECT * FROM eqdkp_styles'</font>;<a name="a267"></a><br />267       <strong>$result</strong> = <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><strong>$sql</strong><strong>)</strong>;<a name="a268"></a><br />268       while <strong>(</strong> <strong>$row</strong> = <strong>$db</strong><strong>-&gt;</strong>fetch_record<strong>(</strong><strong>$result</strong><strong>)</strong> <strong>)</strong><a name="a269"></a><br />269       <strong>{</strong><a name="a270"></a><br />270           <strong>$query</strong> = <strong>$db</strong><strong>-&gt;</strong>build_query<strong>(</strong><font color="#66cccc">'INSERT'</font><strong>,</strong> array<strong>(</strong><a name="a271"></a><br />271               <font color="#66cccc">'style_id'</font>           =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'style_id'</font><strong>]</strong><strong>,</strong><a name="a272"></a><br />272               <font color="#66cccc">'style_name'</font>         =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'style_name'</font><strong>]</strong><strong>,</strong><a name="a273"></a><br />273               <font color="#66cccc">'template_path'</font>      =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'template_path'</font><strong>]</strong><strong>,</strong><a name="a274"></a><br />274               <font color="#66cccc">'body_background'</font>    =&gt; <font color="#66cccc">'#'</font> . <strong>$row</strong><strong>[</strong><font color="#66cccc">'body_background'</font><strong>]</strong><strong>,</strong><a name="a275"></a><br />275               <font color="#66cccc">'body_link'</font>          =&gt; <font color="#66cccc">'#'</font> . <strong>$row</strong><strong>[</strong><font color="#66cccc">'body_link'</font><strong>]</strong><strong>,</strong><a name="a276"></a><br />276               <font color="#66cccc">'body_link_style'</font>    =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'body_link_style'</font><strong>]</strong><strong>,</strong><a name="a277"></a><br />277               <font color="#66cccc">'body_hlink'</font>         =&gt; <font color="#66cccc">'#'</font> . <strong>$row</strong><strong>[</strong><font color="#66cccc">'body_hlink'</font><strong>]</strong><strong>,</strong><a name="a278"></a><br />278               <font color="#66cccc">'body_hlink_style'</font>   =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'body_hlink_style'</font><strong>]</strong><strong>,</strong><a name="a279"></a><br />279               <font color="#66cccc">'header_link'</font>        =&gt; <font color="#66cccc">'#'</font> . <strong>$row</strong><strong>[</strong><font color="#66cccc">'header_link'</font><strong>]</strong><strong>,</strong><a name="a280"></a><br />280               <font color="#66cccc">'header_link_style'</font>  =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'header_link_style'</font><strong>]</strong><strong>,</strong><a name="a281"></a><br />281               <font color="#66cccc">'header_hlink'</font>       =&gt; <font color="#66cccc">'#'</font> . <strong>$row</strong><strong>[</strong><font color="#66cccc">'header_hlink'</font><strong>]</strong><strong>,</strong><a name="a282"></a><br />282               <font color="#66cccc">'header_hlink_style'</font> =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'header_hlink_style'</font><strong>]</strong><strong>,</strong><a name="a283"></a><br />283               <font color="#66cccc">'tr_color1'</font>          =&gt; <font color="#66cccc">'#'</font> . <strong>$row</strong><strong>[</strong><font color="#66cccc">'tr_color1'</font><strong>]</strong><strong>,</strong><a name="a284"></a><br />284               <font color="#66cccc">'tr_color2'</font>          =&gt; <font color="#66cccc">'#'</font> . <strong>$row</strong><strong>[</strong><font color="#66cccc">'tr_color2'</font><strong>]</strong><strong>,</strong><a name="a285"></a><br />285               <font color="#66cccc">'th_color1'</font>          =&gt; <font color="#66cccc">'#'</font> . <strong>$row</strong><strong>[</strong><font color="#66cccc">'th_color1'</font><strong>]</strong><strong>,</strong><a name="a286"></a><br />286               <font color="#66cccc">'fontface1'</font>          =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'fontface1'</font><strong>]</strong><strong>,</strong><a name="a287"></a><br />287               <font color="#66cccc">'fontface2'</font>          =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'fontface2'</font><strong>]</strong><strong>,</strong><a name="a288"></a><br />288               <font color="#66cccc">'fontface3'</font>          =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'fontface3'</font><strong>]</strong><strong>,</strong><a name="a289"></a><br />289               <font color="#66cccc">'fontsize1'</font>          =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'fontsize1'</font><strong>]</strong> . <font color="#66cccc">'px'</font><strong>,</strong><a name="a290"></a><br />290               <font color="#66cccc">'fontsize2'</font>          =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'fontsize2'</font><strong>]</strong> . <font color="#66cccc">'px'</font><strong>,</strong><a name="a291"></a><br />291               <font color="#66cccc">'fontsize3'</font>          =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'fontsize3'</font><strong>]</strong> . <font color="#66cccc">'px'</font><strong>,</strong><a name="a292"></a><br />292               <font color="#66cccc">'fontcolor1'</font>         =&gt; <font color="#66cccc">'#'</font> . <strong>$row</strong><strong>[</strong><font color="#66cccc">'fontcolor1'</font><strong>]</strong><strong>,</strong><a name="a293"></a><br />293               <font color="#66cccc">'fontcolor2'</font>         =&gt; <font color="#66cccc">'#'</font> . <strong>$row</strong><strong>[</strong><font color="#66cccc">'fontcolor2'</font><strong>]</strong><strong>,</strong><a name="a294"></a><br />294               <font color="#66cccc">'fontcolor3'</font>         =&gt; <font color="#66cccc">'#'</font> . <strong>$row</strong><strong>[</strong><font color="#66cccc">'fontcolor3'</font><strong>]</strong><strong>,</strong><a name="a295"></a><br />295               <font color="#66cccc">'fontcolor_neg'</font>      =&gt; <font color="#66cccc">'#'</font> . <strong>$row</strong><strong>[</strong><font color="#66cccc">'fontcolor_neg'</font><strong>]</strong><strong>,</strong><a name="a296"></a><br />296               <font color="#66cccc">'fontcolor_pos'</font>      =&gt; <font color="#66cccc">'#'</font> . <strong>$row</strong><strong>[</strong><font color="#66cccc">'fontcolor_pos'</font><strong>]</strong><strong>,</strong><a name="a297"></a><br />297               <font color="#66cccc">'table_border_width'</font> =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'table_border_width'</font><strong>]</strong> . <font color="#66cccc">'px'</font><strong>,</strong><a name="a298"></a><br />298               <font color="#66cccc">'table_border_color'</font> =&gt; <font color="#66cccc">'#'</font> . <strong>$row</strong><strong>[</strong><font color="#66cccc">'table_border_color'</font><strong>]</strong><strong>,</strong><a name="a299"></a><br />299               <font color="#66cccc">'table_border_style'</font> =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'table_border_style'</font><strong>]</strong><strong>,</strong><a name="a300"></a><br />300               <font color="#66cccc">'input_color'</font>        =&gt; <font color="#66cccc">'#'</font> . <strong>$row</strong><strong>[</strong><font color="#66cccc">'input_color'</font><strong>]</strong><strong>,</strong><a name="a301"></a><br />301               <font color="#66cccc">'input_border_width'</font> =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'input_border_width'</font><strong>]</strong> . <font color="#66cccc">'px'</font><strong>,</strong><a name="a302"></a><br />302               <font color="#66cccc">'input_border_color'</font> =&gt; <font color="#66cccc">'#'</font> . <strong>$row</strong><strong>[</strong><font color="#66cccc">'input_border_color'</font><strong>]</strong><strong>,</strong><a name="a303"></a><br />303               <font color="#66cccc">'input_border_style'</font> =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'input_border_style'</font><strong>]</strong><strong>)</strong><a name="a304"></a><br />304           <strong>)</strong>;<a name="a305"></a><br />305   <a name="a306"></a><br />306           <strong>$queries</strong><strong>[</strong><strong>]</strong> = <font color="#66cccc">'INSERT INTO '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineSTYLES_TABLE">STYLES_TABLE</a> . <strong>$query</strong>;<a name="a307"></a><br />307       <strong>}</strong><a name="a308"></a><br />308       <strong>$db</strong><strong>-&gt;</strong>free_result<strong>(</strong><strong>$result</strong><strong>)</strong>;<a name="a309"></a><br />309   <a name="a310"></a><br />310       <strong>$sql</strong> = <font color="#66cccc">'SELECT * FROM eqdkp_style_config'</font>;<a name="a311"></a><br />311       <strong>$result</strong> = <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><strong>$sql</strong><strong>)</strong>;<a name="a312"></a><br />312       while <strong>(</strong> <strong>$row</strong> = <strong>$db</strong><strong>-&gt;</strong>fetch_record<strong>(</strong><strong>$result</strong><strong>)</strong> <strong>)</strong><a name="a313"></a><br />313       <strong>{</strong><a name="a314"></a><br />314           <strong>$query</strong> = <strong>$db</strong><strong>-&gt;</strong>build_query<strong>(</strong><font color="#66cccc">'INSERT'</font><strong>,</strong> array<strong>(</strong><a name="a315"></a><br />315               <font color="#66cccc">'style_id'</font>          =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'style_id'</font><strong>]</strong><strong>,</strong><a name="a316"></a><br />316               <font color="#66cccc">'attendees_columns'</font> =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'attendees_columns'</font><strong>]</strong><strong>,</strong><a name="a317"></a><br />317               <font color="#66cccc">'date_notime_long'</font>  =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'date_notime_long'</font><strong>]</strong><strong>,</strong><a name="a318"></a><br />318               <font color="#66cccc">'date_notime_short'</font> =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'date_notime_short'</font><strong>]</strong><strong>,</strong><a name="a319"></a><br />319               <font color="#66cccc">'date_time'</font>         =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'date_time'</font><strong>]</strong><strong>,</strong><a name="a320"></a><br />320               <font color="#66cccc">'logo_path'</font>         =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'logo_path'</font><strong>]</strong><strong>)</strong><a name="a321"></a><br />321           <strong>)</strong>;<a name="a322"></a><br />322   <a name="a323"></a><br />323           <strong>$queries</strong><strong>[</strong><strong>]</strong> = <font color="#66cccc">'INSERT INTO '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineSTYLE_CONFIG_TABLE">STYLE_CONFIG_TABLE</a> . <strong>$query</strong>;<a name="a324"></a><br />324       <strong>}</strong><a name="a325"></a><br />325       <strong>$db</strong><strong>-&gt;</strong>free_result<strong>(</strong><strong>$result</strong><strong>)</strong>;<a name="a326"></a><br />326   <a name="a327"></a><br />327       <strong>$db</strong><strong>-&gt;</strong>select_db<strong>(</strong><a href="../EQdkp/_eqdkp2_convert_bots_php.html#defineEXPERIMENTAL_DB">EXPERIMENTAL_DB</a><strong>)</strong>;<a name="a328"></a><br />328       <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><font color="#66cccc">'DELETE FROM '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineSTYLES_TABLE">STYLES_TABLE</a><strong>)</strong>;<a name="a329"></a><br />329       <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><font color="#66cccc">'DELETE FROM '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineSTYLE_CONFIG_TABLE">STYLE_CONFIG_TABLE</a><strong>)</strong>;<a name="a330"></a><br />330       <font color="blue">foreach</font> <strong>(</strong> <strong>$queries</strong> as <strong>$sql</strong> <strong>)</strong><a name="a331"></a><br />331       <strong>{</strong><a name="a332"></a><br />332           <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><strong>$sql</strong><strong>)</strong>;<a name="a333"></a><br />333       <strong>}</strong><a name="a334"></a><br />334   <a name="a335"></a><br />335       echo <font color="#66cccc">' done.&lt;br /&gt;'</font>;<a name="a336"></a><br />336   <strong>}</strong><a name="a337"></a><br />337   <a name="a338"></a><br />338   <font color="blue">function</font> <a href="../EQdkp/_eqdkp2_convert_bots_php.html#functionconvert_adjustments">convert_adjustments</a><strong>(</strong><strong>)</strong><a name="a339"></a><br />339   <strong>{</strong><a name="a340"></a><br />340           <font color="blue">global</font> <strong>$db</strong><a name="a341"></a><br />341       <strong>$queries</strong> = array<strong>(</strong><strong>)</strong>;<a name="a342"></a><br />342   <a name="a343"></a><br />343       echo <font color="#66cccc">'Converting adjustments...'</font>;<a name="a344"></a><br />344   <a name="a345"></a><br />345       <strong>$db</strong><strong>-&gt;</strong>select_db<strong>(</strong><a href="../EQdkp/_eqdkp2_convert_bots_php.html#defineORIGINAL_DB">ORIGINAL_DB</a><strong>)</strong>;<a name="a346"></a><br />346       <strong>$sql</strong> = <font color="#66cccc">'SELECT * FROM eqdkp_adjustments ORDER BY adjustment_id'</font>;<a name="a347"></a><br />347       <strong>$result</strong> = <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><strong>$sql</strong><strong>)</strong>;<a name="a348"></a><br />348       while <strong>(</strong> <strong>$row</strong> = <strong>$db</strong><strong>-&gt;</strong>fetch_record<strong>(</strong><strong>$result</strong><strong>)</strong> <strong>)</strong><a name="a349"></a><br />349       <strong>{</strong><a name="a350"></a><br />350           <strong>$query</strong> = <strong>$db</strong><strong>-&gt;</strong>build_query<strong>(</strong><font color="#66cccc">'INSERT'</font><strong>,</strong> array<strong>(</strong><a name="a351"></a><br />351               <font color="#66cccc">'adjustment_id'</font>         =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'adjustment_id'</font><strong>]</strong><strong>,</strong><a name="a352"></a><br />352               <font color="#66cccc">'adjustment_type'</font>       =&gt; <strong>(</strong> <strong>$row</strong><strong>[</strong><font color="#66cccc">'member_name'</font><strong>]</strong> != <font color="#66cccc">''</font> <strong>)</strong> ? <a href="../EQdkp/_eqdkp2_common_php.html#defineADJ_INDIV">ADJ_INDIV</a> : <a href="../EQdkp/_eqdkp2_common_php.html#defineADJ_GLOBAL">ADJ_GLOBAL</a><strong>,</strong><a name="a353"></a><br />353               <font color="#66cccc">'adjustment_value'</font>      =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'adjustment_value'</font><strong>]</strong><strong>,</strong><a name="a354"></a><br />354               <font color="#66cccc">'adjustment_date'</font>       =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'adjustment_date'</font><strong>]</strong><strong>,</strong><a name="a355"></a><br />355               <font color="#66cccc">'adjustment_to'</font>         =&gt; <a href="http://www.php.net/stripslashes">stripslashes</a><strong>(</strong><strong>$row</strong><strong>[</strong><font color="#66cccc">'member_name'</font><strong>]</strong><strong>)</strong><strong>,</strong><a name="a356"></a><br />356               <font color="#66cccc">'adjustment_reason'</font>     =&gt; <a href="http://www.php.net/stripslashes">stripslashes</a><strong>(</strong><strong>$row</strong><strong>[</strong><font color="#66cccc">'adjustment_reason'</font><strong>]</strong><strong>)</strong><strong>,</strong><a name="a357"></a><br />357               <font color="#66cccc">'adjustment_group_key'</font>  =&gt; <strong>(</strong> <strong>$row</strong><strong>[</strong><font color="#66cccc">'adjustment_group_key'</font><strong>]</strong> != <font color="#66cccc">''</font> <strong>)</strong> ? <strong>$row</strong><strong>[</strong><font color="#66cccc">'adjustment_group_key'</font><strong>]</strong> : <a href="http://www.php.net/md5">md5</a><strong>(</strong><a href="http://www.php.net/microtime">microtime</a><strong>(</strong><strong>)</strong><strong>)</strong><strong>,</strong><a name="a358"></a><br />358               <font color="#66cccc">'adjustment_added_by'</font>   =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'adjustment_added_by'</font><strong>]</strong><strong>,</strong><a name="a359"></a><br />359               <font color="#66cccc">'adjustment_updated_by'</font> =&gt; <strong>$row</strong><strong>[</strong><font color="#66cccc">'adjustment_updated_by'</font><strong>]</strong><strong>)</strong><a name="a360"></a><br />360           <strong>)</strong>;<a name="a361"></a><br />361   <a name="a362"></a><br />362           <strong>$queries</strong><strong>[</strong><strong>]</strong> = <font color="#66cccc">'INSERT INTO '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineADJUSTMENTS_TABLE">ADJUSTMENTS_TABLE</a> . <strong>$query</strong>;<a name="a363"></a><br />363       <strong>}</strong><a name="a364"></a><br />364       <strong>$db</strong><strong>-&gt;</strong>free_result<strong>(</strong><strong>$result</strong><strong>)</strong>;<a name="a365"></a><br />365   <a name="a366"></a><br />366       <strong>$db</strong><strong>-&gt;</strong>select_db<strong>(</strong><a href="../EQdkp/_eqdkp2_convert_bots_php.html#defineEXPERIMENTAL_DB">EXPERIMENTAL_DB</a><strong>)</strong>;<a name="a367"></a><br />367       <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><font color="#66cccc">'DELETE FROM '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineADJUSTMENTS_TABLE">ADJUSTMENTS_TABLE</a><strong>)</strong>;<a name="a368"></a><br />368       <font color="blue">foreach</font> <strong>(</strong> <strong>$queries</strong> as <strong>$sql</strong> <strong>)</strong><a name="a369"></a><br />369       <strong>{</strong><a name="a370"></a><br />370           <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><strong>$sql</strong><strong>)</strong>;<a name="a371"></a><br />371       <strong>}</strong><a name="a372"></a><br />372   <a name="a373"></a><br />373       echo <font color="#66cccc">' done.&lt;br /&gt;'</font>;<a name="a374"></a><br />374   <strong>}</strong><a name="a375"></a><br />375   <a name="a376"></a><br />376   <font color="green">//convert_events();</font><a name="a377"></a><br />377   <font color="green">//convert_members();</font><a name="a378"></a><br />378   <font color="green">//convert_raids();</font><a name="a379"></a><br />379   <font color="green">//convert_raid_attendees();</font><a name="a380"></a><br />380   <a href="../EQdkp/_eqdkp2_convert_bots_php.html#functionconvert_items">convert_items</a><strong>(</strong><strong>)</strong>;<a name="a381"></a><br />381   <a href="../EQdkp/_eqdkp2_convert_bots_php.html#functionconvert_item_presets">convert_item_presets</a><strong>(</strong><strong>)</strong>;<a name="a382"></a><br />382   <font color="green">//convert_adjustments();</font><a name="a383"></a><br />383   <font color="green">//convert_styles();</font><a name="a384"></a><br />384   <strong>?&gt;</strong></pre>
    </div>

    <div id="sidebar">
      <div class="menu-header">EQdkp</div>
      <ul class="menu">
        <li class="menu"><a href="http://eqdkp.com/?p=news">News</a></li>
        <li class="menu"><a href="http://eqdkp.com/?p=about">About</a></li>
        <li class="menu"><a href="http://eqdkp.com/?p=download">Download</a></li>
        <li class="menu"><a href="http://eqdkp.com/?p=changelog">ChangeLog</a></li>
        <li class="menu"><a href="http://eqdkp.com/?p=donate">Donate</a></li>
      </ul>
      <br />
      <div class="menu-header">Interact</div>
      <ul class="menu">
        <li class="menu"><a href="http://forums.eqdkp.com/">Forums</a></li>
        <li class="menu"><a href="http://demo.eqdkp.com/">Demo</a></li>
        <li class="menu"><a href="http://forums.eqdkp.com/index.php?s=&amp;act=SF&amp;f=13">Guilds</a></li>
        <li class="menu"><a href="http://sourceforge.net/tracker/?atid=524839&amp;group_id=69529&amp;func=browse">Bug Reports</a></li>
        <li class="menu"><a href="http://sourceforge.net/tracker/?atid=524842&amp;group_id=69529&amp;func=browse">Feature Requests</a></li>
      </ul>
      <br />
      
      <div class="menu-header">Developer Documentation</div>
      <ul class="menu">
        <li class="menu"><a href="../classtrees_EQdkp.html">Class Tree: EQdkp</a></li>
        <li class="menu"><a href="../elementindex_EQdkp.html">Index: EQdkp</a></li>
        <li class="menu"><a href="../elementindex.html">All Elements</a></li>
      </ul>
      <br />
      <div class="menu-header">Packages</div>
      <ul class="menu">
                <li class="menu"><a href="../li_EQdkp.html">EQdkp</a></li>
                <li class="menu"><a href="../li_EQdkp_Admin.html">EQdkp_Admin</a></li>
                <li class="menu"><a href="../li_EQdkp_Foundation.html">EQdkp_Foundation</a></li>
                <li class="menu"><a href="../li_EQdkp_User.html">EQdkp_User</a></li>
                <li class="menu"><a href="../li_Functions.html">Functions</a></li>
                <li class="menu"><a href="../li_SQL_DB.html">SQL_DB</a></li>
              </ul>
      <br />
                        <br />
                </div>

    <div id="sidebar-extra">
      <img src="http://eqdkp.com/images/btn_eqdkp.gif" width="88" height="31" alt="EQdkp - Open Source DKP" />
      <br />
      <a href="http://sf.net/projects/eqdkp/"><img src="http://sourceforge.net/sflogo.php?group_id=69529&amp;type=1" width="88" height="31" alt="SourceForge" /></a>
      <br />
      <a href="http://www.invisionpower.com/"><img src="http://eqdkp.com/images/btn_invision.gif" width="88" height="31" alt="Invision Power Board" /></a>
      <br />
      <a href="http://smarty.php.net/"><img src="http://eqdkp.com/images/btn_smarty.gif" width="88" height="31" alt="Smarty Template Engine" /></a>
      <br />
      <a href="http://eqdkp.com/?p=donate"><img src="http://eqdkp.com/images/btn_paypal.gif" width="62" height="31" alt="Support EQdkp" /></a>
    </div>

    <div style="clear:both;"></div>
  </div>

  <div id="footer">
    <div id="footer-left">&copy; 2003-2004 The EQdkp Project</div>
    <div id="footer-right">This documentation was generated by <a href="http://www.phpdoc.org" style="color: rgb(170, 170, 220)">phpDocumentor v1.2.3</a></div>
  </div>
</div>
</body>
</html>