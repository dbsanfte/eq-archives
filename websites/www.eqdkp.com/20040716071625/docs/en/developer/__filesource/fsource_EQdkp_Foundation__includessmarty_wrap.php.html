<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
<title>File Source for smarty_wrap.php</title>
<link rel="stylesheet" type="text/css" href="../media/styles.css">
</head>

<body>
<div id="page">
  <div id="header-wrapper">
    <div id="header-top">
      <img src="http://eqdkp.com/images/logo.gif" width="205" height="36" alt="EQdkp" />
    </div>

    <div id="header-bot">
      <img src="http://eqdkp.com/images/logo_bottom.gif" alt="Open Source DKP" />
    </div>

    <div style="clear:both;"></div>
  </div>

  <div id="content-wrapper">
    <div id="content">
      <div class="content-block">
        
        <div class="content-header" align="right">EQdkp_Foundation</div>
      </div><h1 align="center">Source for file smarty_wrap.php</h1>
<p>Documentation is available at <a href="../EQdkp_Foundation/_eqdkp2_includes_smarty_wrap_php.html">smarty_wrap.php</a></p>
<pre class="code"><a name="a1"></a><br />1     <strong>&lt;?php</strong><a name="a2"></a><br />2     <font color="#009999">/**</font><a name="a3"></a><br />3     <font color="#009999"> * Project:     EQdkp v2 - Open Source Points System</font><a name="a4"></a><br />4     <font color="#009999"> * File:        smarty_wrap.php</font><a name="a5"></a><br />5     <font color="#009999"> *</font><a name="a6"></a><br />6     <font color="#009999"> * This library is free software; you can redistribute it and/or</font><a name="a7"></a><br />7     <font color="#009999"> * modify it under the terms of the GNU Lesser General Public</font><a name="a8"></a><br />8     <font color="#009999"> * License as published by the Free Software Foundation; either</font><a name="a9"></a><br />9     <font color="#009999"> * version 2.1 of the License, or (at your option) any later version.</font><a name="a10"></a><br />10    <font color="#009999"> *</font><a name="a11"></a><br />11    <font color="#009999"> * This library is distributed in the hope that it will be useful,</font><a name="a12"></a><br />12    <font color="#009999"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</font><a name="a13"></a><br />13    <font color="#009999"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</font><a name="a14"></a><br />14    <font color="#009999"> * Lesser General Public License for more details.</font><a name="a15"></a><br />15    <font color="#009999"> *</font><a name="a16"></a><br />16    <font color="#009999"> * You should have received a copy of the GNU Lesser General Public</font><a name="a17"></a><br />17    <font color="#009999"> * License along with this library; if not, write to the Free Software</font><a name="a18"></a><br />18    <font color="#009999"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</font><a name="a19"></a><br />19    <font color="#009999"> *</font><a name="a20"></a><br />20    <font color="#009999"> * The latest version of EQdkp can be obtained from:</font><a name="a21"></a><br />21    <font color="#009999"> * http://www.eqdkp.com/</font><a name="a22"></a><br />22    <font color="#009999"> *</font><a name="a23"></a><br />23    <font color="#009999"> *</font><font color="#009999"> </font><strong><font color = "#0099FF">@author</font></strong><font color="#009999"> Rob Speicher &lt;tsigo@eqdkp.com&gt;</font><a name="a24"></a><br />24    <font color="#009999"> *</font><font color="#009999"> </font><strong><font color = "#0099FF">@author</font></strong><font color="#009999"> Adam Wasserman &lt;draelon@eqdkp.com&gt;</font><a name="a25"></a><br />25    <font color="#009999"> *</font><font color="#009999"> </font><strong><font color = "#0099FF">@copyright</font></strong><font color="#009999"> 2003-2004 The EQdkp Project Team</font><a name="a26"></a><br />26    <font color="#009999"> *</font><font color="#009999"> </font><strong><font color = "#0099FF">@package</font></strong><font color="#009999"> EQdkp</font><a name="a27"></a><br />27    <font color="#009999"> *</font><font color="#009999"> </font><strong><font color = "#0099FF">@link</font></strong><font color="#009999"> http://www.eqdkp.com/</font><a name="a28"></a><br />28    <font color="#009999"> *</font><font color="#009999"> </font><strong><font color = "#0099FF">@version</font></strong><font color="#009999"> $Id: smarty_wrap.php,v 1.3 2003/12/22 06:19:03 tsigo Exp $</font><a name="a29"></a><br />29    <font color="#009999"> */</font><a name="a30"></a><br />30    <a name="a31"></a><br />31    <font color="green">//--------------------------------</font><a name="a32"></a><br />32    <font color="green">// Prevent direct access</font><a name="a33"></a><br />33    <font color="green">//--------------------------------</font><a name="a34"></a><br />34    <a name="a35"></a><br />35    <font color="blue">if</font> <strong>(</strong> <strong>!</strong><a href="http://www.php.net/defined">defined</a><strong>(</strong><font color="#66cccc">'EQDKP_INC'</font><strong>)</strong> <strong>)</strong><a name="a36"></a><br />36    <strong>{</strong><a name="a37"></a><br />37        <a href="http://www.php.net/header">header</a><strong>(</strong><font color="#66cccc">'Status: 404 Not Found'</font><strong>)</strong>;<a name="a38"></a><br />38    <strong>}</strong><a name="a39"></a><br />39    <a name="a40"></a><br />40    <font color="#009999">/**</font><font color="#009999"> </font><strong><font color = "#0099FF">@ignore</font></strong><font color="#009999"> */</font><a name="a41"></a><br />41    <font color="blue">require_once</font><strong>(</strong>SMARTY_DIR . <font color="#66cccc">'Smarty.class.php'</font><strong>)</strong>;<a name="a42"></a><br />42    <a name="a43"></a><br />43    <font color="#009999">/**</font><a name="a44"></a><br />44    <font color="#009999"> * Wrapper for Smarty class</font><a name="a45"></a><br />45    <font color="#009999"> *</font><a name="a46"></a><br />46    <font color="#009999"> * Perform common output-related tasks and provide a better interface to the</font><a name="a47"></a><br />47    <font color="#009999"> * Smarty base class.  Also allows for assigning blocks iteratively, rather than</font><a name="a48"></a><br />48    <font color="#009999"> * only all at once.</font><a name="a49"></a><br />49    <font color="#009999"> *</font><a name="a50"></a><br />50    <font color="#009999"> *</font><font color="#009999"> </font><strong><font color = "#0099FF">@author</font></strong><font color="#009999"> Rob Speicher &lt;tsigo@eqdkp.com&gt;</font><a name="a51"></a><br />51    <font color="#009999"> *</font><font color="#009999"> </font><strong><font color = "#0099FF">@package</font></strong><font color="#009999"> EQdkp_Foundation</font><a name="a52"></a><br />52    <font color="#009999"> *</font><font color="#009999"> </font><strong><font color = "#0099FF">@version</font></strong><font color="#009999"> $Id: smarty_wrap.php,v 1.3 2003/12/22 06:19:03 tsigo Exp $</font><a name="a53"></a><br />53    <font color="#009999"> */</font><a name="a54"></a><br />54    <font color="blue">class</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html">Smarty_Wrap</a> <font color="blue">extends</font> Smarty<a name="a55"></a><br />55    <strong>{</strong><a name="a56"></a><br />56        <font color="#009999">/**</font><a name="a57"></a><br />57    <font color="#009999">     * Relative path to EQdkp's root directory</font><a name="a58"></a><br />58    <font color="#009999">     * Needed because $tpl is instantiated before $eqdkp</font><a name="a59"></a><br />59    <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999"> private</font><a name="a60"></a><br />60    <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>string </em><a name="a61"></a><br />61    <font color="#009999">     */</font><a name="a62"></a><br />62        <font color="blue">var</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#var$eqdkp_root_path">$eqdkp_root_path</a> = <font color="#66cccc">'./'</font>;<a name="a63"></a><br />63    <a name="a64"></a><br />64        <font color="#009999">/**</font><a name="a65"></a><br />65    <font color="#009999">     * Use a simple header? Hides things like the logo and menus</font><a name="a66"></a><br />66    <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999"> private</font><a name="a67"></a><br />67    <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>bool </em><a name="a68"></a><br />68    <font color="#009999">     */</font><a name="a69"></a><br />69        <font color="blue">var</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#var$simple_header">$simple_header</a> = false;<a name="a70"></a><br />70    <a name="a71"></a><br />71        <font color="blue">/**#@+</font color="blue"><a name="a72"></a><br />72    <font color="blue">     * Page title</font color="blue"><a name="a73"></a><br />73    <font color="blue">     *</font color="blue"><font color="blue"> </font color="blue"><strong><font color = "#0099FF">@access</font></strong><font color="blue"> private</font color="blue"><a name="a74"></a><br />74    <font color="blue">     *</font color="blue"><font color="blue"> </font color="blue"><strong><font color = "#0099FF">@var </font></strong><font color="blue"></font color="blue"><em>string </em><a name="a75"></a><br />75    <font color="blue">     */</font color="blue"><a name="a76"></a><br />76        <font color="blue">var</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#var$page_title">$page_title</a> = <font color="#66cccc">''</font>;<a name="a77"></a><br />77    <a name="a78"></a><br />78        <font color="#009999">/**</font><a name="a79"></a><br />79    <font color="#009999">     * Path to template root</font><a name="a80"></a><br />80    <font color="#009999">     */</font><a name="a81"></a><br />81        <font color="blue">var</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#var$template_path">$template_path</a> = <font color="#66cccc">''</font>;<a name="a82"></a><br />82    <a name="a83"></a><br />83        <font color="#009999">/**</font><a name="a84"></a><br />84    <font color="#009999">     * Template file to display</font><a name="a85"></a><br />85    <font color="#009999">     */</font><a name="a86"></a><br />86        <font color="blue">var</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#var$template_file">$template_file</a> = <font color="#66cccc">''</font>;<a name="a87"></a><br />87    <a name="a88"></a><br />88        <font color="#009999">/**</font><a name="a89"></a><br />89    <font color="#009999">     * Extra CSS to append to page_header.html</font><a name="a90"></a><br />90    <font color="#009999">     */</font><a name="a91"></a><br />91        <font color="blue">var</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#var$extra_css">$extra_css</a> = <font color="#66cccc">''</font>;<a name="a92"></a><br />92    <a name="a93"></a><br />93        <font color="#009999">/**</font><a name="a94"></a><br />94    <font color="#009999">     * Meta tags to include</font><a name="a95"></a><br />95    <font color="#009999">     */</font><a name="a96"></a><br />96        <font color="blue">var</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#var$meta_tags">$meta_tags</a> = <font color="#66cccc">''</font>;<a name="a97"></a><br />97    <a name="a98"></a><br />98        <font color="#009999">/**</font><a name="a99"></a><br />99    <font color="#009999">     * Actions to perform on &lt;body onload=&quot;&quot;&gt;</font><a name="a100"></a><br />100   <font color="#009999">     */</font><a name="a101"></a><br />101       <font color="blue">var</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#var$onload">$onload</a> = <font color="#66cccc">''</font>;<a name="a102"></a><br />102       <strong><font color="blue">/**#@-*/</font></strong><a name="a103"></a><br />103   <a name="a104"></a><br />104       <font color="#009999">/**</font><a name="a105"></a><br />105   <font color="#009999">     * Valid output types</font><a name="a106"></a><br />106   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999"> private</font><a name="a107"></a><br />107   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>array </em><a name="a108"></a><br />108   <font color="#009999">     */</font><a name="a109"></a><br />109       <font color="blue">var</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#var$output_types">$output_types</a> = array<strong>(</strong><font color="#66cccc">'html'</font><strong>)</strong>;<a name="a110"></a><br />110   <a name="a111"></a><br />111       <font color="#009999">/**</font><a name="a112"></a><br />112   <font color="#009999">     * ONE of the </font><em><font color="#0099FF">{@link $output_types}</font></em><font color="#009999"> to use</font><a name="a113"></a><br />113   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999"> private</font><a name="a114"></a><br />114   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>string </em><a name="a115"></a><br />115   <font color="#009999">     */</font><a name="a116"></a><br />116       <font color="blue">var</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#var$output_type">$output_type</a> = <font color="#66cccc">'html'</font>;<a name="a117"></a><br />117   <a name="a118"></a><br />118       <font color="#009999">/**</font><a name="a119"></a><br />119   <font color="#009999">     * Status of mod_gzip compression (On or Off)</font><a name="a120"></a><br />120   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999"> private</font><a name="a121"></a><br />121   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>string </em><a name="a122"></a><br />122   <font color="#009999">     */</font><a name="a123"></a><br />123       <font color="blue">var</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#var$gzip_status">$gzip_status</a> = <font color="#66cccc">'Off'</font>;<a name="a124"></a><br />124   <a name="a125"></a><br />125       <font color="blue">/**#@+</font color="blue"><a name="a126"></a><br />126   <font color="blue">     *</font color="blue"><font color="blue"> </font color="blue"><strong><font color = "#0099FF">@access</font></strong><font color="blue"> private</font color="blue"><a name="a127"></a><br />127   <font color="blue">     *</font color="blue"><font color="blue"> </font color="blue"><strong><font color = "#0099FF">@var </font></strong><font color="blue"></font color="blue"><em>bool </em><a name="a128"></a><br />128   <font color="blue">     */</font color="blue"><a name="a129"></a><br />129       <font color="blue">var</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#var$header_processed">$header_processed</a> = false;<a name="a130"></a><br />130       <font color="blue">var</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#var$footer_processed">$footer_processed</a> = false;<a name="a131"></a><br />131       <strong><font color="blue">/**#@-*/</font></strong><a name="a132"></a><br />132   <a name="a133"></a><br />133       <font color="#009999">/**</font><a name="a134"></a><br />134   <font color="#009999">     * Template block data</font><a name="a135"></a><br />135   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999"> private</font><a name="a136"></a><br />136   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>array </em><a name="a137"></a><br />137   <font color="#009999">     */</font><a name="a138"></a><br />138       <font color="blue">var</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#var$blocks">$blocks</a> = array<strong>(</strong><strong>)</strong>;<a name="a139"></a><br />139   <a name="a140"></a><br />140       <font color="#009999">/**</font><a name="a141"></a><br />141   <font color="#009999">     * Template block delimiter</font><a name="a142"></a><br />142   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999"> private</font><a name="a143"></a><br />143   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>char </em><a name="a144"></a><br />144   <font color="#009999">     */</font><a name="a145"></a><br />145       <font color="blue">var</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#var$block_delimiter">$block_delimiter</a> = <font color="#66cccc">'.'</font>;<a name="a146"></a><br />146   <a name="a147"></a><br />147       <font color="#009999">/**</font><a name="a148"></a><br />148   <font color="#009999">     * Set default Smarty values, set a template and load filters</font><a name="a149"></a><br />149   <font color="#009999">     *</font><a name="a150"></a><br />150   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@see</font></strong><font color="#009999"> set_template()</font><a name="a151"></a><br />151   <font color="#009999">     */</font><a name="a152"></a><br />152       <font color="blue">function</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#methodsmarty_wrap">smarty_wrap</a><strong>(</strong><strong>)</strong><a name="a153"></a><br />153       <strong>{</strong><a name="a154"></a><br />154           <font color="blue">global</font> <strong>$eqdkp_root_path</strong><a name="a155"></a><br />155           <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$eqdkp_root_path">eqdkp_root_path</a> = <strong>$eqdkp_root_path</strong>;<a name="a156"></a><br />156   <a name="a157"></a><br />157           <strong>$this</strong><strong>-&gt;</strong><strong>left_delimiter</strong>  = <font color="#66cccc">'['</font>;<a name="a158"></a><br />158           <strong>$this</strong><strong>-&gt;</strong><strong>right_delimiter</strong> = <font color="#66cccc">']'</font>;<a name="a159"></a><br />159           <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$block_delimiter">block_delimiter</a> = <font color="#66cccc">'.'</font>;<a name="a160"></a><br />160   <a name="a161"></a><br />161           <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#methodset_template">set_template</a><strong>(</strong><font color="#66cccc">'default'</font><strong>)</strong>;<a name="a162"></a><br />162   <a name="a163"></a><br />163           <strong>$this</strong><strong>-&gt;</strong><strong>caching</strong>        = false;<a name="a164"></a><br />164           <strong>$this</strong><strong>-&gt;</strong><strong>use_sub_dirs</strong>   = false;<a name="a165"></a><br />165   <a name="a166"></a><br />166           <strong>$this</strong><strong>-&gt;</strong>load_filter<strong>(</strong><font color="#66cccc">'output'</font><strong>,</strong> <font color="#66cccc">'trimwhitespace'</font><strong>)</strong>;<a name="a167"></a><br />167       <strong>}</strong><a name="a168"></a><br />168   <a name="a169"></a><br />169       <font color="#009999">/**</font><a name="a170"></a><br />170   <font color="#009999">     * Set the page output extension</font><a name="a171"></a><br />171   <font color="#009999">     *</font><a name="a172"></a><br />172   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999"> public</font><a name="a173"></a><br />173   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@see</font></strong><font color="#009999"> $output_type</font><a name="a174"></a><br />174   <font color="#009999">     */</font><a name="a175"></a><br />175       <font color="blue">function</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#methodset_out_type">set_out_type</a><strong>(</strong><strong>)</strong><a name="a176"></a><br />176       <strong>{</strong><a name="a177"></a><br />177           <font color="blue">global</font> <strong>$eqdkp</strong><a name="a178"></a><br />178   <a name="a179"></a><br />179           <font color="green">// Input Output?!</font><a name="a180"></a><br />180           <font color="blue">if</font> <strong>(</strong> isset<strong>(</strong><strong>$eqdkp</strong><strong>-&gt;</strong>input<strong>[</strong><font color="#66cccc">'output'</font><strong>]</strong><strong>)</strong> <strong>)</strong><a name="a181"></a><br />181           <strong>{</strong><a name="a182"></a><br />182               <font color="blue">switch</font> <strong>(</strong> <strong>$eqdkp</strong><strong>-&gt;</strong>input<strong>[</strong><font color="#66cccc">'output'</font><strong>]</strong> <strong>)</strong><a name="a183"></a><br />183               <strong>{</strong><a name="a184"></a><br />184                   case <font color="#66cccc">'csv'</font>:<a name="a185"></a><br />185                       <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$output_type">output_type</a> = <font color="#66cccc">'csv'</font>;<a name="a186"></a><br />186                       break;<a name="a187"></a><br />187   <a name="a188"></a><br />188                   case <font color="#66cccc">'xml'</font>:<a name="a189"></a><br />189                       <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$output_type">output_type</a> = <font color="#66cccc">'xml'</font>;<a name="a190"></a><br />190                       break;<a name="a191"></a><br />191   <a name="a192"></a><br />192                   case <font color="#66cccc">'html'</font>:<a name="a193"></a><br />193                       <font color="green">// Fall through</font><a name="a194"></a><br />194                   default:<a name="a195"></a><br />195                       <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$output_type">output_type</a> = <font color="#66cccc">'html'</font>;<a name="a196"></a><br />196                       break;<a name="a197"></a><br />197               <strong>}</strong><a name="a198"></a><br />198           <strong>}</strong><a name="a199"></a><br />199           else<a name="a200"></a><br />200           <strong>{</strong><a name="a201"></a><br />201               <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$output_type">output_type</a> = <font color="#66cccc">'html'</font>;<a name="a202"></a><br />202           <strong>}</strong><a name="a203"></a><br />203       <strong>}</strong><a name="a204"></a><br />204   <a name="a205"></a><br />205       <font color="#009999">/**</font><a name="a206"></a><br />206   <font color="#009999">     * Set the template directory to use</font><a name="a207"></a><br />207   <font color="#009999">     *</font><a name="a208"></a><br />208   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999"> public</font><a name="a209"></a><br />209   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999">   </font><font color="#009999">Template root directory</font><a name="a210"></a><br />210   <font color="#009999">     */</font><a name="a211"></a><br />211       <font color="blue">function</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#methodset_template">set_template</a><strong>(</strong><strong>$template_dir</strong><strong>)</strong><a name="a212"></a><br />212       <strong>{</strong><a name="a213"></a><br />213           <strong>$this</strong><strong>-&gt;</strong><strong>template_dir</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$eqdkp_root_path">eqdkp_root_path</a> . <font color="#66cccc">'templates/'</font> . <strong>$template_dir</strong>;<a name="a214"></a><br />214           <strong>$this</strong><strong>-&gt;</strong><strong>config_dir</strong>   = <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$eqdkp_root_path">eqdkp_root_path</a> . <font color="#66cccc">'templates/'</font> . <strong>$template_dir</strong>;<a name="a215"></a><br />215   <a name="a216"></a><br />216           <strong>$this</strong><strong>-&gt;</strong><strong>compile_dir</strong>  = <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$eqdkp_root_path">eqdkp_root_path</a> . <font color="#66cccc">'templates/cache/'</font> . <strong>$template_dir</strong>;<a name="a217"></a><br />217           <strong>$this</strong><strong>-&gt;</strong><strong>cache_dir</strong>    = <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$eqdkp_root_path">eqdkp_root_path</a> . <font color="#66cccc">'templates/cache/'</font> . <strong>$template_dir</strong>;<a name="a218"></a><br />218   <a name="a219"></a><br />219           <font color="green">//--------------------------------</font><a name="a220"></a><br />220           <font color="green">// Check to make sure the cache directory exists and is writeable</font><a name="a221"></a><br />221           <font color="green">//--------------------------------</font><a name="a222"></a><br />222   <a name="a223"></a><br />223           <font color="blue">if</font> <strong>(</strong> <strong>!</strong><a href="http://www.php.net/file_exists">file_exists</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><strong>cache_dir</strong><strong>)</strong> <strong>)</strong><a name="a224"></a><br />224           <strong>{</strong><a name="a225"></a><br />225               <font color="green">// Directory doesn't exist, attempt to create it</font><a name="a226"></a><br />226               <font color="blue">if</font> <strong>(</strong> <strong>!</strong><strong>@</strong><a href="http://www.php.net/mkdir">mkdir</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><strong>cache_dir</strong><strong>,</strong> 0777<strong>)</strong> <strong>)</strong><a name="a227"></a><br />227               <strong>{</strong><a name="a228"></a><br />228                   <a href="http://www.php.net/trigger_error">trigger_error</a><strong>(</strong><font color="#66cccc">'Failed to create '</font> . <strong>$this</strong><strong>-&gt;</strong><strong>cache_dir</strong> . <font color="#66cccc">' - create it and chmod to 0777'</font><strong>)</strong>; <font color="green">// Temp</font><a name="a229"></a><br />229               <strong>}</strong><a name="a230"></a><br />230           <strong>}</strong><a name="a231"></a><br />231           else<a name="a232"></a><br />232           <strong>{</strong><a name="a233"></a><br />233               <font color="blue">if</font> <strong>(</strong> <strong>!</strong><a href="http://www.php.net/is_writeable">is_writeable</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><strong>cache_dir</strong><strong>)</strong> <strong>)</strong><a name="a234"></a><br />234               <strong>{</strong><a name="a235"></a><br />235                   <font color="green">// Directory exists, but can't be written to; attempt to chmod</font><a name="a236"></a><br />236                   <font color="blue">if</font> <strong>(</strong> <strong>!</strong><strong>@</strong><a href="http://www.php.net/chmod">chmod</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><strong>cache_dir</strong><strong>,</strong> 0777<strong>)</strong> <strong>)</strong><a name="a237"></a><br />237                   <strong>{</strong><a name="a238"></a><br />238                       <a href="http://www.php.net/trigger_error">trigger_error</a><strong>(</strong><font color="#66cccc">'Failed to chmod '</font> . <strong>$this</strong><strong>-&gt;</strong><strong>cache_dir</strong> . <font color="#66cccc">' - chmod it to 0777'</font><strong>)</strong>; <font color="green">// Temp</font><a name="a239"></a><br />239                   <strong>}</strong><a name="a240"></a><br />240               <strong>}</strong><a name="a241"></a><br />241           <strong>}</strong><a name="a242"></a><br />242           <a href="http://www.php.net/clearstatcache">clearstatcache</a><strong>(</strong><strong>)</strong>;<a name="a243"></a><br />243       <strong>}</strong><a name="a244"></a><br />244   <a name="a245"></a><br />245   <a name="a246"></a><br />246       <font color="#009999">/**</font><a name="a247"></a><br />247   <font color="#009999">     * Assign values for class vars.</font><a name="a248"></a><br />248   <font color="#009999">     *</font><a name="a249"></a><br />249   <font color="#009999">     * Two special cases:</font><a name="a250"></a><br />250   <font color="#009999">     * 1. If var is &quot;template_file&quot;, '.html' will be replaced with our current </font><em><font color="#0099FF">{@link $output_type}</font></em><font color="#009999"> in val.</font><a name="a251"></a><br />251   <font color="#009999">     * 2. If var is &quot;display&quot; and val is true, </font><em><font color="#0099FF">{@link page_header()}</font></em><font color="#009999"> is called automatically.</font><a name="a252"></a><br />252   <font color="#009999">     *</font><a name="a253"></a><br />253   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999"> public</font><a name="a254"></a><br />254   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string</em><font color="#009999">|</font><em>array</em><font color="#009999"> </font><font color="#009999">Variable to set, or array of var =&gt; val pairs.</font><a name="a255"></a><br />255   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999">       </font><font color="#009999">Value to set var to</font><a name="a256"></a><br />256   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>append </em><font color="#009999">       </font><font color="#009999">If true, append val to var, otherwise set var to val</font><a name="a257"></a><br />257   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@return </font></strong><font color="#009999"></font><em>bool </em><a name="a258"></a><br />258   <font color="#009999">     */</font><a name="a259"></a><br />259       <font color="blue">function</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#methodset_vars">set_vars</a><strong>(</strong><strong>$var</strong><strong>,</strong> <strong>$val</strong> = <font color="#66cccc">''</font><strong>,</strong> <strong>$append</strong> = false<strong>)</strong><a name="a260"></a><br />260       <strong>{</strong><a name="a261"></a><br />261           <font color="blue">if</font> <strong>(</strong> <a href="http://www.php.net/is_array">is_array</a><strong>(</strong><strong>$var</strong><strong>)</strong> <strong>)</strong><a name="a262"></a><br />262           <strong>{</strong><a name="a263"></a><br />263               <font color="green">// Recurse through the $var array</font><a name="a264"></a><br />264               <font color="blue">foreach</font> <strong>(</strong> <strong>$var</strong> as <strong>$d_var</strong> =&gt; <strong>$d_val</strong> <strong>)</strong><a name="a265"></a><br />265               <strong>{</strong><a name="a266"></a><br />266                   <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#methodset_vars">set_vars</a><strong>(</strong><strong>$d_var</strong><strong>,</strong> <strong>$d_val</strong><strong>,</strong> false<strong>)</strong>;<a name="a267"></a><br />267               <strong>}</strong><a name="a268"></a><br />268           <strong>}</strong><a name="a269"></a><br />269           else<a name="a270"></a><br />270           <strong>{</strong><a name="a271"></a><br />271               <font color="green">// If the special-case variable 'display' is set to true,</font><a name="a272"></a><br />272               <font color="green">// we automatically call page_header() and page_footer()</font><a name="a273"></a><br />273               <font color="blue">if</font> <strong>(</strong> <strong>(</strong><strong>$var</strong> == <font color="#66cccc">'display'</font><strong>)</strong> &amp;&amp; <strong>(</strong><strong>$val</strong> === true<strong>)</strong> <strong>)</strong><a name="a274"></a><br />274               <strong>{</strong><a name="a275"></a><br />275                   <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#methodpage_header">page_header</a><strong>(</strong><strong>)</strong>;<a name="a276"></a><br />276                   <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#methodpage_footer">page_footer</a><strong>(</strong><strong>)</strong>;<a name="a277"></a><br />277               <strong>}</strong><a name="a278"></a><br />278               <font color="green">// If the var is 'template_file', change its file extension</font><a name="a279"></a><br />279               <font color="green">// to the current type and pass it on</font><a name="a280"></a><br />280               elseif <strong>(</strong> <strong>$var</strong> == <font color="#66cccc">'template_file'</font> <strong>)</strong><a name="a281"></a><br />281               <strong>{</strong><a name="a282"></a><br />282                   <strong>$val</strong> = <a href="http://www.php.net/preg_replace">preg_replace</a><strong>(</strong><font color="#66cccc">'#\.html$#'</font><strong>,</strong> <font color="#66cccc">'.'</font> . <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$output_type">output_type</a><strong>,</strong> <strong>$val</strong><strong>)</strong>;<a name="a283"></a><br />283                   <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$template_file">template_file</a> = <strong>$val</strong>;<a name="a284"></a><br />284               <strong>}</strong><a name="a285"></a><br />285               else<a name="a286"></a><br />286               <strong>{</strong><a name="a287"></a><br />287                   <font color="green">// Are we resetting the var or appending to it?</font><a name="a288"></a><br />288                   <font color="blue">if</font> <strong>(</strong> <strong>$append</strong> === true <strong>)</strong><a name="a289"></a><br />289                   <strong>{</strong><a name="a290"></a><br />290                       <font color="green">// Var is an array, add a new index</font><a name="a291"></a><br />291                       <font color="blue">if</font> <strong>(</strong> <a href="http://www.php.net/is_array">is_array</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><strong>$var</strong><strong>)</strong> <strong>)</strong><a name="a292"></a><br />292                       <strong>{</strong><a name="a293"></a><br />293                           <strong>$this</strong><strong>-&gt;</strong><strong>{</strong><strong>$var</strong><strong>}</strong><strong>[</strong><strong>]</strong> = <strong>$val</strong>;<a name="a294"></a><br />294                       <strong>}</strong><a name="a295"></a><br />295                       <font color="green">// Var is a string, concatenate onto the end</font><a name="a296"></a><br />296                       elseif <strong>(</strong> <a href="http://www.php.net/is_string">is_string</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><strong>$var</strong><strong>)</strong> <strong>)</strong><a name="a297"></a><br />297                       <strong>{</strong><a name="a298"></a><br />298                           <strong>$this</strong><strong>-&gt;</strong><strong>$var</strong> .= <strong>$val</strong>;<a name="a299"></a><br />299                       <strong>}</strong><a name="a300"></a><br />300                       else<a name="a301"></a><br />301                       <strong>{</strong><a name="a302"></a><br />302                           <strong>$this</strong><strong>-&gt;</strong><strong>$var</strong> = <strong>$val</strong>;<a name="a303"></a><br />303                       <strong>}</strong><a name="a304"></a><br />304                   <strong>}</strong><a name="a305"></a><br />305                   else<a name="a306"></a><br />306                   <strong>{</strong><a name="a307"></a><br />307                       <strong>$this</strong><strong>-&gt;</strong><strong>$var</strong> = <strong>$val</strong>;<a name="a308"></a><br />308                   <strong>}</strong><a name="a309"></a><br />309               <strong>}</strong><a name="a310"></a><br />310           <strong>}</strong><a name="a311"></a><br />311   <a name="a312"></a><br />312           <font color="blue">return</font> true;<a name="a313"></a><br />313       <strong>}</strong><a name="a314"></a><br />314   <a name="a315"></a><br />315       <font color="#009999">/**</font><a name="a316"></a><br />316   <font color="#009999">     * Assign </font><em><font color="#0099FF">{@link $blocks}</font></em><font color="#009999">[$block] in the template</font><a name="a317"></a><br />317   <font color="#009999">     *</font><a name="a318"></a><br />318   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999"> public</font><a name="a319"></a><br />319   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string</em><font color="#009999">|</font><em>array</em><font color="#009999"> </font><font color="#009999">Block to assign, recurse if array</font><a name="a320"></a><br />320   <font color="#009999">     */</font><a name="a321"></a><br />321       <font color="blue">function</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#methodassign_block">assign_block</a><strong>(</strong><strong>$block</strong><strong>)</strong><a name="a322"></a><br />322       <strong>{</strong><a name="a323"></a><br />323           <font color="blue">if</font> <strong>(</strong> <a href="http://www.php.net/is_array">is_array</a><strong>(</strong><strong>$block</strong><strong>)</strong> <strong>)</strong><a name="a324"></a><br />324           <strong>{</strong><a name="a325"></a><br />325               <font color="green">// Recurse through the $block array</font><a name="a326"></a><br />326               <font color="blue">foreach</font> <strong>(</strong> <strong>$block</strong> as <strong>$d_block</strong> <strong>)</strong><a name="a327"></a><br />327               <strong>{</strong><a name="a328"></a><br />328                   <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#methodassign_block">assign_block</a><strong>(</strong><strong>$d_block</strong><strong>)</strong>;<a name="a329"></a><br />329               <strong>}</strong><a name="a330"></a><br />330           <strong>}</strong><a name="a331"></a><br />331           else<a name="a332"></a><br />332           <strong>{</strong><a name="a333"></a><br />333               <font color="blue">if</font> <strong>(</strong> isset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$blocks">blocks</a><strong>[</strong><strong>$block</strong><strong>]</strong><strong>)</strong> <strong>)</strong><a name="a334"></a><br />334               <strong>{</strong><a name="a335"></a><br />335                   <font color="green">// Block exists, pass the data to Smarty</font><a name="a336"></a><br />336                   <strong>$this</strong><strong>-&gt;</strong>assign<strong>(</strong><strong>$block</strong><strong>,</strong> <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$blocks">blocks</a><strong>[</strong><strong>$block</strong><strong>]</strong><strong>)</strong>;<a name="a337"></a><br />337                   unset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$blocks">blocks</a><strong>[</strong><strong>$block</strong><strong>]</strong><strong>)</strong>;<a name="a338"></a><br />338               <strong>}</strong><a name="a339"></a><br />339               else<a name="a340"></a><br />340               <strong>{</strong><a name="a341"></a><br />341                   <font color="green">// Invalid block, pass an empty array to Smarty to avoid errors</font><a name="a342"></a><br />342                   <strong>$this</strong><strong>-&gt;</strong>assign<strong>(</strong><strong>$block</strong><strong>,</strong> array<strong>(</strong><strong>)</strong><strong>)</strong>;<a name="a343"></a><br />343               <strong>}</strong><a name="a344"></a><br />344           <strong>}</strong><a name="a345"></a><br />345       <strong>}</strong><a name="a346"></a><br />346   <a name="a347"></a><br />347       <font color="#009999">/**</font><a name="a348"></a><br />348   <font color="#009999">     * Append more data to a block data array</font><a name="a349"></a><br />349   <font color="#009999">     *</font><a name="a350"></a><br />350   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999"> public</font><a name="a351"></a><br />351   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999">   </font><font color="#009999">Block name to assign</font><a name="a352"></a><br />352   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>mixed </em><font color="#009999">    </font><font color="#009999">Data to assign to block</font><a name="a353"></a><br />353   <font color="#009999">     */</font><a name="a354"></a><br />354       <font color="blue">function</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#methodappend_block">append_block</a><strong>(</strong><strong>$block_name</strong><strong>,</strong> <strong>$var</strong><strong>)</strong><a name="a355"></a><br />355       <strong>{</strong><a name="a356"></a><br />356           <font color="green">// Nested block</font><a name="a357"></a><br />357           <font color="blue">if</font> <strong>(</strong> <a href="http://www.php.net/strstr">strstr</a><strong>(</strong><strong>$block_name</strong><strong>,</strong> <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$block_delimiter">block_delimiter</a><strong>)</strong> <strong>)</strong><a name="a358"></a><br />358           <strong>{</strong><a name="a359"></a><br />359               <strong>$blocks</strong> = <a href="http://www.php.net/explode">explode</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$block_delimiter">block_delimiter</a><strong>,</strong> <strong>$block_name</strong><strong>)</strong>;<a name="a360"></a><br />360               <strong>$block_count</strong> = <a href="http://www.php.net/sizeof">sizeof</a><strong>(</strong><strong>$blocks</strong><strong>)</strong> - 1;<a name="a361"></a><br />361   <a name="a362"></a><br />362               <strong>$block_string</strong> = <font color="#66cccc">'$this-&gt;blocks'</font>;<a name="a363"></a><br />363   <a name="a364"></a><br />364               <font color="blue">for</font> <strong>(</strong> <strong>$i</strong> = 0; <strong>$i</strong> &lt; <strong>$block_count</strong>; <strong>$i</strong>++ <strong>)</strong><a name="a365"></a><br />365               <strong>{</strong><a name="a366"></a><br />366                   <strong>$block_string</strong> .= <font color="#66cccc">'[\''</font> . <strong>$blocks</strong><strong>[</strong><strong>$i</strong><strong>]</strong> . <font color="#66cccc">'\']'</font>;<a name="a367"></a><br />367   <a name="a368"></a><br />368                   <font color="green">// Literally: $lastiteration = sizeof($this-&gt;blocks[x][y][z][...]) - 1;</font><a name="a369"></a><br />369                   eval<strong>(</strong><font color="#66cccc">'$lastiteration = sizeof('</font> . <strong>$block_string</strong> . <font color="#66cccc">') - 1;'</font><strong>)</strong>;<a name="a370"></a><br />370   <a name="a371"></a><br />371                   <strong>$block_string</strong> .= <font color="#66cccc">'['</font> . <strong>$lastiteration</strong> . <font color="#66cccc">']'</font>;<a name="a372"></a><br />372                   <strong>$block_string</strong> .= <font color="#66cccc">'[\''</font> . <strong>$blocks</strong><strong>[</strong><strong>$block_count</strong><strong>]</strong> . <font color="#66cccc">'\'][] = $var;'</font>;<a name="a373"></a><br />373   <a name="a374"></a><br />374                   eval<strong>(</strong><strong>$block_string</strong><strong>)</strong>;<a name="a375"></a><br />375               <strong>}</strong><a name="a376"></a><br />376           <strong>}</strong><a name="a377"></a><br />377           <font color="green">// Top-level block</font><a name="a378"></a><br />378           else<a name="a379"></a><br />379           <strong>{</strong><a name="a380"></a><br />380               <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$blocks">blocks</a><strong>[</strong><strong>$block_name</strong><strong>]</strong><strong>[</strong><strong>]</strong> = <strong>$var</strong>;<a name="a381"></a><br />381           <strong>}</strong><a name="a382"></a><br />382       <strong>}</strong><a name="a383"></a><br />383   <a name="a384"></a><br />384       <font color="#009999">/**</font><a name="a385"></a><br />385   <font color="#009999">     * Generate menus from the database</font><a name="a386"></a><br />386   <font color="#009999">     *</font><a name="a387"></a><br />387   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999"> public</font><a name="a388"></a><br />388   <font color="#009999">     */</font><a name="a389"></a><br />389       <font color="blue">function</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#methodgenerate_menus">generate_menus</a><strong>(</strong><strong>)</strong><a name="a390"></a><br />390       <strong>{</strong><a name="a391"></a><br />391           <font color="blue">global</font> <strong>$eqdkp</strong> <strong>$user</strong> <strong>$db</strong><a name="a392"></a><br />392           <font color="blue">global</font> <strong>$SID</strong><a name="a393"></a><br />393   <a name="a394"></a><br />394           <strong>$MENU</strong> = array<strong>(</strong><strong>)</strong>;<a name="a395"></a><br />395   <a name="a396"></a><br />396           <strong>$sql</strong> = <font color="#66cccc">'SELECT m1.menu_text AS menu_header, m2.*</font><a name="a397"></a><br />397   <font color="#66cccc">                FROM ( '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineMENUS_TABLE">MENUS_TABLE</a> . <font color="#66cccc">' m1</font><a name="a398"></a><br />398   <font color="#66cccc">                LEFT JOIN '</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineMENUS_TABLE">MENUS_TABLE</a> . <font color="#66cccc">' m2</font><a name="a399"></a><br />399   <font color="#66cccc">                ON m2.menu_parent = m1.menu_id )</font><a name="a400"></a><br />400   <font color="#66cccc">                WHERE m1.menu_parent = 0</font><a name="a401"></a><br />401   <font color="#66cccc">                AND m2.menu_id IS NOT NULL</font><a name="a402"></a><br />402   <font color="#66cccc">                ORDER BY m1.menu_text, m2.menu_order'</font>;<a name="a403"></a><br />403           <strong>$result</strong> = <strong>$db</strong><strong>-&gt;</strong>query<strong>(</strong><strong>$sql</strong><strong>)</strong>;<a name="a404"></a><br />404           while <strong>(</strong> <strong>$row</strong> = <strong>$db</strong><strong>-&gt;</strong>fetch_record<strong>(</strong><strong>$result</strong><strong>)</strong> <strong>)</strong><a name="a405"></a><br />405           <strong>{</strong><a name="a406"></a><br />406               <font color="green">// Process a dynamic menu box</font><a name="a407"></a><br />407               <font color="blue">if</font> <strong>(</strong> <strong>$row</strong><strong>[</strong><font color="#66cccc">'menu_header'</font><strong>]</strong> == <font color="#66cccc">'DYNAMIC'</font> <strong>)</strong><a name="a408"></a><br />408               <strong>{</strong><a name="a409"></a><br />409                   <strong>$this</strong><strong>-&gt;</strong>dyn_box<strong>(</strong><strong>$MENU</strong><strong>)</strong>;<a name="a410"></a><br />410               <strong>}</strong><a name="a411"></a><br />411               <font color="green">// Process a regular menu box</font><a name="a412"></a><br />412               else<a name="a413"></a><br />413               <strong>{</strong><a name="a414"></a><br />414                   <font color="blue">if</font> <strong>(</strong> <strong>!</strong>isset<strong>(</strong><strong>$MENU</strong><strong>[</strong> <strong>$row</strong><strong>[</strong><font color="#66cccc">'menu_header'</font><strong>]</strong> <strong>]</strong><strong>)</strong> <strong>)</strong><a name="a415"></a><br />415                   <strong>{</strong><a name="a416"></a><br />416                       <strong>$MENU</strong><strong>[</strong> <strong>$row</strong><strong>[</strong><font color="#66cccc">'menu_header'</font><strong>]</strong> <strong>]</strong> = array<strong>(</strong><a name="a417"></a><br />417                           <font color="#66cccc">'TITLE'</font>   =&gt; <strong>$user</strong><strong>-&gt;</strong>lang<strong>[</strong> <strong>$row</strong><strong>[</strong><font color="#66cccc">'menu_header'</font><strong>]</strong> <strong>]</strong><strong>,</strong><a name="a418"></a><br />418                           <font color="#66cccc">'SUBMENU'</font> =&gt; array<strong>(</strong><strong>)</strong><a name="a419"></a><br />419                       <strong>)</strong>;<a name="a420"></a><br />420                   <strong>}</strong><a name="a421"></a><br />421               <strong>}</strong><a name="a422"></a><br />422   <a name="a423"></a><br />423               <font color="green">//if ( $user-&gt;check_auth(constant($row['menu_agroup']), constant($row['menu_aoption']), false) )</font><a name="a424"></a><br />424               <font color="green">//{</font><a name="a425"></a><br />425                   <font color="green">// Stored menu links may have arguments; slide our session id in between them and the file.</font><a name="a426"></a><br />426                   <strong>$menu_link</strong> = <a href="http://www.php.net/str_replace">str_replace</a><strong>(</strong><font color="#66cccc">'.php?'</font><strong>,</strong> <font color="#66cccc">'.php'</font> . <strong>$SID</strong> . <font color="#66cccc">'&amp;amp;'</font><strong>,</strong> <strong>$row</strong><strong>[</strong><font color="#66cccc">'menu_link'</font><strong>]</strong><strong>)</strong>;<a name="a427"></a><br />427   <a name="a428"></a><br />428                   <font color="green">// Replace a constant name in the link with its literal value</font><a name="a429"></a><br />429                   <font color="green">// Must be in the format ABC_SOMETHING *only*!</font><a name="a430"></a><br />430                   <a href="http://www.php.net/preg_match">preg_match</a><strong>(</strong><font color="#66cccc">'#([A-Z]{1,3}\_[A-Z0-9\_]+)#'</font><strong>,</strong> <strong>$menu_link</strong><strong>,</strong> <strong>$matches</strong><strong>)</strong>;<a name="a431"></a><br />431                   <font color="blue">if</font> <strong>(</strong> <a href="http://www.php.net/sizeof">sizeof</a><strong>(</strong><strong>$matches</strong><strong>)</strong> &gt; 0 <strong>)</strong><a name="a432"></a><br />432                   <strong>{</strong><a name="a433"></a><br />433                       <font color="blue">if</font> <strong>(</strong> <a href="http://www.php.net/defined">defined</a><strong>(</strong><strong>$matches</strong><strong>[</strong>1<strong>]</strong><strong>)</strong> <strong>)</strong><a name="a434"></a><br />434                       <strong>{</strong><a name="a435"></a><br />435                           <strong>$menu_link</strong> = <a href="http://www.php.net/str_replace">str_replace</a><strong>(</strong><strong>$matches</strong><strong>[</strong>1<strong>]</strong><strong>,</strong> <a href="http://www.php.net/constant">constant</a><strong>(</strong><strong>$matches</strong><strong>[</strong>1<strong>]</strong><strong>)</strong><strong>,</strong> <strong>$menu_link</strong><strong>)</strong>;<a name="a436"></a><br />436                       <strong>}</strong><a name="a437"></a><br />437                   <strong>}</strong><a name="a438"></a><br />438   <a name="a439"></a><br />439                   <font color="green">// Process a dynamic menu entry</font><a name="a440"></a><br />440                   <font color="blue">if</font> <strong>(</strong> <strong>$row</strong><strong>[</strong><font color="#66cccc">'menu_text'</font><strong>]</strong> == <font color="#66cccc">'DYNAMIC'</font> <strong>)</strong><a name="a441"></a><br />441                   <strong>{</strong><a name="a442"></a><br />442                       <strong>$MENU</strong><strong>[</strong> <strong>$row</strong><strong>[</strong><font color="#66cccc">'menu_header'</font><strong>]</strong> <strong>]</strong><strong>[</strong><font color="#66cccc">'SUBMENU'</font><strong>]</strong> = <a href="http://www.php.net/array_merge">array_merge</a><strong>(</strong><strong>$MENU</strong><strong>[</strong> <strong>$row</strong><strong>[</strong><font color="#66cccc">'menu_header'</font><strong>]</strong> <strong>]</strong><strong>[</strong><font color="#66cccc">'SUBMENU'</font><strong>]</strong><strong>,</strong> <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#methoddyn_entry">dyn_entry</a><strong>(</strong><strong>$menu_link</strong><strong>)</strong><strong>)</strong>;<a name="a443"></a><br />443                   <strong>}</strong><a name="a444"></a><br />444                   <font color="green">// Process a standard menu entry</font><a name="a445"></a><br />445                   else<a name="a446"></a><br />446                   <strong>{</strong><a name="a447"></a><br />447                       <strong>$MENU</strong><strong>[</strong> <strong>$row</strong><strong>[</strong><font color="#66cccc">'menu_header'</font><strong>]</strong> <strong>]</strong><strong>[</strong><font color="#66cccc">'SUBMENU'</font><strong>]</strong><strong>[</strong><strong>]</strong> = array<strong>(</strong><a name="a448"></a><br />448                           <font color="#66cccc">'ITEM'</font>  =&gt; <font color="#66cccc">'&lt;a href=&quot;'</font> . <strong>$eqdkp</strong><strong>-&gt;</strong>root_path . <strong>$menu_link</strong> . <font color="#66cccc">'&quot;&gt;'</font> . <strong>$user</strong><strong>-&gt;</strong>lang<strong>[</strong> <strong>$row</strong><strong>[</strong><font color="#66cccc">'menu_text'</font><strong>]</strong> <strong>]</strong> . <font color="#66cccc">'&lt;/a&gt;'</font><strong>,</strong><a name="a449"></a><br />449                           <font color="#66cccc">'IMAGE'</font> =&gt; <font color="#66cccc">'box1.gif'</font><a name="a450"></a><br />450                       <strong>)</strong>;<a name="a451"></a><br />451                   <strong>}</strong><a name="a452"></a><br />452               <font color="green">//}</font><a name="a453"></a><br />453               <font color="green">//else</font><a name="a454"></a><br />454               <font color="green">//{</font><a name="a455"></a><br />455                   <font color="green">//$MENU[ $row['menu_header'] ]['SUBMENU'][] = $user-&gt;lang[ $row['menu_text'] ];</font><a name="a456"></a><br />456               <font color="green">//}</font><a name="a457"></a><br />457           <strong>}</strong><a name="a458"></a><br />458           <strong>$db</strong><strong>-&gt;</strong>free_result<strong>(</strong><strong>$result</strong><strong>)</strong>;<a name="a459"></a><br />459   <a name="a460"></a><br />460           <font color="blue">foreach</font> <strong>(</strong> <strong>$MENU</strong> as <strong>$index</strong> =&gt; <strong>$menu</strong> <strong>)</strong><a name="a461"></a><br />461           <strong>{</strong><a name="a462"></a><br />462               <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#methodappend_block">append_block</a><strong>(</strong><font color="#66cccc">'MENU'</font><strong>,</strong> array<strong>(</strong><a name="a463"></a><br />463                   <font color="#66cccc">'TITLE'</font> =&gt; <strong>$menu</strong><strong>[</strong><font color="#66cccc">'TITLE'</font><strong>]</strong><strong>)</strong><a name="a464"></a><br />464               <strong>)</strong>;<a name="a465"></a><br />465   <a name="a466"></a><br />466               <font color="blue">foreach</font> <strong>(</strong> <strong>$menu</strong><strong>[</strong><font color="#66cccc">'SUBMENU'</font><strong>]</strong> as <strong>$data</strong> <strong>)</strong><a name="a467"></a><br />467               <strong>{</strong><a name="a468"></a><br />468                   <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#methodappend_block">append_block</a><strong>(</strong><font color="#66cccc">'MENU.SUBMENU'</font><strong>,</strong> array<strong>(</strong><a name="a469"></a><br />469                       <font color="#66cccc">'ITEM'</font>  =&gt; <strong>$data</strong><strong>[</strong><font color="#66cccc">'ITEM'</font><strong>]</strong><strong>,</strong><a name="a470"></a><br />470                       <font color="#66cccc">'IMAGE'</font> =&gt; <strong>$data</strong><strong>[</strong><font color="#66cccc">'IMAGE'</font><strong>]</strong><strong>)</strong><a name="a471"></a><br />471                   <strong>)</strong>;<a name="a472"></a><br />472               <strong>}</strong><a name="a473"></a><br />473           <strong>}</strong><a name="a474"></a><br />474           unset<strong>(</strong><strong>$MENU</strong><strong>)</strong>;<a name="a475"></a><br />475   <a name="a476"></a><br />476           <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#methodassign_block">assign_block</a><strong>(</strong><font color="#66cccc">'MENU'</font><strong>)</strong>;<a name="a477"></a><br />477       <strong>}</strong><a name="a478"></a><br />478   <a name="a479"></a><br />479       <font color="#009999">/**</font><a name="a480"></a><br />480   <font color="#009999">     * Create a dynamic menu box</font><a name="a481"></a><br />481   <font color="#009999">     *</font><a name="a482"></a><br />482   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@ignore</font></strong><a name="a483"></a><br />483   <font color="#009999">     */</font><a name="a484"></a><br />484       <font color="blue">function</font> dyn_box<strong>(</strong><strong>&amp;</strong><strong>$MENU</strong><strong>)</strong><a name="a485"></a><br />485       <strong>{</strong><a name="a486"></a><br />486       <strong>}</strong><a name="a487"></a><br />487   <a name="a488"></a><br />488       <font color="#009999">/**</font><a name="a489"></a><br />489   <font color="#009999">     * Create a dynamic menu entry.</font><a name="a490"></a><br />490   <font color="#009999">     *</font><a name="a491"></a><br />491   <font color="#009999">     * Allows a menu row in the database to call a PHP file to create a dynamic</font><a name="a492"></a><br />492   <font color="#009999">     * menu row on the final page output.  Applications include creating a list</font><a name="a493"></a><br />493   <font color="#009999">     * of the styles on the menu so that the user can easily preview the page</font><a name="a494"></a><br />494   <font color="#009999">     * with a different style.</font><a name="a495"></a><br />495   <font color="#009999">     *</font><a name="a496"></a><br />496   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999"> private</font><a name="a497"></a><br />497   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999">   </font><font color="#009999">File code to include (ex: 'list_styles')</font><a name="a498"></a><br />498   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@return </font></strong><font color="#009999"></font><em>mixed </em><font color="#009999"></font><font color="#009999">The object the function returned</font><a name="a499"></a><br />499   <font color="#009999">     */</font><a name="a500"></a><br />500       <font color="blue">function</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#methoddyn_entry">dyn_entry</a><strong>(</strong><strong>$menu_action</strong><strong>)</strong><a name="a501"></a><br />501       <strong>{</strong><a name="a502"></a><br />502           <font color="blue">global</font> <strong>$eqdkp</strong><a name="a503"></a><br />503   <a name="a504"></a><br />504           <strong>$retval</strong> = array<strong>(</strong><strong>)</strong>;<a name="a505"></a><br />505           <strong>$menu_action</strong> = <a href="http://www.php.net/strtolower">strtolower</a><strong>(</strong><strong>$menu_action</strong><strong>)</strong>;<a name="a506"></a><br />506           <strong>$file</strong> = <strong>$eqdkp</strong><strong>-&gt;</strong>root_path . <font color="#66cccc">'modules/menus/menu_'</font> . <strong>$menu_action</strong> . <font color="#66cccc">'.php'</font>;<a name="a507"></a><br />507   <a name="a508"></a><br />508           <font color="blue">if</font> <strong>(</strong> <a href="http://www.php.net/file_exists">file_exists</a><strong>(</strong><strong>$file</strong><strong>)</strong> <strong>)</strong><a name="a509"></a><br />509           <strong>{</strong><a name="a510"></a><br />510               <font color="blue">include_once</font><strong>(</strong><strong>$file</strong><strong>)</strong>;<a name="a511"></a><br />511   <a name="a512"></a><br />512               <strong>$function</strong> = <font color="#66cccc">'menu_'</font> . <strong>$menu_action</strong>;<a name="a513"></a><br />513               <strong>$retval</strong> = <strong>$function</strong><strong>(</strong><strong>)</strong>;<a name="a514"></a><br />514           <strong>}</strong><a name="a515"></a><br />515   <a name="a516"></a><br />516           <font color="blue">return</font> <strong>$retval</strong>;<a name="a517"></a><br />517       <strong>}</strong><a name="a518"></a><br />518   <a name="a519"></a><br />519       <font color="#009999">/**</font><a name="a520"></a><br />520   <font color="#009999">     * Output the page header values</font><a name="a521"></a><br />521   <font color="#009999">     *</font><a name="a522"></a><br />522   <font color="#009999">     * Includes user styles, page compression, HTTP headers, global variables, etc.</font><a name="a523"></a><br />523   <font color="#009999">     *</font><a name="a524"></a><br />524   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@access</font></strong><font color="#009999"> public</font><a name="a525"></a><br />525   <font color="#009999">     */</font><a name="a526"></a><br />526       <font color="blue">function</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#methodpage_header">page_header</a><strong>(</strong><strong>)</strong><a name="a527"></a><br />527       <strong>{</strong><a name="a528"></a><br />528           <font color="blue">global</font> <strong>$eqdkp</strong> <strong>$user</strong><a name="a529"></a><br />529           <font color="blue">global</font> <strong>$SID</strong><a name="a530"></a><br />530   <a name="a531"></a><br />531           <font color="blue">if</font> <strong>(</strong> <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$header_processed">header_processed</a> <strong>)</strong><a name="a532"></a><br />532           <strong>{</strong><a name="a533"></a><br />533               <font color="blue">return</font>;<a name="a534"></a><br />534           <strong>}</strong><a name="a535"></a><br />535   <a name="a536"></a><br />536           <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$header_processed">header_processed</a> = true;<a name="a537"></a><br />537   <a name="a538"></a><br />538           <font color="green">//--------------------------------</font><a name="a539"></a><br />539           <font color="green">// Use mod_gzip, if available</font><a name="a540"></a><br />540           <font color="green">//--------------------------------</font><a name="a541"></a><br />541   <a name="a542"></a><br />542           <font color="green">/* Database config options not ready</font><a name="a543"></a><br />543   <font color="green">        if ( $eqdkp-&gt;config['enable_gzip'] == '1' )</font><a name="a544"></a><br />544   <font color="green">        {</font><a name="a545"></a><br />545   <font color="green">            if ( (extension_loaded('zlib')) &amp;&amp; (!headers_sent()) )</font><a name="a546"></a><br />546   <font color="green">            {</font><a name="a547"></a><br />547   <font color="green">                @ob_start('ob_gzhandler');</font><a name="a548"></a><br />548   <font color="green">                $this-&gt;gzip_status = 'On';</font><a name="a549"></a><br />549   <font color="green">            }</font><a name="a550"></a><br />550   <font color="green">        }</font><a name="a551"></a><br />551   <font color="green">        */</font><a name="a552"></a><br />552   <a name="a553"></a><br />553           <font color="green">//--------------------------------</font><a name="a554"></a><br />554           <font color="green">// Send HTTP headers</font><a name="a555"></a><br />555           <font color="green">//--------------------------------</font><a name="a556"></a><br />556   <a name="a557"></a><br />557           <strong>$now</strong> = <a href="http://www.php.net/gmdate">gmdate</a><strong>(</strong><font color="#66cccc">'D, d M Y H:i:s'</font><strong>,</strong> <a href="http://www.php.net/time">time</a><strong>(</strong><strong>)</strong><strong>)</strong> . <font color="#66cccc">' GMT'</font>;<a name="a558"></a><br />558           <strong>$content_type</strong> = <font color="#66cccc">'text/'</font> . <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$output_type">output_type</a> . <font color="#66cccc">'; charset='</font> . <strong>$user</strong><strong>-&gt;</strong>lang<strong>[</strong><font color="#66cccc">'ENCODING'</font><strong>]</strong>;<a name="a559"></a><br />559   <a name="a560"></a><br />560           <font color="blue">if</font> <strong>(</strong> <strong>(</strong><a href="http://www.php.net/defined">defined</a><strong>(</strong><font color="#66cccc">'NO_CACHE'</font><strong>)</strong><strong>)</strong> &amp;&amp; <strong>(</strong>NO_CACHE<strong>)</strong> <strong>)</strong><a name="a561"></a><br />561           <strong>{</strong><a name="a562"></a><br />562               <strong>@</strong><a href="http://www.php.net/header">header</a><strong>(</strong><font color="#66cccc">'Expires: Mon, 26 Jul 1997 05:00:00 GMT'</font><strong>)</strong>;<a name="a563"></a><br />563               <strong>@</strong><a href="http://www.php.net/header">header</a><strong>(</strong><font color="#66cccc">'Last-Modified: '</font> . <strong>$now</strong><strong>)</strong>;<a name="a564"></a><br />564               <strong>@</strong><a href="http://www.php.net/header">header</a><strong>(</strong><font color="#66cccc">'Cache-Control: no-store, no-cache, must-revalidate'</font><strong>)</strong>;<a name="a565"></a><br />565               <strong>@</strong><a href="http://www.php.net/header">header</a><strong>(</strong><font color="#66cccc">'Cache-Control: post-check=0, pre-check=0'</font><strong>,</strong> false<strong>)</strong>;<a name="a566"></a><br />566               <strong>@</strong><a href="http://www.php.net/header">header</a><strong>(</strong><font color="#66cccc">'Pragma: no-cache'</font><strong>)</strong>;<a name="a567"></a><br />567               <strong>@</strong><a href="http://www.php.net/header">header</a><strong>(</strong><font color="#66cccc">'Content-Type: '</font> . <strong>$content_type</strong><strong>)</strong>;<a name="a568"></a><br />568           <strong>}</strong><a name="a569"></a><br />569           else<a name="a570"></a><br />570           <strong>{</strong><a name="a571"></a><br />571               <strong>@</strong><a href="http://www.php.net/header">header</a><strong>(</strong><font color="#66cccc">'Last-Modified: '</font> . <strong>$now</strong><strong>)</strong>;<a name="a572"></a><br />572               <strong>@</strong><a href="http://www.php.net/header">header</a><strong>(</strong><font color="#66cccc">'Content-Type: '</font> . <strong>$content_type</strong><strong>)</strong>;<a name="a573"></a><br />573           <strong>}</strong><a name="a574"></a><br />574   <a name="a575"></a><br />575           <font color="green">//--------------------------------</font><a name="a576"></a><br />576           <font color="green">// Assign global template variables</font><a name="a577"></a><br />577           <font color="green">//--------------------------------</font><a name="a578"></a><br />578   <a name="a579"></a><br />579           <strong>$SID</strong>      = <strong>(</strong> isset<strong>(</strong><strong>$SID</strong><strong>)</strong> <strong>)</strong> ? <strong>$SID</strong> : <font color="#66cccc">'?'</font> . <a href="../EQdkp/_eqdkp2_common_php.html#defineURI_SESSION">URI_SESSION</a> . <font color="#66cccc">'='</font>;<a name="a580"></a><br />580           <strong>$PHP_SELF</strong> = <strong>$_SERVER</strong><strong>[</strong><font color="#66cccc">'PHP_SELF'</font><strong>]</strong> . <strong>$eqdkp</strong><strong>-&gt;</strong>uri_self<strong>(</strong>true<strong>)</strong>;<a name="a581"></a><br />581   <a name="a582"></a><br />582           <strong>$this</strong><strong>-&gt;</strong>assign<strong>(</strong>array<strong>(</strong><a name="a583"></a><br />583               <font color="#66cccc">'ENCODING'</font>        =&gt; <strong>$user</strong><strong>-&gt;</strong>lang<strong>[</strong><font color="#66cccc">'ENCODING'</font><strong>]</strong><strong>,</strong><a name="a584"></a><br />584               <font color="#66cccc">'XML_LANG'</font>        =&gt; <strong>$user</strong><strong>-&gt;</strong>lang<strong>[</strong><font color="#66cccc">'XML_LANG'</font><strong>]</strong><strong>,</strong><a name="a585"></a><br />585               <font color="#66cccc">'PAGE_TITLE'</font>      =&gt; <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$page_title">page_title</a><strong>,</strong><a name="a586"></a><br />586               <font color="#66cccc">'META_TAGS'</font>       =&gt; <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$meta_tags">meta_tags</a><strong>,</strong><a name="a587"></a><br />587               <font color="#66cccc">'EXTRA_CSS'</font>       =&gt; <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$extra_css">extra_css</a><strong>,</strong><a name="a588"></a><br />588               <font color="#66cccc">'ONLOAD'</font>          =&gt; <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$onload">onload</a><strong>,</strong><a name="a589"></a><br />589               <font color="green">/*</font><a name="a590"></a><br />590   <font color="green">            'MAIN_TITLE'      =&gt; $eqdkp-&gt;config['main_title'],</font><a name="a591"></a><br />591   <font color="green">            'SUB_TITLE'       =&gt; $eqdkp-&gt;config['sub_title'],</font><a name="a592"></a><br />592   <font color="green">            */</font><a name="a593"></a><br />593               <font color="#66cccc">'ROOT_PATH'</font>       =&gt; <strong>$eqdkp</strong><strong>-&gt;</strong>root_path<strong>,</strong><a name="a594"></a><br />594               <font color="#66cccc">'TEMPLATE_PATH'</font>   =&gt; <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$template_path">template_path</a><strong>,</strong><a name="a595"></a><br />595               <font color="#66cccc">'SID'</font>             =&gt; <strong>$SID</strong><strong>,</strong><a name="a596"></a><br />596   <a name="a597"></a><br />597               <font color="#66cccc">'EQDKP_VERSION'</font>   =&gt; <a href="../EQdkp/_eqdkp2_common_php.html#defineEQDKP_VERSION">EQDKP_VERSION</a><strong>,</strong><a name="a598"></a><br />598               <font color="#66cccc">'DEBUG'</font>           =&gt; <a href="../EQdkp/_eqdkp2_common_php.html#defineDEBUG">DEBUG</a><strong>,</strong><a name="a599"></a><br />599               <font color="#66cccc">'SIMPLE_HEADER'</font>   =&gt; <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$simple_header">simple_header</a><strong>,</strong><a name="a600"></a><br />600               <font color="#66cccc">'LOGGED_IN'</font>       =&gt; <strong>(</strong> <strong>$user</strong><strong>-&gt;</strong>data<strong>[</strong><font color="#66cccc">'user_id'</font><strong>]</strong> != <a href="../EQdkp/_eqdkp2_common_php.html#defineANONYMOUS">ANONYMOUS</a> <strong>)</strong> ? true : false<strong>,</strong><a name="a601"></a><br />601               <font color="#66cccc">'PHP_SELF'</font>        =&gt; <strong>$PHP_SELF</strong><strong>,</strong><a name="a602"></a><br />602   <a name="a603"></a><br />603               <font color="green">// URI Constants</font><a name="a604"></a><br />604               <font color="#66cccc">'URI_ADJUSTMENT'</font>  =&gt; <a href="../EQdkp/_eqdkp2_common_php.html#defineURI_ADJUSTMENT">URI_ADJUSTMENT</a><strong>,</strong><a name="a605"></a><br />605               <font color="#66cccc">'URI_EVENT'</font>       =&gt; <a href="../EQdkp/_eqdkp2_common_php.html#defineURI_EVENT">URI_EVENT</a><strong>,</strong><a name="a606"></a><br />606               <font color="#66cccc">'URI_ITEM'</font>        =&gt; <a href="../EQdkp/_eqdkp2_common_php.html#defineURI_ITEM">URI_ITEM</a><strong>,</strong><a name="a607"></a><br />607               <font color="#66cccc">'URI_LOG'</font>         =&gt; <a href="../EQdkp/_eqdkp2_common_php.html#defineURI_LOG">URI_LOG</a><strong>,</strong><a name="a608"></a><br />608               <font color="#66cccc">'URI_NAME'</font>        =&gt; <a href="../EQdkp/_eqdkp2_common_php.html#defineURI_NAME">URI_NAME</a><strong>,</strong><a name="a609"></a><br />609               <font color="#66cccc">'URI_NEWS'</font>        =&gt; <a href="../EQdkp/_eqdkp2_common_php.html#defineURI_NEWS">URI_NEWS</a><strong>,</strong><a name="a610"></a><br />610               <font color="#66cccc">'URI_ORDER'</font>       =&gt; <a href="../EQdkp/_eqdkp2_common_php.html#defineURI_ORDER">URI_ORDER</a><strong>,</strong><a name="a611"></a><br />611               <font color="#66cccc">'URI_PAGE'</font>        =&gt; <a href="../EQdkp/_eqdkp2_common_php.html#defineURI_PAGE">URI_PAGE</a><strong>,</strong><a name="a612"></a><br />612               <font color="#66cccc">'URI_RAID'</font>        =&gt; <a href="../EQdkp/_eqdkp2_common_php.html#defineURI_RAID">URI_RAID</a><strong>,</strong><a name="a613"></a><br />613               <font color="#66cccc">'URI_SESSION'</font>     =&gt; <a href="../EQdkp/_eqdkp2_common_php.html#defineURI_SESSION">URI_SESSION</a><strong>,</strong><a name="a614"></a><br />614   <a name="a615"></a><br />615               <font color="green">// Auth Options</font><a name="a616"></a><br />616               <font color="#66cccc">'AO_ANY'</font>    =&gt; <a href="../EQdkp/_eqdkp2_common_php.html#defineAO_ANY">AO_ANY</a><strong>,</strong><a name="a617"></a><br />617               <font color="#66cccc">'AO_LIST'</font>   =&gt; <a href="../EQdkp/_eqdkp2_common_php.html#defineAO_LIST">AO_LIST</a><strong>,</strong><a name="a618"></a><br />618               <font color="#66cccc">'AO_VIEW'</font>   =&gt; <a href="../EQdkp/_eqdkp2_common_php.html#defineAO_VIEW">AO_VIEW</a><strong>,</strong><a name="a619"></a><br />619               <font color="#66cccc">'AO_ADD'</font>    =&gt; <a href="../EQdkp/_eqdkp2_common_php.html#defineAO_ADD">AO_ADD</a><strong>,</strong><a name="a620"></a><br />620               <font color="#66cccc">'AO_UPDATE'</font> =&gt; <a href="../EQdkp/_eqdkp2_common_php.html#defineAO_UPDATE">AO_UPDATE</a><strong>,</strong><a name="a621"></a><br />621               <font color="#66cccc">'AO_DELETE'</font> =&gt; <a href="../EQdkp/_eqdkp2_common_php.html#defineAO_DELETE">AO_DELETE</a><strong>,</strong><a name="a622"></a><br />622               <font color="#66cccc">'AO_MANAGE'</font> =&gt; <a href="../EQdkp/_eqdkp2_common_php.html#defineAO_MANAGE">AO_MANAGE</a><strong>,</strong><a name="a623"></a><br />623   <a name="a624"></a><br />624               <font color="green">// User limits</font><a name="a625"></a><br />625               <font color="#66cccc">'USER_ALIMIT'</font> =&gt; <strong>$user</strong><strong>-&gt;</strong>data<strong>[</strong><font color="#66cccc">'user_alimit'</font><strong>]</strong><strong>,</strong><a name="a626"></a><br />626               <font color="#66cccc">'USER_ELIMIT'</font> =&gt; <strong>$user</strong><strong>-&gt;</strong>data<strong>[</strong><font color="#66cccc">'user_elimit'</font><strong>]</strong><strong>,</strong><a name="a627"></a><br />627               <font color="#66cccc">'USER_ILIMIT'</font> =&gt; <strong>$user</strong><strong>-&gt;</strong>data<strong>[</strong><font color="#66cccc">'user_ilimit'</font><strong>]</strong><strong>,</strong><a name="a628"></a><br />628               <font color="#66cccc">'USER_NLIMIT'</font> =&gt; <strong>$user</strong><strong>-&gt;</strong>data<strong>[</strong><font color="#66cccc">'user_nlimit'</font><strong>]</strong><strong>,</strong><a name="a629"></a><br />629               <font color="#66cccc">'USER_RLIMIT'</font> =&gt; <strong>$user</strong><strong>-&gt;</strong>data<strong>[</strong><font color="#66cccc">'user_rlimit'</font><strong>]</strong><strong>,</strong><a name="a630"></a><br />630   <a name="a631"></a><br />631               <font color="green">// Theme Settings</font><a name="a632"></a><br />632               <font color="#66cccc">'T_FONTFACE1'</font>          =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'fontface1'</font><strong>]</strong><strong>,</strong><a name="a633"></a><br />633               <font color="#66cccc">'T_FONTFACE2'</font>          =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'fontface2'</font><strong>]</strong><strong>,</strong><a name="a634"></a><br />634               <font color="#66cccc">'T_FONTFACE3'</font>          =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'fontface3'</font><strong>]</strong><strong>,</strong><a name="a635"></a><br />635               <font color="#66cccc">'T_FONTSIZE1'</font>          =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'fontsize1'</font><strong>]</strong><strong>,</strong><a name="a636"></a><br />636               <font color="#66cccc">'T_FONTSIZE2'</font>          =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'fontsize2'</font><strong>]</strong><strong>,</strong><a name="a637"></a><br />637               <font color="#66cccc">'T_FONTSIZE3'</font>          =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'fontsize3'</font><strong>]</strong><strong>,</strong><a name="a638"></a><br />638               <font color="#66cccc">'T_FONTCOLOR1'</font>         =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'fontcolor1'</font><strong>]</strong><strong>,</strong><a name="a639"></a><br />639               <font color="#66cccc">'T_FONTCOLOR2'</font>         =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'fontcolor2'</font><strong>]</strong><strong>,</strong><a name="a640"></a><br />640               <font color="#66cccc">'T_FONTCOLOR3'</font>         =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'fontcolor3'</font><strong>]</strong><strong>,</strong><a name="a641"></a><br />641               <font color="#66cccc">'T_FONTCOLOR_NEG'</font>      =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'fontcolor_neg'</font><strong>]</strong><strong>,</strong><a name="a642"></a><br />642               <font color="#66cccc">'T_FONTCOLOR_POS'</font>      =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'fontcolor_pos'</font><strong>]</strong><strong>,</strong><a name="a643"></a><br />643               <font color="#66cccc">'T_BODY_BACKGROUND'</font>    =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'body_background'</font><strong>]</strong><strong>,</strong><a name="a644"></a><br />644               <font color="#66cccc">'T_BODY_HEADER_TOP'</font>    =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'body_header_top'</font><strong>]</strong><strong>,</strong><a name="a645"></a><br />645               <font color="#66cccc">'T_BODY_HEADER_BOT'</font>    =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'body_header_bot'</font><strong>]</strong><strong>,</strong><a name="a646"></a><br />646               <font color="#66cccc">'T_BODY_FOOTER'</font>        =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'body_footer'</font><strong>]</strong><strong>,</strong><a name="a647"></a><br />647               <font color="#66cccc">'T_TABLE_BORDER_WIDTH'</font> =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'table_border_width'</font><strong>]</strong><strong>,</strong><a name="a648"></a><br />648               <font color="#66cccc">'T_TABLE_BORDER_COLOR'</font> =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'table_border_color'</font><strong>]</strong><strong>,</strong><a name="a649"></a><br />649               <font color="#66cccc">'T_TABLE_BORDER_STYLE'</font> =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'table_border_style'</font><strong>]</strong><strong>,</strong><a name="a650"></a><br />650               <font color="#66cccc">'T_BODY_LINK'</font>          =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'body_link'</font><strong>]</strong><strong>,</strong><a name="a651"></a><br />651               <font color="#66cccc">'T_BODY_LINK_STYLE'</font>    =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'body_link_style'</font><strong>]</strong><strong>,</strong><a name="a652"></a><br />652               <font color="#66cccc">'T_BODY_HLINK'</font>         =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'body_hlink'</font><strong>]</strong><strong>,</strong><a name="a653"></a><br />653               <font color="#66cccc">'T_BODY_HLINK_STYLE'</font>   =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'body_hlink_style'</font><strong>]</strong><strong>,</strong><a name="a654"></a><br />654               <font color="#66cccc">'T_HEADER_LINK'</font>        =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'header_link'</font><strong>]</strong><strong>,</strong><a name="a655"></a><br />655               <font color="#66cccc">'T_HEADER_LINK_STYLE'</font>  =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'header_link_style'</font><strong>]</strong><strong>,</strong><a name="a656"></a><br />656               <font color="#66cccc">'T_HEADER_HLINK'</font>       =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'header_hlink'</font><strong>]</strong><strong>,</strong><a name="a657"></a><br />657               <font color="#66cccc">'T_HEADER_HLINK_STYLE'</font> =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'header_hlink_style'</font><strong>]</strong><strong>,</strong><a name="a658"></a><br />658               <font color="#66cccc">'T_TH_COLOR1'</font>          =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'th_color1'</font><strong>]</strong><strong>,</strong><a name="a659"></a><br />659               <font color="#66cccc">'T_TR_COLOR1'</font>          =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'tr_color1'</font><strong>]</strong><strong>,</strong><a name="a660"></a><br />660               <font color="#66cccc">'T_TR_COLOR2'</font>          =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'tr_color2'</font><strong>]</strong><strong>,</strong><a name="a661"></a><br />661               <font color="#66cccc">'T_INPUT_BACKGROUND'</font>   =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'input_color'</font><strong>]</strong><strong>,</strong><a name="a662"></a><br />662               <font color="#66cccc">'T_INPUT_BORDER_WIDTH'</font> =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'input_border_width'</font><strong>]</strong><strong>,</strong><a name="a663"></a><br />663               <font color="#66cccc">'T_INPUT_BORDER_COLOR'</font> =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'input_border_color'</font><strong>]</strong><strong>,</strong><a name="a664"></a><br />664               <font color="#66cccc">'T_INPUT_BORDER_STYLE'</font> =&gt; <strong>$user</strong><strong>-&gt;</strong>style<strong>[</strong><font color="#66cccc">'input_border_style'</font><strong>]</strong><strong>)</strong><a name="a665"></a><br />665           <strong>)</strong>;<a name="a666"></a><br />666   <a name="a667"></a><br />667           <font color="blue">foreach</font> <strong>(</strong> <strong>$eqdkp</strong><strong>-&gt;</strong>input as <strong>$key</strong> =&gt; <strong>$value</strong> <strong>)</strong><a name="a668"></a><br />668           <strong>{</strong><a name="a669"></a><br />669               <font color="blue">if</font> <strong>(</strong> <strong>$key</strong> != <font color="#66cccc">'REQUEST_METHOD'</font> <strong>)</strong><a name="a670"></a><br />670               <strong>{</strong><a name="a671"></a><br />671                   <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#methodappend_block">append_block</a><strong>(</strong><font color="#66cccc">'EQDKP_INPUT'</font><strong>,</strong> array<strong>(</strong><a name="a672"></a><br />672                       <font color="#66cccc">'KEY'</font>   =&gt; <strong>$key</strong><strong>,</strong><a name="a673"></a><br />673                       <font color="#66cccc">'VALUE'</font> =&gt; <strong>$value</strong><strong>)</strong><a name="a674"></a><br />674                   <strong>)</strong>;<a name="a675"></a><br />675               <strong>}</strong><a name="a676"></a><br />676           <strong>}</strong><a name="a677"></a><br />677           <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#methodassign_block">assign_block</a><strong>(</strong><font color="#66cccc">'EQDKP_INPUT'</font><strong>)</strong>;<a name="a678"></a><br />678   <a name="a679"></a><br />679           <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#methodgenerate_menus">generate_menus</a><strong>(</strong><strong>)</strong>;<a name="a680"></a><br />680       <strong>}</strong><a name="a681"></a><br />681   <a name="a682"></a><br />682       <font color="#009999">/**</font><a name="a683"></a><br />683   <font color="#009999">     * Output the page footer values and display the page</font><a name="a684"></a><br />684   <font color="#009999">     *</font><a name="a685"></a><br />685   <font color="#009999">     * Includes output types, load averages, render times, query strings, etc.</font><a name="a686"></a><br />686   <font color="#009999">     */</font><a name="a687"></a><br />687       <font color="blue">function</font> <a href="../EQdkp_Foundation/Smarty_Wrap.html#methodpage_footer">page_footer</a><strong>(</strong><strong>)</strong><a name="a688"></a><br />688       <strong>{</strong><a name="a689"></a><br />689           <font color="blue">global</font> <strong>$eqdkp</strong> <strong>$user</strong> <strong>$db</strong> <strong>$dbg</strong><a name="a690"></a><br />690   <a name="a691"></a><br />691           <font color="blue">if</font> <strong>(</strong> <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$footer_processed">footer_processed</a> <strong>)</strong><a name="a692"></a><br />692           <strong>{</strong><a name="a693"></a><br />693               <font color="blue">return</font>;<a name="a694"></a><br />694           <strong>}</strong><a name="a695"></a><br />695   <a name="a696"></a><br />696           <font color="blue">if</font> <strong>(</strong> <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$template_file">template_file</a> == <font color="#66cccc">''</font> <strong>)</strong><a name="a697"></a><br />697           <strong>{</strong><a name="a698"></a><br />698               <a href="http://www.php.net/trigger_error">trigger_error</a><strong>(</strong><font color="#66cccc">'No template file was specified for output!'</font><strong>,</strong> E_USER_ERROR<strong>)</strong>;<a name="a699"></a><br />699           <strong>}</strong><a name="a700"></a><br />700   <a name="a701"></a><br />701           <strong>$this</strong><strong>-&gt;</strong>assign<strong>(</strong>array<strong>(</strong><a name="a702"></a><br />702               <font color="#66cccc">'OUTPUT_HTML'</font> =&gt; true<strong>,</strong><a name="a703"></a><br />703               <font color="#66cccc">'OUTPUT_XML'</font>  =&gt; <a href="http://www.php.net/in_array">in_array</a><strong>(</strong><font color="#66cccc">'xml'</font><strong>,</strong> <strong>$this</strong><strong>-&gt;</strong>out_types<strong>)</strong><strong>,</strong><a name="a704"></a><br />704               <font color="#66cccc">'OUTPUT_CSV'</font>  =&gt; <a href="http://www.php.net/in_array">in_array</a><strong>(</strong><font color="#66cccc">'csv'</font><strong>,</strong> <strong>$this</strong><strong>-&gt;</strong>out_types<strong>)</strong><strong>)</strong><a name="a705"></a><br />705           <strong>)</strong>;<a name="a706"></a><br />706   <a name="a707"></a><br />707           <font color="green">//--------------------------------</font><a name="a708"></a><br />708           <font color="green">// Display the debug/copyright info if simple_header is false</font><a name="a709"></a><br />709           <font color="green">//--------------------------------</font><a name="a710"></a><br />710   <a name="a711"></a><br />711           <font color="blue">if</font> <strong>(</strong> <strong>(</strong><strong>!</strong><strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$simple_header">simple_header</a><strong>)</strong> &amp;&amp; <strong>(</strong><a href="../EQdkp/_eqdkp2_common_php.html#defineDEBUG">DEBUG</a> &gt;= 1<strong>)</strong> <strong>)</strong><a name="a712"></a><br />712           <strong>{</strong><a name="a713"></a><br />713               <font color="green">// Get the load average</font><a name="a714"></a><br />714               <font color="blue">if</font> <strong>(</strong> <a href="http://www.php.net/file_exists">file_exists</a><strong>(</strong><font color="#66cccc">'/proc/loadavg'</font><strong>)</strong> <strong>)</strong><a name="a715"></a><br />715               <strong>{</strong><a name="a716"></a><br />716                   <font color="blue">if</font> <strong>(</strong> <strong>$fh</strong> = <strong>@</strong><a href="http://www.php.net/fopen">fopen</a><strong>(</strong><font color="#66cccc">'/proc/loadavg'</font><strong>,</strong> <font color="#66cccc">'r'</font><strong>)</strong> <strong>)</strong><a name="a717"></a><br />717                   <strong>{</strong><a name="a718"></a><br />718                       <strong>$data</strong> = <strong>@</strong><a href="http://www.php.net/fread">fread</a><strong>(</strong><strong>$fh</strong><strong>,</strong> 6<strong>)</strong>;<a name="a719"></a><br />719                       <strong>@</strong><a href="http://www.php.net/fclose">fclose</a><strong>(</strong><strong>$fh</strong><strong>)</strong>;<a name="a720"></a><br />720   <a name="a721"></a><br />721                       <strong>$load_avg</strong> = <a href="http://www.php.net/explode">explode</a><strong>(</strong><font color="#66cccc">' '</font><strong>,</strong> <strong>$data</strong><strong>)</strong>;<a name="a722"></a><br />722                       <strong>$load_avg</strong> = <a href="http://www.php.net/trim">trim</a><strong>(</strong><strong>$load_avg</strong><strong>[</strong>0<strong>]</strong><strong>)</strong>;<a name="a723"></a><br />723                   <strong>}</strong><a name="a724"></a><br />724               <strong>}</strong><a name="a725"></a><br />725   <a name="a726"></a><br />726               <strong>$this</strong><strong>-&gt;</strong>assign<strong>(</strong>array<strong>(</strong><a name="a727"></a><br />727                   <font color="#66cccc">'EQDKP_RENDERTIME'</font> =&gt; <strong>$dbg</strong><strong>-&gt;</strong>timer_elapsed<strong>(</strong><font color="#66cccc">'root'</font><strong>)</strong><strong>,</strong><a name="a728"></a><br />728                   <font color="#66cccc">'EQDKP_QUERYCOUNT'</font> =&gt; <strong>$db</strong><strong>-&gt;</strong>query_count<strong>,</strong><a name="a729"></a><br />729                   <font color="#66cccc">'SERVER_LOAD'</font>      =&gt; <strong>(</strong> isset<strong>(</strong><strong>$load_avg</strong><strong>)</strong> <strong>)</strong> ? <strong>$load_avg</strong> : <font color="#66cccc">'N/A'</font><strong>,</strong><a name="a730"></a><br />730                   <font color="#66cccc">'GZIP_STATUS'</font>      =&gt; <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$gzip_status">gzip_status</a><strong>)</strong><a name="a731"></a><br />731               <strong>)</strong>;<a name="a732"></a><br />732   <a name="a733"></a><br />733               <font color="green">// Show queries</font><a name="a734"></a><br />734               <font color="blue">if</font> <strong>(</strong> <a href="../EQdkp/_eqdkp2_common_php.html#defineDEBUG">DEBUG</a> &gt;= 2 <strong>)</strong><a name="a735"></a><br />735               <strong>{</strong><a name="a736"></a><br />736                   <font color="blue">foreach</font> <strong>(</strong> <strong>$db</strong><strong>-&gt;</strong>queries as <strong>$sql</strong> <strong>)</strong><a name="a737"></a><br />737                   <strong>{</strong><a name="a738"></a><br />738                       <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#methodappend_block">append_block</a><strong>(</strong><font color="#66cccc">'QUERY_ROW'</font><strong>,</strong> array<strong>(</strong><a name="a739"></a><br />739                           <font color="#66cccc">'SQL'</font> =&gt; <strong>$sql</strong><strong>)</strong><a name="a740"></a><br />740                       <strong>)</strong>;<a name="a741"></a><br />741                   <strong>}</strong><a name="a742"></a><br />742   <a name="a743"></a><br />743                   <strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#methodassign_block">assign_block</a><strong>(</strong><font color="#66cccc">'QUERY_ROW'</font><strong>)</strong>;<a name="a744"></a><br />744               <strong>}</strong><a name="a745"></a><br />745           <strong>}</strong><a name="a746"></a><br />746   <a name="a747"></a><br />747           <font color="green">//--------------------------------</font><a name="a748"></a><br />748           <font color="green">// Output and clean up</font><a name="a749"></a><br />749           <font color="green">//--------------------------------</font><a name="a750"></a><br />750           <strong>$db</strong><strong>-&gt;</strong>close_db<strong>(</strong><strong>)</strong>;<a name="a751"></a><br />751           <strong>$this</strong><strong>-&gt;</strong>display<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../EQdkp_Foundation/Smarty_Wrap.html#var$template_file">template_file</a><strong>)</strong>;<a name="a752"></a><br />752   <a name="a753"></a><br />753           exit;<a name="a754"></a><br />754       <strong>}</strong><a name="a755"></a><br />755   <strong>}</strong><a name="a756"></a><br />756   <strong>?&gt;</strong></pre>
    </div>

    <div id="sidebar">
      <div class="menu-header">EQdkp</div>
      <ul class="menu">
        <li class="menu"><a href="http://eqdkp.com/?p=news">News</a></li>
        <li class="menu"><a href="http://eqdkp.com/?p=about">About</a></li>
        <li class="menu"><a href="http://eqdkp.com/?p=download">Download</a></li>
        <li class="menu"><a href="http://eqdkp.com/?p=changelog">ChangeLog</a></li>
        <li class="menu"><a href="http://eqdkp.com/?p=donate">Donate</a></li>
      </ul>
      <br />
      <div class="menu-header">Interact</div>
      <ul class="menu">
        <li class="menu"><a href="http://forums.eqdkp.com/">Forums</a></li>
        <li class="menu"><a href="http://demo.eqdkp.com/">Demo</a></li>
        <li class="menu"><a href="http://forums.eqdkp.com/index.php?s=&amp;act=SF&amp;f=13">Guilds</a></li>
        <li class="menu"><a href="http://sourceforge.net/tracker/?atid=524839&amp;group_id=69529&amp;func=browse">Bug Reports</a></li>
        <li class="menu"><a href="http://sourceforge.net/tracker/?atid=524842&amp;group_id=69529&amp;func=browse">Feature Requests</a></li>
      </ul>
      <br />
      
      <div class="menu-header">Developer Documentation</div>
      <ul class="menu">
        <li class="menu"><a href="../classtrees_EQdkp_Foundation.html">Class Tree: EQdkp_Foundation</a></li>
        <li class="menu"><a href="../elementindex_EQdkp_Foundation.html">Index: EQdkp_Foundation</a></li>
        <li class="menu"><a href="../elementindex.html">All Elements</a></li>
      </ul>
      <br />
      <div class="menu-header">Packages</div>
      <ul class="menu">
                <li class="menu"><a href="../li_EQdkp.html">EQdkp</a></li>
                <li class="menu"><a href="../li_EQdkp_Admin.html">EQdkp_Admin</a></li>
                <li class="menu"><a href="../li_EQdkp_Foundation.html">EQdkp_Foundation</a></li>
                <li class="menu"><a href="../li_EQdkp_User.html">EQdkp_User</a></li>
                <li class="menu"><a href="../li_Functions.html">Functions</a></li>
                <li class="menu"><a href="../li_SQL_DB.html">SQL_DB</a></li>
              </ul>
      <br />
                        <br />
                </div>

    <div id="sidebar-extra">
      <img src="http://eqdkp.com/images/btn_eqdkp.gif" width="88" height="31" alt="EQdkp - Open Source DKP" />
      <br />
      <a href="http://sf.net/projects/eqdkp/"><img src="http://sourceforge.net/sflogo.php?group_id=69529&amp;type=1" width="88" height="31" alt="SourceForge" /></a>
      <br />
      <a href="http://www.invisionpower.com/"><img src="http://eqdkp.com/images/btn_invision.gif" width="88" height="31" alt="Invision Power Board" /></a>
      <br />
      <a href="http://smarty.php.net/"><img src="http://eqdkp.com/images/btn_smarty.gif" width="88" height="31" alt="Smarty Template Engine" /></a>
      <br />
      <a href="http://eqdkp.com/?p=donate"><img src="http://eqdkp.com/images/btn_paypal.gif" width="62" height="31" alt="Support EQdkp" /></a>
    </div>

    <div style="clear:both;"></div>
  </div>

  <div id="footer">
    <div id="footer-left">&copy; 2003-2004 The EQdkp Project</div>
    <div id="footer-right">This documentation was generated by <a href="http://www.phpdoc.org" style="color: rgb(170, 170, 220)">phpDocumentor v1.2.3</a></div>
  </div>
</div>
</body>
</html>