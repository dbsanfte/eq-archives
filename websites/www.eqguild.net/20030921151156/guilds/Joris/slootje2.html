<!--begin code-->
<!-- This page is hosted FREE at www.eqguild.net -->



<!--end code-->
<HTML>
<HEAD><TITLE>Slootje Graven</TITLE>

<style>

#divMenu {font-family:comic sans ms,arial,helvetica; font-size:12pt; font-weight:bold}
#divMenu a{text-decoration:none;}
#divMenu a:hover{color:red;}
</style>
<script language="JavaScript1.2">
/********************************************************************************
Submitted with modifications by Jack Routledge (http://fastway.to/compute) to DynamicDrive.com
Copyright (C) 1999 Thomas Brattli @ www.bratta.com
This script is made by and copyrighted to Thomas Brattli 
This may be used freely as long as this msg is intact!
This script has been featured on http://www.dynamicdrive.com
********************************************************************************
Browsercheck:*/
ie=document.all?1:0
n=document.layers?1:0
ns6=document.getElementById&&!document.all?1:0

//These are the variables you have to set:

//How much of the layer do you wan't to be visible when it's in the out state?
lshow=60

//How many pixels should it move every step? 
var move=10;

//At what speed (in milliseconds, lower value is more speed)
menuSpeed=40

//Do you want it to move with the page if the user scroll the page?
var moveOnScroll=true

/********************************************************************************
You should't have to change anything below this.
********************************************************************************/
//Defining variables

var ltop;
var tim=0;

//Object constructor
function makeMenu(obj,nest){
    nest=(!nest) ? '':'document.'+nest+'.'
    if (n) this.css=eval(nest+'document.'+obj)
    else if (ns6) this.css=document.getElementById(obj).style
    else if (ie) this.css=eval(obj+'.style')						
	this.state=1
	this.go=0
        if (n) this.width=this.css.document.width
        else if (ns6) this.width=document.getElementById(obj).offsetWidth
        else if (ie) this.width=eval(obj+'.offsetWidth')
	this.left=b_getleft
    this.obj = obj + "Object"; 	eval(this.obj + "=this")	
}
//Get's the top position.
function b_getleft(){
        if (n||ns6){ gleft=parseInt(this.css.left)}
        else if (ie){ gleft=eval(this.css.pixelLeft)}
	return gleft;
}
/********************************************************************************
Deciding what way to move the menu (this is called onmouseover, onmouseout or onclick)
********************************************************************************/
function moveMenu(){
	if(!oMenu.state){
		clearTimeout(tim)
		mIn()	
	}else{
		clearTimeout(tim)
		mOut()
	}
}
//Menu in
function mIn(){
	if(oMenu.left()>-oMenu.width+lshow){
		oMenu.go=1
		oMenu.css.left=oMenu.left()-move
		tim=setTimeout("mIn()",menuSpeed)
	}else{
		oMenu.go=0
		oMenu.state=1
	}	
}
//Menu out
function mOut(){
	if(oMenu.left()<0){
		oMenu.go=1
		oMenu.css.left=oMenu.left()+move
		tim=setTimeout("mOut()",menuSpeed)
	}else{
		oMenu.go=0
		oMenu.state=0
	}	
}
/********************************************************************************
Checking if the page is scrolled, if it is move the menu after
********************************************************************************/
function checkScrolled(){
	if(!oMenu.go) oMenu.css.top=eval(scrolled)+parseInt(ltop)
	if(n||ns6) setTimeout('checkScrolled()',30)
}
/********************************************************************************
Inits the page, makes the menu object, moves it to the right place, 
show it
********************************************************************************/
function menuInit(){
	oMenu=new makeMenu('divMenu')
        if (n||ns6) scrolled="window.pageYOffset"
        else if (ie) scrolled="document.body.scrollTop"
	oMenu.css.left=-oMenu.width+lshow
        if (n||ns6) ltop=oMenu.css.top
        else if (ie) ltop=oMenu.css.pixelTop
	oMenu.css.visibility='visible'
	if(moveOnScroll) ie?window.onscroll=checkScrolled:checkScrolled();
}


//Initing menu on pageload
window.onload=menuInit;
</script>
</HEAD>
<body bgcolor='#ffffff' text='#000000' link='#0000FF' vlink='#800080' alink='#FF0000' onLoad="window.setTimeout('getSecs()',0)">
<font size=4><a href="slootje3.html">Klik</a> hier voor een moeilijker niveau.</font>
<!--page content-->

<SCRIPT language="JavaScript">
<!--
for(n=0;n<15;n++) 
{
eval("e"+n+" = new Image(30, 30);e"+n+".src = 'http://www.eqguild.net/guilds/Joris/oasis/p"+n+".gif';") 
eval("f"+n+" = new Image(30, 30);f"+n+".src = 'http://www.eqguild.net/guilds/Joris/oasis/bp"+n+".gif';") 
}
//-->
</SCRIPT>


<script language="javascript">

<!-- 


startday = new Date();
clockStart = startday.getTime();

function initStopwatch() 
{ 
 var myTime = new Date(); 
        var timeNow = myTime.getTime();  
        var timeDiff = timeNow - clockStart - 2000; 
        this.diffSecs = timeDiff/1000; 
        return(this.diffSecs); 
} 

function getSecs() 
{ 
        var mySecs = initStopwatch(); 
        var mySecs1 = ""+mySecs; 
        mySecs1= mySecs1.substring(0,mySecs1.indexOf(".")) + " sec."; 
        document.forms[0].timespent.value = mySecs1;
        window.setTimeout('getSecs()',1000); 
}




fieldsize=8;  
  if (fieldsize<3) fieldsize=3
  if (fieldsize>9) fieldsize=9
  startfield=Math.floor((fieldsize+1)/2)*10+Math.floor((fieldsize+1)/2);
copyright="2000"
var score=0;
var bak_score=0;
var newgame=1
var playfield = new Array(110);
var waterlevel = new Array(110);
var awf=0;

//determines whether a mac - added 21.4.2000
clientplatform = navigator.userAgent.toLowerCase();
mac=false;
if (clientplatform.indexOf("mac") != -1) mac=true;

function alerting(messa)
{
window.document.storeform.alertbox.value=messa
}

function soli()
{
window.status='Slootje Graven'
}

function randomise(maxim)
{
//returns an integer between 1 and maxim.
tmp=Math.floor(Math.random()*maxim +1);
if (tmp>maxim) tmp=maxim;
return tmp;
}



function start_game()

{

alerting(" ");

score=300;

for (n=0;n<111;n++) playfield[n]=20;
for (n=1;n<fieldsize+1;n++) for (m=1;m<fieldsize+1;m++) playfield[m*10+n]=0;


setupfield()

newgame=0

}


function setupfield()
{
currentfield=startfield;
winds=randomise(4);//1 south 2 North 3 West 4 east
playfield[currentfield]=winds+10;
direction=getstepfromwind(winds)
currentfield+=direction;
pathfinder(currentfield, direction);//find first path

morespace=true
while (morespace)
 {
 currentfield=findnextstartfield();//finds field next to field that is taken but has not three yet
 if (currentfield>0)
	{
	direction=finddirection(currentfield)
	if (!(direction==0))
		{ 
		pathfinder(currentfield, direction);//finds next path
		}
		else { morespace=false;
		}
	}
	else
	{
	morespace=false;
	}
 } 
mixit()

clearwaterlevel();
awf=0;//number of water fields are set to zero.
findwaterlevel(startfield)
showallfields()
showscore()

}



function finddirection(f1)
{
searchdrct=true;
wd=randomise(4);
c1=0;

while (searchdrct && c1<5)
 {
 c1++;
 wd++;
 if(wd>4) wd=1;
 switch (wd) 
  {
  case 1: drct=-1;break;
  case 2: drct=-10;break;
  case 3: drct=1;break;
  case 4: drct=10;break;
  default: alert("real error - unexpected value in finddiretion");
  }
 zb=playfield[f1+drct];
 if((zb>0 && zb<7) || (zb>10 && zb<15)) searchdrct=false;
 } 
if (searchdrct) 
	{ drct=0; }
	else {
	drct=drct*(-1);//bugfix? alert
	changefieldtoyield(f1-drct,drct);
	}
return drct;
}


function changefieldtoyield(cf,drct1)
{
fm=playfield[cf]

switch (fm)
	{
	case 14: 	piecebits=8; break;
	case 13: 	piecebits=4; break;
	case 12: 	piecebits=2; break;
	case 11: 	piecebits=1; break;
	case 5: 	piecebits=6; break;
	case 6: 	piecebits=5; break;
	case 4: 	piecebits=10; break;
	case 3: 	piecebits=9; break;
	case 2: 	piecebits=12; break;
	case 1: 	piecebits=3; break;
	default: 	alert("real error1- unexpected piece in yieldfield"+cf+"v"+fm); break;
	}

if (drct1==10 ) piecebits+=1
if (drct1==-10 ) piecebits+=2
if (drct1==-1 ) piecebits+=4
if (drct1==1 ) piecebits+=8

switch (piecebits)
	{
	case 13: 	piece=10; break;
	case 7: 	piece=9; break;
	case 14: 	piece=8; break;
	case 11: 	piece=7; break;
	case 5: 	piece=6; break;
	case 6: 	piece=5; break;
	case 10: 	piece=4; break;
	case 9: 	piece=3; break;
	case 12: 	piece=2; break;
	case 3: 	piece=1; break;
	default: 	alert("real error2- unexpected piece in yieldfield"+cf+"v"+piecebits); break;
	}
playfield[cf]=piece;
return;
}



function findnextstartfield()
{
c1=0
searchingfield=true;
f1=randomise(90)+10

while (searchingfield && c1<153)
 {
 f1++;c1++;
 if (f1>100) f1=11;
 if (playfield[f1]==0)
	{
	zb=playfield[f1-1];
	if((zb>0 && zb<7) || (zb>10 && zb<15)) {searchingfield=false; }
	zb=playfield[f1-10];
	if((zb>0 && zb<7) || (zb>10 && zb<15)) {searchingfield=false; }
	zb=playfield[f1+1];
	if((zb>0 && zb<7) || (zb>10 && zb<15)) {searchingfield=false; }
	zb=playfield[f1+10];
	if((zb>0 && zb<7) || (zb>10 && zb<15)) {searchingfield=false; }
	//searching field is false when finished
	}
 } 
if (searchingfield) f1=0
return f1;
}


function pathfinder(currentfield, direction)
{
//die folgende schleife bis kein Ziel mehr
nextfound=true;
while (nextfound)
 { 
	winds=randomise(4);
	trycount=0;
	nextfound=false;
	while( !(nextfound) && trycount<4)
	{
		nextdirection=getstepfromwind(winds); 
		nextfield=currentfield+nextdirection
		trycount++;winds++; if (winds>4) winds=1; //prep for next try
		if (playfield[nextfield]==0) nextfound=true;
	} 

	if (nextfound)
		{
		playfield[currentfield]=connectfields(direction,nextdirection);
		direction=nextdirection;
		currentfield=nextfield;
		}
		else
		{
		playfield[currentfield]=getlastfield(direction);
		}
	
   } 

}


function showallfields()

{
//show all fields
for (n1=1;n1<fieldsize+1;n1++) for (n2=1;n2<fieldsize+1;n2++)
	{
	n=n1*10+n2;
	if (waterlevel[n]==0)
		{
		if (mac) eval("window.document.p"+n+".src='http://www.eqguild.net/guilds/Joris/oasis/p"+playfield[n]+".gif'")
		else eval("window.document.storeform.p"+n+".src='http://www.eqguild.net/guilds/Joris/oasis/p"+playfield[n]+".gif'")
		}
	else 	{
		if (mac) eval("window.document.p"+n+".src='http://www.eqguild.net/guilds/Joris/oasis/bp"+playfield[n]+".gif'")
		else eval("window.document.storeform.p"+n+".src='http://www.eqguild.net/guilds/Joris/oasis/bp"+playfield[n]+".gif'")
		}
	}
}

function getstepfromwind(w)
{
//returns  adirection for a wind
if (w==1) d=10
if (w==2) d=-10
if (w==3) d=-1
if (w==4) d=1
return d;
}

function connectfields(cd,nd)
{
// give it the current and the next direction and it tells you which piece would connect that
cd=cd*-1;
piecebits=0
if (cd==10 || nd==10) piecebits+=1
if (cd==-10 || nd==-10) piecebits+=2
if (cd==-1 || nd==-1) piecebits+=4
if (cd==1 || nd==1) piecebits+=8

switch (piecebits)
	{
	case 5: 	piece=6; break;
	case 6: 	piece=5; break;
	case 10: 	piece=4; break;
	case 9: 	piece=3; break;
	case 12: 	piece=2; break;
	case 3: 	piece=1; break;
	default: 	alert("real error1- unexpected piece"); break;
	}
return piece;
}

function getlastfield(cd)
{
//almost same as connectfields(cd,nd)
// give it the current direction and it tells you which piece would fit as the last.
p=0
switch (cd)
	{
	case 1: p=13;break;
	case 10: p=12;break;
	case -1: p=14;break;
	case -10: p=11;break;
	default: alert("real erro2r- unexpected last piece"); break;
	}
return p;
}


//end of functions for initialize playing field.



function click_on_field (field)

{



alerting(" ")

if(newgame==1)

	{

	alerting("Opnieuw!")

	return;

	}

if(playfield[field]==0) return;
score-=1;
turnfield(field);

clearwaterlevel();
awf=0;//number of water fields are set to zero.
findwaterlevel(startfield)

showallfields()
showscore()
if (awf==fieldsize*fieldsize)

 {
 var mySecs = initStopwatch();
 var score2 = score - mySecs; 
 var score3 = parseInt(score2)
 alerting("Klaar! Jouw Score:"+score3);
 window.document.storeform.score.value=score;
 window.document.scoreform.newscore.value=score; 
 newgame=1;

 score=0;

 }

if (mySecs == 300)
 {
 alerting("TE LAAT! HET SPEL IS UIT!");
newgame=1;
score=0;
}

}




function turnfield(f)
{
pd=playfield[f];
switch (pd)
 {
 case 1: playfield[f]=2;break;
 case 2: playfield[f]=1;break;

 case 3: playfield[f]=6;break;
 case 4: playfield[f]=3;break;
 case 5: playfield[f]=4;break;
 case 6: playfield[f]=5;break;
 
 case 7: playfield[f]=10;break;
 case 8: playfield[f]=7;break;
 case 9: playfield[f]=8;break;
 case 10: playfield[f]=9;break;

 case 11: playfield[f]=13;break;
 case 12: playfield[f]=14;break;
 case 13: playfield[f]=12;break;
 case 14: playfield[f]=11;break;
 default: alert("unexpected piece in turnfield"); return;
 }
return;
}

function clearwaterlevel()
{
for (n=0;n<100;n++) waterlevel[n]=0;
}

function findwaterlevel(cf)
{
waterlevel[cf]=1;
awf++
wpiec=playfield[cf]
switch (wpiec)
{
case 1: checkwater(cf, -10);checkwater(cf, 10); break;
case 2: checkwater(cf, -1);checkwater(cf, 1); break;
case 3: checkwater(cf, 10);checkwater(cf, 1); break;
case 4: checkwater(cf, -10);checkwater(cf, 1); break;
case 5: checkwater(cf, -1);checkwater(cf, -10); break;
case 6: checkwater(cf, -1);checkwater(cf, 10); break;
case 7: checkwater(cf, -10);checkwater(cf, 10);checkwater(cf, 1); break;
case 8: checkwater(cf, -10);checkwater(cf, -1);checkwater(cf, 1); break;
case 9: checkwater(cf, -10);checkwater(cf, 10);checkwater(cf, -1); break;
case 10: checkwater(cf, -1);checkwater(cf, 10);checkwater(cf, 1); break;
case 11: checkwater(cf, 10); break;
case 12: checkwater(cf, -10); break;
case 13: checkwater(cf, -1); break;
case 14: checkwater(cf, 1); break;
default: alert("unexpected value in "+wpiec+"find water level"+cf);
}
return;
}


function checkwater(cf,drct2)
{
if (waterlevel[cf+drct2]==1) return;

pf=playfield[cf+drct2]
if (drct2==-1 && (pf==2 || pf==3 || pf==4 || pf==7 || pf==8 || pf==10 || pf==14))  
	{	findwaterlevel(cf+drct2);	}

if (drct2==10 && (pf==1 || pf==4 || pf==5 || pf==7 || pf==8 || pf==9 || pf==12)) 
	{  findwaterlevel(cf+drct2);	}
	
if (drct2==1 && (pf==2 || pf==5 || pf==6 || pf==9 || pf==8 || pf==10 || pf==13)) 
	{  findwaterlevel(cf+drct2); }
if (drct2==-10 && (pf==1 || pf==3 || pf==6 || pf==7 || pf==9 || pf==10 || pf==11))  
	findwaterlevel(cf+drct2); 

return;
}

function mixit()
{
for (n=1;n<fieldsize;n++) for (m=1;m<fieldsize;m++)
	{
	r=randomise(4)
	f=n+m*10
	for (z=r;z<5;z++) turnfield(f)
	}
}

function showscore()

{

alerting("Score:"+score);

}


function divisor(a,b)
{
if (a/b==Math.floor(a/b) ) return true;
return false
}


//-->

</script>



<form name="storeform">

<center>



<SCRIPT LANGUAGE="JavaScript">

<!--

if(navigator.appName.indexOf("WebTV", 0) == -1) document.write("<font face=arial><h3>Slootje Graven</h3></font>")

//-->

</SCRIPT><NOSCRIPT><font face=arial><h3>Slootje Graven</h3></font></NOSCRIPT>



<input type="button" value="Nog eens!" onclick="window.history.go(0)">


<input type="text" name="alertbox" value=" " size="22">
<input type="text" name="timespent" value=" " size="8">
 </font>



<table border=1 cellpadding=1 cellspacing=0>



<script language="javascript">

<!--

for(y=1;y<fieldsize+1;y++)

	{	;//4 is length of col +1

	document.write("<tr>")

	for(x=1;x<fieldsize+1;x++)

		{	;//7 is length of row +1

		feld=y*10+x; //10 is length of row



		document.write("<td width=30>")

			document.write("<a href='javascript:void()' onclick='click_on_field("+feld+");return false;'>")

			document.write("<img src='http://www.eqguild.net/guilds/Joris/oasis/p7.gif' height=20 width=30 border=0 name='p"+feld+"'></a>")

		document.write("</td>")

		}

	document.write("</tr>")

	}



//-->

</script>



</table>



<p>



</center>





<script language="javascript">

<!--

start_game();

//-->

</script>

</form>
<!--/UITLEG SPELLETJE -->
<ul>
   <li> Het is de bedoeling om een sloot te graven vanuit de bron in het midden, die door alle vakjes stroomt. Verplaatsen van slootdelen kan niet... draaien door te klikken.</li>
    <li> Hoe vaker je klikt, hoe lager je score is. </li>
<li>Let op! De tijd tikt door; als je klaar bent wordt de tijd van je score afgetrokken; hoe sneller je bent hoe hoger je eindigt. Je hebt 5 minuten om de puzzle op te lossen.
 <li> Het spel is afgelopen als alle vakjes van water voorzien zijn (groen).</li>
<li>Laat even weten wat je score is...</li>
<li>Succes!</li>
  </ul>
 <!--Einde Uitleg->
 
 
    <!-- footersection -->
  <center>
 Script gedeeltelijk gestolen van <a href="http://www.kielack.de/index.htm" target=_top>Armin Kielack</a>.
    <hr>
    <FONT SIZE=1>Copyright by 
  <a href="http://www.kielack.de/index.htm" target=_top>
  Armin Kielack </a> <script language="javascript">
  document.write(copyright)
  </script></font>
  </center>
  <!-- Einde footersection -->
  
  
  
<div id="divMenu" style="position:absolute; top:3; left:0; visibility:hidden; background-color:#F6CE94>
<nobr>
<a href="index.html">Menu<a> |
<a href="index.html">Home<a> |
        <a href="wie.html">WIE?</a> |
<a href="tabs/tabs.html">Tabs</a> |
<a href="cds.html">CD's</a> |
<a href="gedichten.html">Gedichten</a> |
<a href="pws.html">PWS</a> |
<a href="downloads.html">Downloads</a> |
<a href="favorieten.html">Links</a> |
<a href="gastenboek.html">Gastenboek</a> |
	<a href="javascript://" onmouseover="moveMenu()" style="background-color:none;text-decoration:none"><font color="white">MENU</a>
</nobr>
</div>
  </body></html>
  
<!--begin code-->
<div align=center><font size=1><a href="http://www.eqguild.net">EQG</a></font></div>



<!--end code-->
