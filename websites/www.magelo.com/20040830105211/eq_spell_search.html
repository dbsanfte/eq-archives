<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
	<title>EQ - Spell search</title>
	<link rel="stylesheet" type="text/css" href="./style/magelo.css">
	<META HTTP-EQUIV="Expires" CONTENT="0"> 
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE"> 
<META HTTP-EQUIV="PRAGMAS" CONTENT="NO-CACHE">
</head>
<body>

<!-- Header for Magelo -->
<script type="text/javascript" src="magelo.js"></script>
<script type="text/javascript" src="/components/eq_spell_get_search_info.jsp"></script>
<script type="text/javascript" src="/components/eq_spell_search_results.jsp"></script>

<script type="text/javascript">
	if(typeof(logged)=='undefined')
		document.location="index.html";
</script>

<br>
<table align="center" width="99%" cellpadding="0" cellspacing="0">
<tr><td width="*" rowspan="2" colspan="2">
<table width="100%" align="center" border="1" style="border-color: #29455A" cellpadding="0" cellspacing="0">
<tr><td><table cellpadding="0" cellspacing="0" width="100%">
<tr>
	<td style="background: url(img/title_bg0.gif)" height="15" class="title">
		&nbsp;Spell - Search
	</td>
</tr>
<tr><td class="cadre-bg"><table width="100%" align="center">
<tr>
	<td class="text2">
		<br>
		<form name="spell_search" action="">
		<input type="Hidden" name="send_to" value="eq_spell_search">
		<input type="Hidden" name="redirect" value="/eq_spell_search.html">
		<input type="Hidden" name="redirect_error" value="/error.html">
		<table class="text2" align="center" width="96%" cellpadding="1" cellspacing="1">
		<tr>
			<td>Class:</td>
			<td><script type="text/javascript">build_select("tab_class",tab_class,1,false,false);</script></td>
			<td>Skill:</td>
			<td><script type="text/javascript">build_select("tab_skill",tab_skill,1,false,false);</script></td>
		</tr>
		<tr>
			<td>Level:</td>
			<td><script type="text/javascript">build_select("tab_level",tab_level,1,false,false);</script></td>
		</tr>
		<tr><td>&nbsp;</td></tr>
		<tr>
			<td>Text:</td><td colspan=3><input class="input" type="text" name="text" size="35" maxlength="35"></td>
		</tr>
		<tr>
			<td colspan=4 align="center"><br><input type="submit" name="search" value="Search"></td>
		</tr>
		</table>
		</form>
	
		<script type="text/javascript">
			if(typeof(tab_spell)!='undefined')
			{
				// we set search criterias
				for(var i=0;i<document.spell_search.tab_class.length;i++)
					if(document.spell_search.tab_class.options[i].value==spell_class)
						document.spell_search.tab_class.selectedIndex=i;
				for(var i=0;i<document.spell_search.tab_level.length;i++)
					if(document.spell_search.tab_level.options[i].value==spell_level)
						document.spell_search.tab_level.selectedIndex=i;	
				for(var i=0;i<document.spell_search.tab_skill.length;i++)
					if(document.spell_search.tab_skill.options[i].value==spell_skill)
						document.spell_search.tab_skill.selectedIndex=i;
				document.spell_search.text.value=spell_text;
			}
		</script>
		
		</td>
</tr></table></td></tr></table></td></tr></table>
</td><td width="6" height="8" style="background: url(img/right_shadow.gif)" valign="top"><img alt="" src="img/top_right_shadow.gif" width="6" height="8"></td></tr>
<tr><td width="6" height="100%" style="background: url(img/right_shadow.gif)"></td></tr>
<tr>
	<td width="6" height="8" style="line-height:0;background: url(img/bottom_shadow.gif)"><img alt="" src="img/bottom_left_shadow.gif" width="6" height="8"></td>
	<td width="*" height="8" style="line-height:0;background: url(img/bottom_shadow.gif)"><img alt="" src="img/bottom_shadow.gif" width="6" height="8"></td>
	<td width="6" height="8" style="line-height:0;background: url(img/bottom_shadow.gif)"><img alt="" src="img/bottom_right_shadow.gif" width="6" height="8"></td>
</tr>	
</table>

<script type="text/javascript">
if(typeof(tab_spell)!='undefined')
{
	document.write("<table align='center' width='99%' cellpadding=0 cellspacing=0>");
	document.write("<tr><td width='*' rowspan=2 colspan=2>");
	document.write("<table width='100%' align='center' border=1 style='border-color: #29455A' cellpadding=0 cellspacing=0>");
	document.write("<tr><td><table cellpadding=0 cellspacing=0 width='100%'>");
	document.write("<tr><td style='background: url(img/title_bg0.gif)' height='15px' class='title'>&nbsp;Results");
	document.write("<\/td><\/tr><tr><td class='cadre-bg'><table width='100%' align='center'>");
	document.write("<tr><td class='text2'>");
	
	if(tab_spell.length!=0)
	{
		//now we display the results
		var level=0;
		document.write("<table class=text2 align='center' width='96%' cellpadding=4 cellspacing=1>");
		for(var i=1;i<=tab_spell.length;i++)
		{
			if(tab_spell[i].level!=level)
			{
				level=tab_spell[i].level;
				document.write("<tr><td><\/td><\/tr>");
				
				// When a player class is choosen as filter, we can order results by level otherwise, all level's spell r set to 61 
				if(level!=255)
					document.write("<tr><td colspan=20 ><b><br>Spell level "+level+"<\/b><\/td><\/tr>");
				else
					document.write("<tr><td colspan=20 ><b>Spells found:<\/b><\/td><\/tr>");
				document.write("<tr><td height=3><\/td><\/tr>");
				document.write("<tr align='center' bgcolor='#4F597B' class='header'><td width='31'><\/td><td align='left' width='*'>Name<\/td><td width='100'>Skill<\/td><td width='25'>Mana<\/td><td width='100'>Casting Time<\/td><\/tr>");
			}
			document.write("<tr align='center'><td bgcolor='#8F9AB7'><img alt='' border=0 src='"+tab_spell[i].gem+"'><\/td><td bgcolor='#9CADCE' align='left' onmouseover=\"this.bgColor='#B5C2DB';this.style.cursor=cursor;\" onmouseout=\"this.bgColor='#9CADCE';\" onclick=\"location.href='eq_spell_info.jsp?num="+tab_spell[i].num+"'\"><a href='eq_spell_info.jsp?num="+tab_spell[i].num+"'>"+tab_spell[i].name+"<\/a><\/td><td bgcolor='#8F9AB7'>"+tab_spell[i].skill+"<\/td><td bgcolor='#8F9AB7'>"+tab_spell[i].mana+"<\/td><td bgcolor='#8F9AB7'>"+tab_spell[i].casting_time+"<\/td><\/tr>");
		}
		document.write("<\/table>");
	}
	else
		document.write("<br><div align='center'>No spell found<\/div><br>");
	
	document.write("<\/td><\/tr><\/table><\/td><\/tr><\/table><\/td><\/tr><\/table>");
	document.write("<\/td><td width=6 height=8 style='background: url(img/right_shadow.gif)' valign='top'><img alt='' src='img/top_right_shadow.gif' width=6 height=8><\/td><\/tr>");
	document.write("<tr><td width=6 height='100%' style='background: url(img/right_shadow.gif)'><\/td><\/tr>");
	document.write("<tr>");
	document.write("<td width=6 height=8 style='line-height:0;background: url(img/bottom_shadow.gif)'><img alt='' src='img/bottom_left_shadow.gif' width=6 height=8><\/td>");
	document.write("<td width='*' height=8 style='line-height:0;background: url(img/bottom_shadow.gif)'><img alt='' src='img/bottom_shadow.gif' width=6 height=8><\/td>");
	document.write("<td width=6 height=8 style='line-height:0;background: url(img/bottom_shadow.gif)'><img alt='' src='img/bottom_right_shadow.gif' width=6 height=8><\/td>");
	document.write("<\/tr><\/table>");
}
</script>


<br><br><br>

<script type="text/javascript">set_forms();</script>
</body>
</html>
