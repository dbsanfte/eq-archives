<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<meta name="keywords" content="Determining hate from weapon damage (parses), vbulletin,forum,bbs,discussion,jelsoft,bulletin board,everquest,steel warrior,warrior,steelwarrior,thesteelwarrior,the steel warrior,warriors,call of heroes,worlds of warcraft,coh,wow,everquest,everquest 2,world of warcraft" />
	<meta name="description" content="[Archive] Determining hate from weapon damage (parses) The Library" />
		<title>Determining hate from weapon damage (parses) [Archive]  - The Steel Warrior</title>
	<link rel="stylesheet" href="http://www.thesteelwarrior.org/forum/archive/archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar"><a href="./">The Steel Warrior</a> &gt; <a href="f-1.html">The Steel Warrior - EverQuest</a> &gt; <a href="f-16.html">The Library</a> &gt; Determining hate from weapon damage (parses)</div>
<hr />
<div class="pda"><a href="?pda=1" rel="nofollow">PDA</a></div>
<p class="largefont">View Full Version : <a href="http://www.thesteelwarrior.org/forum/showthread.php?t=3789">Determining hate from weapon damage (parses)</a></p>
<hr />
<div id="pagenumbers"><b>Pages :</b>
[<b>1</b>]
<a href="t-3789-p-2.html">2</a>
<a href="t-3789-p-3.html">3</a>
<a href="t-3789-p-4.html">4</a>
<a href="t-3789-p-5.html">5</a>
<a href="t-3789-p-6.html">6</a>
</div>
<hr />

<div class="post"><div class="posttop"><div class="username">Brodda Thep</div><div class="date">10-20-2003, 11:13 PM</div></div><div class="posttext">After reading Furor's post on his DBotW and Vanazir parses I wondered how much agro the dual wielding option was really giving from its dps.  IT obviously out damaged the Vanazir but was that damage equating to more agro?  (I am of course ignoring  all procs.)<br />
<br />
I have a couple theories about how agro is determined using melee weapons.  ie how much hate is a weapons damage actually giving?<br />
<br />
Theory One:  (Proved correct.)<br />
Misses give as much hate as hits.<br />
<br />
Theory Two:  (Proved correct.)<br />
Offhand isn't nearly the agro as main hand.<br />
<br />
Theory Three: (This was proved incorrect.)<br />
Agro generated is only determined by the damage bonus of a weapon. <br />
<br />
To test this I used an SK and my monk.  I was using three different weapons.  A 8/20 1hb, a 13/50 two hander, and a 22/50 two hander.  The SK would tank with his back to the mob to avoid riposting.  For convenience I tested this on a Tarmok Beetle Herder in Fungus Grove.<br />
<br />
<br />
Proving Theory One:<br />
To prove theory one I had the SK pull a tarmok gatherer with two Terror of Terris, which increases hate by 510 according to Lucy.  Then I took the 13/50 and attacked until the mob turned onto me.  Then I repeated 5 times.  Attack is defined as a miss or a hit.<br />
<br />
Test One:<br />
11 attacks till it turned on me.<br />
9 hits<br />
2 misses<br />
842 damage<br />
<br />
Test Two:<br />
11 attacks till it turned on me.<br />
10 hits<br />
1 miss<br />
949 damage<br />
<br />
Test Three:<br />
11 attacks till it turned on me<br />
6 hits<br />
5 misses<br />
654 damage<br />
<br />
Test Four:<br />
11 attacks till it turned on me<br />
6 hits<br />
5 misses<br />
613 damage<br />
<br />
Test Five:<br />
11 attacks till it turned on me<br />
7 hits<br />
4 misses<br />
633 damage<br />
<br />
I wanted these tests to be very short so that I could get large variances in hit %.  As you can see the mob always turned on me at 11 attacks.  <br />
<br />
So from this I would say that a miss is  the same agro that a hit is regardless of damage done.<br />
<br />
<br />
Proving Theory Two:<br />
To prove this theory I had the SK pull with two Terror of Terris.  I had a bio orb for whichever hand I didn't want to attack with and a 8/20 <br />
<br />
1hb in the other.<br />
<br />
Primary Agro:<br />
Test One:<br />
28 attacks till it turned on me<br />
19 hits<br />
9 misses<br />
780 damage<br />
<br />
Test Two:<br />
30 attacks till it turned on me (I triple attacked last round)<br />
18 hits<br />
12 misses<br />
861 damage<br />
<br />
Secondary Agro:<br />
Test One:<br />
70 attacks till it turned on me<br />
50 hits<br />
20 misses<br />
1465 damage<br />
<br />
Test Two:<br />
70 attacks till it turned on me<br />
52 hits<br />
18 misses<br />
1468 damage<br />
<br />
As you can see it took far more damage and attacks to get the mob turned on me when I was using the baton in the offhand.  I had to make 2.5 more attacks from the offhand and do nearly twice the dps to generate the same agro that the primary hand generated.  This is the primary reason why dual wielding sucks for agro.  I had originally planned to do this test having the SK cast FIVE terror of terris and then engaging.  But when I switched to secondary the mob would not have turned onto me before dieing.  So I had to shorten it greatly.<br />
<br />
<br />
Not Proving Theory Three<br />
<br />
To try and prove this theory I used two different two handers with the same delay.  If I was right then the mob should have turned after the same number of attacks even though one had a greater damage rating.  So I had the SK pull with Terror of Terris and then cast four more times.<br />
<br />
13/50 weapon:<br />
Test 1:<br />
34 attacks till it turned on me<br />
21 hits<br />
13 misses<br />
2096 damage<br />
<br />
Test 2:<br />
34 attacks till it turned on me<br />
19 hits<br />
15 misses<br />
1908 damage<br />
<br />
Test 3:<br />
35 attacks till it turned on me<br />
22 hit<br />
13 misses<br />
2273 damage<br />
<br />
Test 4:<br />
34 attacks till it turned on me<br />
22 hits<br />
12 misses<br />
2227 damage<br />
<br />
Test 5:<br />
35 attacks till it turned on me<br />
23 hits<br />
12 misses<br />
2123 damage<br />
<br />
22/50 weapon:<br />
Test 1:<br />
30 attacks till it turned on me<br />
23 hits<br />
7 misses<br />
2889 damage<br />
<br />
Test 2:<br />
31 attacks till it turned on me<br />
21 hits<br />
10 misses<br />
2366 damage<br />
<br />
Test 3:<br />
30 attacks till it turned on me<br />
20 hits<br />
10 misses<br />
2595 damage<br />
<br />
Test 4:<br />
31 attacks till it turned on me<br />
18 hits<br />
13 misses<br />
2229 damage<br />
<br />
Test 5:<br />
30 attacks till it turned on me<br />
19 hits<br />
11 misses<br />
2698 damage<br />
<br />
As you can see it took 34 attacks for a 13/50 weapon and 30 attacks for a 22/50 weapon for the mob to turn onto me.  <br />
<br />
Just for the hell of it I took out my 54/30 weapon to see how long it would take to get agro.  Unfortunately it procced a 3 second 200 dd stun before I got agro.  HOWEVER, I did 3155 damage in melee before the proc and it didn't turn onto me.  Once I procced I turned off attack.  The mob CONTINUED to beat on the SK.  After two rounds of melee onto the SK I turned attack back on and had agro on the very next hit.  <br />
<br />
What Does All This Mean?<br />
<br />
Well we can now say that each swing of the weapon adds a set amount of hate.  All of my parses support this.  To make this information useful we need to figure out how to determine how much hate a weapon adds per swing.  I believe it is based on the damage bonus of a weapon and the damage rating of the weapon.<br />
<br />
We can start by looking at Terror of Terris. This is said to add 510.  But we can just think of this as one ToT of agro.  The number doesn't really matter, but for the people that have trouble thinking with pure variables I will stick with 510 agro.  So if you look at the first test you see that each swing adds:  2 x 510 / 11 = 93-102 agro. (I don't want to explain why there is a range there.  But it needs to be there. After all it could have only needed 10.0000001 swings to get agro)  To  verify this we can take the third tests.  5 x 510 / 34 = 75 - 77 agro.  They don't match up, so these ranges are wrong.  Well, this is expected.  Many mobs have their initial hate capped.  To prove this have a shaman go slow a skeleton in karnors basement without first agroing it and run.  It will stop and attack the first person it comes to.  Next, have the same shaman walk up to the mob and let it start hitting the shaman.  Now slow it. The mob will be stuck to the shaman for quite some time.  <br />
<br />
So now the equation is Mod_ToT + ToT = 11*X*ToT and Mod_ToT + 4*ToT = 34*X*ToT.  If we sub in 510 for ToT (This is just to simplify things.) <br />
<br />
Mod_ToT + 510 = 5610 * X  and Mod_ToT + 2040 = 17340 * X  Solving for Mod_ToT and substituting we can find that X = 0.13.  So each swing equals approximately 0.13 ToTs or 66 hate.  All the previous was to find out how much hate was actually generated by pulling with ToT and the subsequent ToTs. BTW MoD_ToT (the ToT used to pull this particular mob) gave 216 hate. (This is NOT exact btw I didn't deal with that pesky range, but it is good enough to get started with.)  But now we have to go back and put inthe possible ranges.  I am going to skip a lot of proof work here and just lay it down for the three weapons I used.  The actual hate value for each weapon is somewhere between those ranges.<br />
<br />
Weapon  Hate Range<br />
13/50   66-73<br />
22/50   75-78<br />
8/20    25-27<br />
8/20Off 10-11<br />
<br />
What I hope to do is find some sort of formula using damage, delay, and/or damage bonus that can be used to determine how much hate each swing of a weapon gives.<br />
<br />
Damage Bonus + Damage is pretty close.  I took out a 40 damage 36 delay weapon which has a damage bonus of 39.  Which according to this formula would give 39 + 40 = 79 hate.  Which means it would take 29 swings to take agro off of an SK that pulled a Tarmok Battle Herder with ToT and then cast ToT four times.  I tested it and it took 30 swings.  BUT the last attack round was a double attack so that formula works for that weapon.  But that falls apart when you start looking at one handers.<br />
<br />
Perhaps they use a modified formula for one handers.  Say 1.25 * damage + damage bonus.<br />
<br />
To test this I used a Stone Etched Mallet 28/28 making sure that it didnt proc.  And the SK ToT pulled and then ToTed once more.  <br />
<br />
Test in Offhand:<br />
22-23 swings to get agro for a agro per swing of 33.<br />
<br />
Test in Primary<br />
15-16 swings to get agro for a agro per swing of 45.<br />
<br />
Both of those data points fit, BUT my first data point with the 8/20 does not fit.<br />
<br />
Summary:<br />
<br />
Each swing of a weapon gives a set amount of hate regardless of whether or not you hit the mob.  A critical hit for 700 damage is no more hate than a hit for 40 damage.  It seems that the amount of hate is determined similar to the values used to determine DPS for a given weapon combo.  (damage * modifier + damage bonus)  Except in this case the modifier is VERY low.  IN damamge calculations you will have a modifier of 3-4 anymore, but in hate calculations it seems to be around 1.  So damage bonus is a significant contributor to hate.  Thus why off hand weapon generates much less agro than primary hand weapons.  (Of course being swung less often is also a factor.)  As you get better weapons your offhand will perform better hate wise in comparison to your main weapon.  THis is why a less damaging two handed weapon can out taunt a more damaging one handed combo.<br />
<br />
This is far from complete though.  Different mobs need to be checked, Different weapon combos need to be checked.  Lots of stuff.  If anyone is up to the task I would welcome input.  There are a couple of things that make this hard to test.  If I was to do it over again I would have found a KOS mob to test on so I could agro through proximity instead of using a spell.  Also you need to set up a baseline to make sure that the spell you are using to get agro is adding hate in a linear fashion.  This means setting up a baseline and checking to see that it takes twice as many swings to get agro from a caster of some sort if they cast their hate spell twice as much.  Or you could do what I did, which is a pain and prone to error.  As I said earlier I wouldn't repeat the test in the manner I did it in.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Synapticus</div><div class="date">10-20-2003, 11:39 PM</div></div><div class="posttext">There are some iffy things about theory #1 &quot;Misses give as much hate as hits&quot;.  Try repeating the test with two players, both wielding the same weapon, but both with the different weapon skills.  My intuition wants me to believe the one with the higher skill will end up with aggro after the same number of swings (assuming the more skilled combatant will land more of them.)  Maybe test it that way?<br />
It has also been shown that Terror spells give wacky amounts of aggro at range.  some claim that they dont work at range at all.  another thing to consider.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brodda Thep</div><div class="date">10-20-2003, 11:42 PM</div></div><div class="posttext">Actually, I was looking for a slash weapon that was monk useable (or piercing) I know there used to be some around.  Any still exist?<br />
<br />
But the test is completley repeatable.  There is nothing wacky about it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Eoden</div><div class="date">10-20-2003, 11:53 PM</div></div><div class="posttext">My theory on hate per swing is that the hate generated by each swing is effectively the potential damage of that swing which would support both the results of Brodda's test aswell as having a different result if the same weapon was wielded by someone with a different skill level or different amount of atk.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Phantron</div><div class="date">10-21-2003, 12:01 AM</div></div><div class="posttext">I'm pretty sure aggro generated per swing is just based on the potential damage on your weapon, which is obviously a function of its damage and damage bonus.  It is entirely possibly that there are separate formulas used for 1H versus 2H weapons though.  The actual damage you deal out is pretty much irrelevant.  For example you can attack a mob while it's enraged to keep aggro, whereas if it's off you'd lose aggro, but you're doing 0 damage to the mob even when you continue to swing.  You can be heavily attack debuffed or simply against high AC mobs (Luclin comes to mind) but it isn't any harder to get aggro, and likewise having Aura of Hate/Avatar/Ferocity doesn't appear to get you more aggro.  Hitting a mob for 652 with a critical hit with Vanazir sure doesn't appear to get their attention any more than other hits.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brutul</div><div class="date">10-21-2003, 12:05 AM</div></div><div class="posttext">My monk still uses Pestilence Scythe (http://lucy.fnord.net/item.html?id=12237) for the necro look.  I'm sure the 10/50 with zero 2hs skill is uber taunt 8).<br />
<br />
Haven't had a chance to read through the post yet, but looking forward to it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Kassel</div><div class="date">10-21-2003, 12:21 AM</div></div><div class="posttext">Crits not affecting the hate generated would fall in line with the castery end of things. Pretty sure I remember seeing a set of tests on graffe's that indicated as much, so crits are aggro-free damage. Great for casters, suck for warriors.<br />
<br />
The miss finding is interesting, which again suggests that melee aggro isn't all that different from caster aggro -- I believe the same tests showed that full resists generated just as much aggro as a full hit.<br />
<br />
It might be interesting (if a bit difficult) to test whether or not the extra attacks from double attack/flurry factor in on aggro. <br />
<br />
Your skeleton example from karnors doesn't quite hold, as it aggroing on whatever it runs into isn't a cap on initial aggro, it's the usual undead hate.<br />
<br />
The Mod_ToT is most likely range aggro digging in a bit.<br />
<br />
One thing that's certain from the graffe tests is that aggro does not decay. It may have a cap point, but you aren't likely to hit it -- if they're using 32 bit values for hate, you could dump out 20k hate a second for 59 1/2 hours before you hit the limit. I recall some anecdotal evidence that there might be a bug with Boggle, letting it wrap around the negative, but it certainly doesn't happen with Concussion.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brodda Thep</div><div class="date">10-21-2003, 01:08 AM</div></div><div class="posttext">My theory on hate per swing is that the hate generated by each swing is effectively the potential damage of that swing which would support both the results of Brodda's test aswell as having a different result if the same weapon was wielded by someone with a different skill level or different amount of atk.<br />
<br />
<br />
Not quite.  In hate values I found that the hate generated depends HEAVILY on the damage bonus.  Or rather the damage component of a weapon is often close to or much smaller (as in the case of 12/50 weapons) than the damage bonus.  <br />
<br />
Max damamge is about 5.x * damage+ damage bonus of a weapon.  While I am theorizing the hate generated by each swing is approximately 1 * damage + damage bonus.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brodda Thep</div><div class="date">10-21-2003, 01:14 AM</div></div><div class="posttext">Your skeleton example from karnors doesn't quite hold, as it aggroing on whatever it runs into isn't a cap on initial aggro, it's the usual undead hate.<br />
<br />
The Mod_ToT is most likely range aggro digging in a bit.<br />
<br />
<br />
That doesn't hold about the proximity agro.  If it was then simply getting agro first through proximity and THEN slowing wouldn't make the skelly stick to the shaman like glue.  While slowing before initially getting on the hate list is almost NO agro.  This I think is what people see a lot when they talk about proximtiy agro.  Well that and certain mobs giving people large amounts of negative hate bonus for being out of range.  <br />
<br />
Though, saying that it might be because range actually reducing the hate given for an action is interesting.  I always assumed it was static.  For instance, start a rotation on a tank while doing AoW, after the first CH lands walk up to AoW.  He will smash you into the ground.  But if you stay OOR of his melee he won't summon you.<br />
<br />
Still, I would like to know if range actually does affect hate like that.  I was under the impression it worked a different way.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Ladas Sindarin</div><div class="date">10-21-2003, 10:07 AM</div></div><div class="posttext">Very interesting Brodda... but one thing I see that I wonder if you can rule out with more testing...<br />
<br />
510 Hate isn't very much, and in your short tests, even though the damage varies soime (1h mainhand), the damage differences aren't more than a lucky hit or two from a monk your level.  How does the hit-miss distribution for those attacks work per round... ie, the tests where it took 900 damage to turn the mob, where you last four of the 11 swings hits that did 300 damage?<br />
<br />
I suspect you are right regarding hits and misses having the same aggro, but given how short your fights are (and I can't see the data), its something to rule out.<br />
<br />
Also, Raaj and I did some testing similiar to this in PoV on one of the two guards in the building in Zone in.  (We were looking at how much druid healing would be required to pull aggro from a warrior using melee vs a ranger using FL/Ensnare, then the success rate of warrior Taunt on a 60th level mob).  But, with a Shaman to slow and heal the SK, you could easily get a bigger sample with higher hate values to overcome.  That should help you narrow down the modifiers for 1H and 2H.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Solinar</div><div class="date">10-21-2003, 10:18 AM</div></div><div class="posttext">I totally agree that weapon damage hate is most likely based on some % of potential damage done and not actual damage.<br />
<br />
<br />
Well, this is expected. Many mobs have their initial hate capped. To prove this have a shaman go slow a skeleton in karnors basement without first agroing it and run. It will stop and attack the first person it comes to. Next, have the same shaman walk up to the mob and let it start hitting the shaman. Now slow it. The mob will be stuck to the shaman for quite some time.<br />
<br />
I believe you are mis-interpreting an observed phenomenon.  Mobs aggro changes dependent on some characteristic or flag.  The dumber they are, the more likely they are to ignore hate totals and just attack the closest person.  Its commonly referred to as &quot;undead aggro&quot;.  Undead are stupid and, like your karnors experience, will often just attack the closest person unless a HUGE hate disparity is built up.  I dont know that its a matter of hate capping (although that certainly is possible) but your experience was a case of undead aggro methinks, not hate capping.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Drunken Mick</div><div class="date">10-21-2003, 11:21 AM</div></div><div class="posttext">This is some VERY interesting developmental stuff Brodda, it does clue in to why fast weapons in the primary aid in aggro vs heavier damaging ones.  Anyone remember wurmslayer?? :P.  Just that the paradigm might be different than what we suspected.  This would also lend quite a bit of credence to the difficulty monks have at avoiding aggro.  They swing a LOT and typically have faster weapons than warriors.  Any rangers out there have that 5/14 whip to try and use to test?? :P<br />
<br />
Moss covered twig?</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Brodda Thep</div><div class="date">10-21-2003, 12:16 PM</div></div><div class="posttext">I dont know that its a matter of hate capping (although that certainly is possible) but your experience was a case of undead aggro methinks, not hate capping.<br />
That doesn't explain the drastic change in behavior.<br />
<br />
Look.  I exped down in karnors for ages.  If my shaman cast slow before getting agroed it would then run to him and my monk would take one swing and it would attack the monk.  ANd the shaman was closest to the mob still.  However, if the mob agroed my shaman before the slow landed then I would have to sit there and swing at the mob for quite some time before it would turn.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Mokor Leadheaad</div><div class="date">10-21-2003, 01:06 PM</div></div><div class="posttext">weighted ax is great for this. potential damage is greater then 510. pull with one tot or 2 should get agro in 2 swings or 4. depending on tots used. could do it till you mis twice in a row if you still get agro then miss generate agro.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">Oron</div><div class="date">10-21-2003, 02:08 PM</div></div><div class="posttext">Thanks for doing this test Brodda.  Very interesting read!  :)</div></div><hr />


<div id="copyright">vBulletin v3.5.0, Copyright &copy;2000-2005, Jelsoft Enterprises Ltd.</div>
</div>
</body>
</html>