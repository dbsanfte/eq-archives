<HTML><HEAD><TITLE>HackersQuest Discussion Board - Reply to Topic</TITLE>


</HEAD>
 <BODY bgcolor="#000000"  text="#ffffff" link="#00ff00" alink="#00ff00" vlink="#00ff00" marginheight=0 marginwidth=0 topmargin=0 leftmargin=0 rightmargin=0>
<FONT SIZE="2" FACE="Verdana, Arial">

</font>
<table border=0 width=95% align=center>
<TR><TD>
<A HREF="http://www.hackersquest.org/cgi-bin/Ultimate.cgi?action=intro&BypassCookie=true"><IMG SRC="http://www.hackersquest.org/ubb/../images/hq-title-shock.gif"  BORDER=0></A></td>
<td align=center>
<table border=0>
<TR><TD><FONT Face="Verdana, Arial" size="2"><B>Forum:</B></font></td><TD><FONT Face="Verdana, Arial" size="2">Dark Age of Camelot</FONT></td></tr>
<TR><TD><FONT Face="Verdana, Arial" size="2"><B>Topic:</B></font></td><TD><FONT Face="Verdana, Arial" size="2">Automatic Update script..</FONT></td></tr></table>
</td></tr>
<tr><td colspan=2><FONT SIZE="1" FACE="Verdana, Arial"><A HREF="http://www.hackersquest.org/cgi-bin/Ultimate.cgi?action=agree">Want to register?</a></FONT>
</td></tr>
</table>
<FORM ACTION="http://www.hackersquest.org/cgi-bin/postings.cgi" NAME="REPLIER" METHOD="POST">
<center>

<table border=0 cellpadding=4 cellspacing=1 width=95%>
<tr bgcolor="#000000">
<td valign=top>
<FONT SIZE="2" FACE="Verdana, Arial" COLOR="#00ff00">
Who Can Post?
</font>
</td>
<td valign=top><FONT SIZE="2" FACE="Verdana, Arial" COLOR="#00ff00">
Any registered users may post a reply.
</font>
</td></tr>

<tr bgcolor="#000000">
<td valign=top><FONT SIZE="2" FACE="Verdana, Arial" COLOR="#00ff00">
About Registration
</font></td><td valign=top><FONT SIZE="2" FACE="Verdana, Arial" COLOR="#00ff00">
You must be registered in order to post a topic or reply in this forum.</font></td></tr>
<tr bgcolor="#1f1f1f"><td valign=top>
<FONT SIZE="2" FACE="Verdana, Arial"><B>Your UserName:</B></FONT></td>
<td valign=top>
<INPUT TYPE="TEXT" NAME="UserName" VALUE="" SIZE=25 MAXLENGTH=25>
</td>
</tr>


<tr bgcolor="#1f1f1f">
<td valign=top>
<FONT SIZE="2" FACE="Verdana, Arial"><B>Your Password:</B></FONT></td>
<td valign=top><INPUT TYPE="PASSWORD" NAME="Password" VALUE="" SIZE=13 MAXLENGTH=13>&nbsp;&nbsp;<FONT SIZE="1" FACE="Verdana, Arial"><A HREF="http://www.hackersquest.org/cgi-bin/Ultimate.cgi?action=lostpw">Forget your password?</A></font></td></tr>

<tr bgcolor="#1f1f1f">
<td valign=top>
<FONT SIZE="2" FACE="Verdana, Arial"><B>Message Icon:</B></FONT></td>
<td><INPUT type="radio" name="MsgIcon" value="1" CHECKED>&nbsp;&nbsp;<IMG SRC="http://www.hackersquest.org/ubb/icons/icon1.gif" HEIGHT=15 WIDTH=15 ALIGN=ABSCENTER>&nbsp;&nbsp;&nbsp;&nbsp;<INPUT type="radio" name="MsgIcon" value="10"  >&nbsp;&nbsp;<IMG SRC="http://www.hackersquest.org/ubb/icons/icon10.gif" HEIGHT=15 WIDTH=15 ALIGN=ABSCENTER>&nbsp;&nbsp;&nbsp;&nbsp;<INPUT type="radio" name="MsgIcon" value="11"  >&nbsp;&nbsp;<IMG SRC="http://www.hackersquest.org/ubb/icons/icon11.gif" HEIGHT=15 WIDTH=15 ALIGN=ABSCENTER>&nbsp;&nbsp;&nbsp;&nbsp;<INPUT type="radio" name="MsgIcon" value="12"  >&nbsp;&nbsp;<IMG SRC="http://www.hackersquest.org/ubb/icons/icon12.gif" HEIGHT=15 WIDTH=15 ALIGN=ABSCENTER>&nbsp;&nbsp;&nbsp;&nbsp;<INPUT type="radio" name="MsgIcon" value="13"  >&nbsp;&nbsp;<IMG SRC="http://www.hackersquest.org/ubb/icons/icon13.gif" HEIGHT=15 WIDTH=15 ALIGN=ABSCENTER>&nbsp;&nbsp;&nbsp;&nbsp;<INPUT type="radio" name="MsgIcon" value="14"  >&nbsp;&nbsp;<IMG SRC="http://www.hackersquest.org/ubb/icons/icon14.gif" HEIGHT=15 WIDTH=15 ALIGN=ABSCENTER>&nbsp;&nbsp;&nbsp;&nbsp;<INPUT type="radio" name="MsgIcon" value="2"  >&nbsp;&nbsp;<IMG SRC="http://www.hackersquest.org/ubb/icons/icon2.gif" HEIGHT=15 WIDTH=15 ALIGN=ABSCENTER>&nbsp;&nbsp;&nbsp;&nbsp;<BR><INPUT type="radio" name="MsgIcon" value="3"  >&nbsp;&nbsp;<IMG SRC="http://www.hackersquest.org/ubb/icons/icon3.gif" HEIGHT=15 WIDTH=15 ALIGN=ABSCENTER>&nbsp;&nbsp;&nbsp;&nbsp;<INPUT type="radio" name="MsgIcon" value="4"  >&nbsp;&nbsp;<IMG SRC="http://www.hackersquest.org/ubb/icons/icon4.gif" HEIGHT=15 WIDTH=15 ALIGN=ABSCENTER>&nbsp;&nbsp;&nbsp;&nbsp;<INPUT type="radio" name="MsgIcon" value="5"  >&nbsp;&nbsp;<IMG SRC="http://www.hackersquest.org/ubb/icons/icon5.gif" HEIGHT=15 WIDTH=15 ALIGN=ABSCENTER>&nbsp;&nbsp;&nbsp;&nbsp;<INPUT type="radio" name="MsgIcon" value="6"  >&nbsp;&nbsp;<IMG SRC="http://www.hackersquest.org/ubb/icons/icon6.gif" HEIGHT=15 WIDTH=15 ALIGN=ABSCENTER>&nbsp;&nbsp;&nbsp;&nbsp;<INPUT type="radio" name="MsgIcon" value="7"  >&nbsp;&nbsp;<IMG SRC="http://www.hackersquest.org/ubb/icons/icon7.gif" HEIGHT=15 WIDTH=15 ALIGN=ABSCENTER>&nbsp;&nbsp;&nbsp;&nbsp;<INPUT type="radio" name="MsgIcon" value="8"  >&nbsp;&nbsp;<IMG SRC="http://www.hackersquest.org/ubb/icons/icon8.gif" HEIGHT=15 WIDTH=15 ALIGN=ABSCENTER>&nbsp;&nbsp;&nbsp;&nbsp;<INPUT type="radio" name="MsgIcon" value="9"  >&nbsp;&nbsp;<IMG SRC="http://www.hackersquest.org/ubb/icons/icon9.gif" HEIGHT=15 WIDTH=15 ALIGN=ABSCENTER>&nbsp;&nbsp;&nbsp;&nbsp;<BR></td></tr>
<TR bgcolor="#1f1f1f"><TD valign=top>
<FONT SIZE="2" FACE="Verdana, Arial"><B>Your Reply:</B></FONT>
<p><BR>
<FONT SIZE="1" FACE="Verdana, Arial" COLOR="#00ff00">
*HTML is OFF<BR>
<A HREF="http://www.hackersquest.org/ubb/ubbcode.html" target=_blank>*UBB Code is ON</A><BR>
<p><A HREF="http://www.hackersquest.org/ubb/smilies.html" target=_blank>Smilies Legend</A></font>
</td>
<td>
<TEXTAREA NAME="ReplyMessage" ROWS=10 COLS=45 WRAP="VIRTUAL">[QUOTE]Originally posted by SirPsycho:
[B]Little gift for everyone.. Here is a script I wrote that will automatically download and update your OE with a new version if it is available and then run odinseye for you.. I hope all this pastes ok..[/B][/QUOTE]

</TEXTAREA>
</td></tr>
<TR bgcolor="#1f1f1f">
<td valign=top>
<FONT SIZE="2" FACE="Verdana, Arial">
<B>Options</B>
</FONT></td>
<td valign=top><FONT SIZE="1" FACE="Verdana, Arial">
<INPUT TYPE="CHECKBOX" NAME="DisableSmilies" VALUE="yes"> <b>Disable Smilies in This Post</b>. <BR><INPUT TYPE="CHECKBOX" NAME="Signature" VALUE="yes"> <B>Show Signature:</B> include your profile  signature.  Only registered users may have signatures.
</font>
</td>
</tr>
<tr bgcolor="#000000"><td colspan=2>
<FONT SIZE="1" FACE="Verdana, Arial" COLOR="#00ff00">*If HTML and/or UBB Code are enabled, this means you can use HTML and/or UBB Code in your message.</FONT>
</td></tr>
</table>

</center>
<P>
<INPUT TYPE="HIDDEN" NAME="action" VALUE="postreply">
<INPUT TYPE="HIDDEN" NAME="TopicSubject" VALUE="Automatic Update script..">
<INPUT TYPE="HIDDEN" NAME="forum" VALUE="Dark Age of Camelot">
<INPUT TYPE="HIDDEN" NAME="number" VALUE="11">
<INPUT TYPE="HIDDEN" NAME="topic" VALUE="000070.cgi">
<CENTER>
<p>
<INPUT TYPE="Submit" NAME="SUBMIT" VALUE="Submit Reply">

<INPUT TYPE="RESET" NAME="RESET" VALUE="Clear Fields">
</form>
<FONT SIZE="2" FACE="Verdana, Arial" COLOR="#00ff00">
<P>
If you have previously registered, but forgotten your password, <A HREF="http://www.hackersquest.org/cgi-bin/Ultimate.cgi?action=lostpw">click here</A>.
</font>

<P><FONT SIZE="2" FACE="Verdana, Arial">
<TABLE BORDER=0 cellpadding=4 border=0 cellspacing=1 WIDTH="95%"><TR bgcolor="#000000"><TD COLSPAN=2><CENTER><FONT SIZE="2" COLOR="#00ff00" FACE="Verdana, Arial">T O P I C  &nbsp;&nbsp;&nbsp; R E V I E W</font></CENTER></TD></TR><TR bgcolor="#1f1f1f"><TD valign=top><FONT SIZE="2" FACE="Verdana, Arial">SirPsycho</FONT></TD><TD><FONT SIZE="2" FACE="Verdana, Arial">Little gift for everyone.. Here is a script I wrote that will automatically download and update your OE with a new version if it is available and then run odinseye for you.. I hope all this pastes ok..<BR>----------------------------<BR><BLOCKQUOTE><font size="1" face="Verdana, Arial">code:</font><HR><pre><BR>#!/bin/sh<P># make sure these things are correct<P># This is the directory to compile the binaries into<BR>BASEDIR=/root/odins<P># This is the directory to download files into<BR>DOWNLOADDIR=/root/download<P># Where QT is located<BR>QTDIR=/usr/lib/qt-3.0.1<BR>#####################################################<BR>mkdir -p $DOWNLOADDIR &gt; /dev/null 2&gt; /dev/null<BR>mkdir -p $BASEDIR &gt; /dev/null 2&gt; /dev/null<BR>touch $DOWNLOADDIR/compiled.ver<BR>touch $DOWNLOADDIR/latest.ver<P>UPDATE=no<BR>if [ "$1" = "update" ]; then<BR>  UPDATE=yes<BR>fi<BR>wget -q -O $DOWNLOADDIR/latest.ver <A HREF="http://daoc.hackersquest.org/VERSION" TARGET=_blank>http://daoc.hackersquest.org/VERSION</A> <BR>COMPILED=`cat $DOWNLOADDIR/compiled.ver`<BR>LATEST=`cat $DOWNLOADDIR/latest.ver`<BR>if  [ "$LATEST" != "$COMPILED" ]; then<BR>  UPDATE=yes<BR>fi<P>if [ "$UPDATE" = "yes" ]; then<BR>  wget -q -O $DOWNLOADDIR/odinseye.tar.gz <A HREF="http://daoc.hackersquest.org/src/odinseye-latest.tar.gz" TARGET=_blank>http://daoc.hackersquest.org/src/odinseye-latest.tar.gz</A> <BR>  wget -q -O $DOWNLOADDIR/daoccrypt.tar.gz <A HREF="http://www.hackersquest.org/daoc/daoccrypt.tar.gz" TARGET=_blank>http://www.hackersquest.org/daoc/daoccrypt.tar.gz</A> <P>  MYDIR=odinseye.$$<P>  mkdir -p $BASEDIR/$MYDIR/maps<BR>  cp -p $BASEDIR/OE/maps/* $BASEDIR/$MYDIR/maps/<BR>  rm -f $BASEDIR/OE/Capture-*<BR>  rm $BASEDIR/OE &gt; /dev/null 2&gt; /dev/null<BR>  cd $BASEDIR<BR>  ln -s $BASEDIR/$MYDIR OE<P>  cd $BASEDIR/OE<BR>  tar -zxvf $DOWNLOADDIR/odinseye.tar.gz<BR>  tar -zxvf $DOWNLOADDIR/daoccrypt.tar.gz<BR>  cp $DOWNLOADDIR/odinseye.tar.gz .<BR>  cp $DOWNLOADDIR/daoccrypt.tar.gz .<P>  $QTDIR/bin/qmake odinseye.pro<BR>  make<BR>  echo $LATEST &gt; $DOWNLOADDIR/compiled.ver<P>fi<P>cd $BASEDIR/OE/<BR>ifconfig eth0 promisc<BR>ulimit -c unlimited<BR>./odinseye --update<BR></pre><HR></BLOCKQUOTE></FONT></TD></TR><TR bgcolor="#1f1f1f"><TD valign=top><FONT SIZE="2" FACE="Verdana, Arial">Kreepin</FONT></TD><TD><FONT SIZE="2" FACE="Verdana, Arial">Hahaha this is hilarious, i just made one and was deciding wether i should post it..oo well yours is better ..mines more suited for my machine...</FONT></TD></TR><TR bgcolor="#1f1f1f"><TD valign=top><FONT SIZE="2" FACE="Verdana, Arial">fryfrog</FONT></TD><TD><FONT SIZE="2" FACE="Verdana, Arial">deleted for uselessness, see below post instead :)<p>[This message has been edited by fryfrog (edited 12-23-2001).]</FONT></TD></TR><TR bgcolor="#1f1f1f"><TD valign=top><FONT SIZE="2" FACE="Verdana, Arial">fryfrog</FONT></TD><TD><FONT SIZE="2" FACE="Verdana, Arial">options:  update, noupdate, clean<P>man, that was a BITCH to get to post... and i know from the trying to copy the last guys code that it is really hard (becuase it doesn't include any &lt;cr&gt; carrige returns...)<P>so here is a link to the file from MY home web server:<BR> <A HREF="http://fryfrog.dyndns.org:81/odinseye.script" TARGET=_blank>http://fryfrog.dyndns.org:81/odinseye.script</A><P>i have cleaned up the script a tad (pulled out my debugging stuff).<P>here is a list of what i think this does a little better than the original script:<BR>1.) you can choose update OR noupdate options (i think the other one only had the "update" option)<BR>2.) if you choose noupdate, it still checks for a new version and gives you a chance to download/compile it<BR>3.) more output is directed to /dev/null, so the user doesn't see it untar'ing, compiling, etc...<BR>4.) a little better if checking in a few places<BR>5.) more verbose output.  it tells you what its doing, and gives you some info about what its doing... and versions of stuffs...<BR>6.) it uses the redhat "action" so things look very nice (ie "Downloading new files:        [ OK ]")<BR>7.) if the file "odinseye" does NOT exist where it is supposed to, the program tells you.  this would really only happen if you ran it for the first time with the "noupdate" option... but it was fun to add :)<BR>**8.) trav from #odinseye suggested i add something to preserve the items.db file, i think i added this.<BR>**9.) there is a new option, "clean" which deletes everything and starts over.  the reason for this is that his script makes a LOT of dirs with stuff in them :)<BR>**10.) clean is now SMART. it ONLY removes the dirs that are NOT needed (ie, it deletes all but OE (and the symlinks target)).  clean also does NOT remove the download dir, as it contains a few semi-needed files.<BR>**11.) it now SETS the QTDIR and THEN unsets it to what you specify at the top of the script (for me, oe uses qt-3.0.1 but seq wants qt-2.3.2)<BR>**12.) items.db preservation IS working :)<BR>**13.) instead of using that crazy ass $$ which is a sortof random number (random when the script starts, fixed during the run of the script) i switched to the date-time.  that way, if you WANT to revert it is a LOT easier to choose what to revert to :)<BR>**14.) lots of comments, just in case you want to read what the heck it does<BR>**15.) i put the original author's name (and mine) at the top :)<BR>**16.) added a "help" option<BR><p>[This message has been edited by fryfrog (edited 12-23-2001).]</FONT></TD></TR><TR bgcolor="#1f1f1f"><TD valign=top><FONT SIZE="2" FACE="Verdana, Arial">fryfrog</FONT></TD><TD><FONT SIZE="2" FACE="Verdana, Arial">i am such a prostitute, i think this script is really cool... and i'm bumping my own thread cause i'm a tool :)</FONT></TD></TR><TR bgcolor="#1f1f1f"><TD valign=top><FONT SIZE="2" FACE="Verdana, Arial">fryfrog</FONT></TD><TD><FONT SIZE="2" FACE="Verdana, Arial">okay, i really enjoyed working on this script... and i have made even MORE changes!<P>1.) it now detects redhat, and if it does it runs the prettier version.  if it doesn't, it should run the unpretty version.<BR>2.) i formatted the whole thing very well (2 spaces for each thing) so it should be a lot easier to read.  i also commented a large amount of the code, in case someone wants to read it.<BR>3.) it now warns if you have more than (a set number by user) XXX old versions of Odin's Eye compiled but unused.<BR>4.) added variables at the top for the download URLs, in case they ever change.<BR>5.) if the dirs don't exist, it handles this much better now (ie, the first time the script is run).<BR>6.) it handles (i tested this) multi-nested dirs well (ie, /root/odinseye AND /root/test/test/odinseye all worked fine)<BR>7.) it runs (on my box at least) in redhat mode AND non-redhat mode.  note:  these were BOTH tested on my redhat box, i just forced it to use non-redhat mode to test non-redhat mode :)</FONT></TD></TR><TR bgcolor="#1f1f1f"><TD valign=top><FONT SIZE="2" FACE="Verdana, Arial">SirPsycho</FONT></TD><TD><FONT SIZE="2" FACE="Verdana, Arial">Heh..<BR>Not having returns must be something with UBB and the Code tags.. <P>I am gonna have to see what Redhat modes does when i get home =)<P>So now are you gonna make it so that the auto-update script will auto-update itself?<BR> <IMG SRC="http://www.ethernalquest.com/ubb/wink.gif"></FONT></TD></TR><TR bgcolor="#1f1f1f"><TD valign=top><FONT SIZE="2" FACE="Verdana, Arial">fryfrog</FONT></TD><TD><FONT SIZE="2" FACE="Verdana, Arial">i can reply to you AND bump my own (and your) script at the same time!  i guess i could have it auto update the script itself, but i don't know if i'll be making many more changes to it, now that it works :)<P>besides, since i copied your checking / update code, i am not sure i could get version checking to work (quickly) and download it and stuff :)</FONT></TD></TR><TR bgcolor="#1f1f1f"><TD valign=top><FONT SIZE="2" FACE="Verdana, Arial">darkblade</FONT></TD><TD><FONT SIZE="2" FACE="Verdana, Arial">forgive my ignorance.. but how do i run the script?  <IMG SRC="http://www.ethernalquest.com/ubb/smile.gif"></FONT></TD></TR><TR bgcolor="#1f1f1f"><TD valign=top><FONT SIZE="2" FACE="Verdana, Arial">fryfrog</FONT></TD><TD><FONT SIZE="2" FACE="Verdana, Arial">just download it, save it someplace, mark it executable and run it :)<P>i actually put it in /usr/bin and named it "odinseye"<P>you then "chmod +x /usr/bin/odinseye" and now, anytime you want (and anywhere) you just type "odinseye" into the console, and it runs the script.  (of course, you will want to be su 'd to root)<P>for me, the link opens up a txt file... you could right click on it and choose save as, or you could just goto it, copy the text and paste it into a file of your choice.</FONT></TD></TR></TABLE>
</FONT>
<SCRIPT LANGUAGE="JavaScript">
<!-- HIDE

var dc = document.cookie;
var testUserName = getCookie("UserName");
var testPassword = getCookie("Password");

if (document.cookie) {

	if (testUserName == null) {  
document.REPLIER.UserName.focus();
	} else {
document.REPLIER.UserName.value = getCookie("UserName");
document.REPLIER.Password.value = getCookie("Password");
document.REPLIER.ReplyMessage.focus();
	}
}  else {
document.REPLIER.UserName.focus();
}
function getCookie(name){
var cname = name + "=";               
var dc = document.cookie;
if (dc.length > 0) {              
    begin = dc.indexOf(cname);
	 if (begin != -1) {           
        begin += cname.length;
		end = dc.indexOf(";", begin);
            if (end == -1) end = dc.length;
            return unescape(dc.substring(begin, end));        }
}
return null;
}

// STOP HIDING FROM OTHER BROWSERS -->
</SCRIPT>
<P><center>
<B><FONT SIZE="2" FACE="Verdana, Arial">
<A HREF="mailto:ashran@hackersquest.org">Contact Us</A> | <A HREF="http://www.hackersquest.org" target=_top>HackersQuest</A> 
</B></FONT>
<P>
<FONT COLOR="#dedfdf" size="1" FACE="Verdana, Arial">
<P>
		<a href="http://infopop.com"><IMG SRC="http://www.hackersquest.org/ubb/powered_by2.gif" border=0></a><br>
      Ultimate Bulletin Board Version 5.47
<br><br>
</FONT>
</CENTER></font>
 </p>
</body></html>
