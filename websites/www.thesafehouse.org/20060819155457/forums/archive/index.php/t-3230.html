<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<meta name="keywords" content="MMORPG Spawner Script., Rogue, Everquest, World of Warcraft, Vanguard, MMORPG, Roleplaying, Thief, Pirate, computer games, PC games, Pen & Paper, Sigil, SOE, EQ2, EQ, DAoC" />
	<meta name="description" content="[Archive] MMORPG Spawner Script. Neverwinter Nights" />
		<title>MMORPG Spawner Script. [Archive]  - The Safehouse Forums</title>
	<link rel="stylesheet" href="http://www.thesafehouse.org/forums/archive/archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar"><a href="./">The Safehouse Forums</a> &gt; <a href="f-6.html">The Archives</a> &gt; <a href="f-21.html">Neverwinter Nights</a> &gt; MMORPG Spawner Script.</div>
<hr />
<div class="pda"><a href="?pda=1" rel="nofollow">PDA</a></div>
<p class="largefont">View Full Version : <a href="http://www.thesafehouse.org/forums/showthread.php?t=3230">MMORPG Spawner Script.</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username">EZ_Keyno Nokey</div><div class="date">07-04-02, 12:34 PM</div></div><div class="posttext">Hello,<br />
<br />
For those that are making presistant worlds, this script is a really nice setup for spawning mobs. Comes with custom spawn list you can make, easy to setup.<br />
<br />
The useage file isnt the greatest, but I'll give the info you need to understand it with no C scripting knowledge.<br />
<br />
Ok, to use it. In the zip there is a mod with it working, can open the mod and examine it if you like. Also included the zip is the three scripts you need, just cut and past into the script editor to compile.<br />
<br />
The scripts should have the same name as the text file, no extention. Scripting editor will take care of the extention. So the mmorpg_sdllist.txt file cut and paste into the editor should be saved as mmorpg_sdllist.<br />
<br />
Next create a invisable placeable name it &quot;XXX&quot; spawner, where XXX is, thats the name of the creatures you will be spawning. now in the TAG of the invisable placeable put this info: goblin_4_40_60_00_05_a<br />
<br />
Goblin is the creature list I used. The creature list can be custom mobs you create or the standard mobs in the toolset.<br />
<br />
the rest of the info is as follows:<br />
goblin=standard toolset creatures<br />
4= number of mobs to be spawned<br />
40=min delay to spawn next creature in seconds<br />
60=max delay to spawn next creature in seconds<br />
00=min distance to spawn the next creature from another spawn.<br />
05=max distance to spawn the next creature.<br />
a=Unique spawner label, (example, if you have more then on spawner in the same area, then the letter should read B, C for the third and D for the forth spawner in the area and so on.)<br />
<br />
All these varibles can be whatever you wish.<br />
All mobs in the spawner will have seperate timers apon death.<br />
<br />
Next,<br />
In the invisable placeable, goto the script tab and select the mmorpg_spawner script as the OnHeartbeat script.<br />
<br />
Placeable is all setup. Now on to the creature list.<br />
<br />
In the mmorpg_spawnlist script you will notice this:<br />
<br />
if (strList == &quot;goblin&quot;) { // goblin spawner<br />
         list_add_rear_string(OBJECT_SELF,&quot;creature_list&quot;,&quot;33:NW_GOBLINA&quot;);     // (01-33  -&gt; Goblin)<br />
         list_add_rear_string(OBJECT_SELF,&quot;creature_list&quot;,&quot;66:NW_GOBLINB&quot;);     // (34-66  -&gt; Goblin)<br />
         list_add_rear_string(OBJECT_SELF,&quot;creature_list&quot;,&quot;98:NW_GOBWIZA&quot;);  // (34-98  -&gt; GobShaman)<br />
         list_add_rear_string(OBJECT_SELF,&quot;creature_list&quot;,&quot;99:NW_GOBLINBOSS&quot;); // (99-100 -&gt; GobChief)<br />
<br />
Info is as follows:<br />
strList == &quot;goblin&quot; ... is the referance to the goblin in your invisable placeable TAG line goblin_4_40_60_00_05_a.<br />
<br />
33,66,98,99 before the NW_GOBLINA, NW_GOBLINB, NW_GOBWIZA, NW_GOBLINBOSS. THat is the Dice roll to determine what spawns, every spawn cycle. <br />
1-33<br />
34-66<br />
67-98<br />
99-100<br />
and so on.<br />
<br />
This can be changed to whatever you wish as long as it doesnt overlap.<br />
<br />
NW_GOBLINA=Goblin (Regular)<br />
NW_GOBLINB=Goblin (Regular)<br />
NW_GOBWIZA=Goblin (Shaman)<br />
NW_GOBLINBOSS=Goblin (Chieftain)<br />
<br />
These are the Toolset Blueprint tags for these mobs. To find out the blueprint tag for a mob, create a standard mob of your choosing, edit it and look at it's standard TAG. thats the blueprint tag name.<br />
<br />
Creature list is setup. Now if you want more then one spawner in one area, you can add on to the spawn list.. look at the spawnlist in the attached mob for the example. it has two spawners working off one spawnlist, with different mobs.<br />
<br />
Heads up, some people have had problems getting the spawner to work the first time around, this is due to some odd bug in the toolset, a workaround to this is to change the debug=0 to 1 in the mmorpg_spawner script .. run the mob once and then change the debug=1 to 0 .. then things will work normaly after that. Debug line can be found towards the middle to bottom have of the script.<br />
<br />
Hope thats covered everything for you, if you have questions, let me know. <br />
<br />
Special Thanks goes to Nabo at the NWN scripting forum for writing this nice script.<br />
<br />
Script and mob zip file. <br />
www.users.qwest.net/~keyn...script.zip<br />
<br />
Keyno<br />
<br />
&amp;lt;edit&gt;<br />
Forgot to mention, you can create custom mobs for the spawner list aswell. Just create a custom mob, give it a unique TAG, dont place the mob in the area just leave it in your blueprint. Put the TAG name in the spawnlist and it will spawn like a normal mob .. Edited by: Keyno Nokey  at: 7/4/02 3:36:59 pm</div></div><hr />


<div class="post"><div class="posttop"><div class="username">braincandy99</div><div class="date">07-04-02, 01:46 PM</div></div><div class="posttext">I have a similar but different method for doing the MMORPG respawn.<br />
<br />
Create a new creature (or make a copy of an existing creature).  Edit the creature however you like, but make sure that the  Blueprint ResRef and the  Tag names are  &lt;u&gt;exactly&lt;/u&gt; the same (all lower case)<br />
<br />
In the OnDeath Script event use the following script:<br />
<br />
//::**********************<br />
//::MMORPG Style Respawner<br />
//::By: Stephan Cam<br />
//:: Error Correcting by SPIKE<br />
//:: June 24, 2002<br />
//::**********************<br />
//:: Modified by Palor<br />
//::  - Added generic strings<br />
//::    to allow for use on<br />
//::    all respawns<br />
//:: June 26, 2002<br />
//:: Modified by Torch<br />
//::  - Changed the spawner to be a mob, this allows the creatures to fade away and treasure to appear<br />
//::**********************<br />
<br />
#include &quot;NW_I0_GENERIC&quot;<br />
<br />
void VoidCreateObject(string sTemplate, location lLoc, int bUseAppearAnimation=TRUE);<br />
void main()<br />
{<br />
<br />
<br />
    float fSeconds = 600.0; //monster spawn time<br />
    string sTemplate = GetTag(OBJECT_SELF);<br />
    string sWayPointPrefix = &quot;WP_&quot;;<br />
    string sCurrentWaypoint = sWayPointPrefix + sTemplate;<br />
    location lLoca = GetLocation(GetObjectByTag (sCurrentWaypoint));<br />
<br />
<br />
    if(GetSpawnInCondition(NW_FLAG_DEATH_EVENT))<br />
    {<br />
   SignalEvent(OBJECT_SELF, EventUserDefined(1007));<br />
    }<br />
<br />
<br />
    {<br />
    SetIsDestroyable(TRUE);<br />
    AssignCommand(GetObjectByTag(&quot;SpawnWalk&quot;), DelayCommand(fSeconds, VoidCreateObject(sTemplate,lLoca, TRUE)));<br />
    }<br />
<br />
}<br />
<br />
void VoidCreateObject(string sTemplate, location lLoca, int bUseAppearAnimation=TRUE)<br />
    {<br />
    CreateObject(OBJECT_TYPE_CREATURE, sTemplate,lLoca,TRUE);<br />
    }<br />
<br />
//****************<br />
<br />
Now, in some area, doesn't need to be accessable by players, so you can use a 1x2 area, create a mob, give it the tag &quot;SpawnWalk&quot;<br />
<br />
Finally, Place your mob with this modified script somewhere in your game.  Create a waypoint that is called &quot;WP_tagname&quot; (replace tagname with your monster's tag/blueprint name) and place it anywhere in your world.  This is the point where the mob will respawn.<br />
<br />
You can create walking points using the standard WP_tagname_## and the mob will walk around just like any other mob.<br />
<br />
Change the fSeconds value to various times, save scripts for each time.</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZ_Keyno Nokey</div><div class="date">07-05-02, 06:25 PM</div></div><div class="posttext">Braincandy,<br />
<br />
Your method involves creating a creature for each encounter.<br />
Which for some encounters would work great. The above script and instructions is for creating 1-100+ spawns in a single file without creating each creature before hand.. this is great for popluating a zone in one swoop.<br />
<br />
It just pulls the mobs from the Toolset database and inserts them for you. Of course you can create custom mobs and include them on the spawn list for those rare named spawns etc. But it has cut down my mob building time in half.<br />
<br />
The only draw back atm in the script is it doesnt include Day/Night spawn timers .. which the writer of the script is working on.<br />
<br />
Btw, Thank you for your script .. I use it for selective mobs.<br />
<br />
Keyno</div></div><hr />


<div class="post"><div class="posttop"><div class="username">braincandy99</div><div class="date">07-06-02, 11:03 AM</div></div><div class="posttext">Yeah, I guess from what I've found at least in the Local character server world, the regular monsters just don't cut it in terms of difficulty.  Most of my boss mobs have a challenge rating of &gt; 60 and some of these decked out level 20s can churn through em with reasonable safety.<br />
<br />
Doesn't your script use the OnHeartbeat event?  I looked at similar scripts and I find using that event to be worrisome (without any sufficient testing to back up my feeling) for large modules.  That event triggers every 6 seconds, and if you have a lot of different encounters running off that event, I think that can be taxing on a cpu.<br />
<br />
I didn't originate the script I posted.  I made the modification of it to use a separate creature to cause the spawn.  That was for the sole purpose of fixing a slight bug with loot dropping monsters.<br />
<br />
At the point I had seen the script you posted (or one similar, forget which I saw first) I had already committed a good amount of time to my module and had been using the script I posted successfully for a few revisions.<br />
<br />
I find that for the most part, I have to have custom creatures, both for difficulty reasons and for loot dropping.    Plus, in order to even have a reasonable amount of loot dropping you need to change their on spawn script's GenerateNPCTreasure conditions, which unless you want to modify the original NWN script, requires a new script, meaning you need to have custom monsters to take advantage of it (I don't think you can change the script a standard monster uses on the call to create them).<br />
<br />
I think your script would be great for outdoor &quot;epic battle&quot; encounters though, just tied to a trigger rather than the onheartbeat event.  I may end up using it for that.<br />
<br />
Torch<br />
<br />
&amp;lt;EDIT&gt;  You can check out the module I mentioned and this script in action in the post I made below giving the server connection details Edited by: Braincandy999  at: 7/6/02 2:09:32 pm</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZ_Keyno Nokey</div><div class="date">07-06-02, 12:16 PM</div></div><div class="posttext">Braincandy,<br />
<br />
I had about 10 friends connect to my server last night, in hopes for testing out encounters and, you are so right about the trivialness the challenge. So resorted to using custom mobs for everything. As for CPU load for the script, got the first crack at testing that aswell last night. Have to say it's a well written script, 10 zones populated and server didnt even miss a beat, noticed no server lag whatsoever.<br />
<br />
Now I know what DAOC and EQ designers went through trying to balance a world.<br />
<br />
PS. Couldnt reach your server yesterday, been dying to take a peek. going to try again today.<br />
<br />
Keyno</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZ_Tweil</div><div class="date">07-11-02, 08:32 PM</div></div><div class="posttext">I looked at both your scripts and tried yours Torch line for line.  However it would never work for me.  Anyways here is what I wrote, trying to get it to work:<br />
<br />
    //Spawn the next one<br />
    float fSeconds = 10.0; //monster spawn time<br />
<br />
    ActionWait(fSeconds);<br />
<br />
    //Get the Creature Type<br />
    string sTemplate = GetTag(OBJECT_SELF);<br />
<br />
    //Find the Creature's Spawn Point<br />
    string sWayPointPrefix = &quot;SP_&quot;;<br />
    string sCurrentWaypoint = sWayPointPrefix + sTemplate;<br />
    location llocation = GetLocation(GetObjectByTag (sCurrentWaypoint));<br />
<br />
    //Now create the creature<br />
    //int intDice = Random(100); Random numbers<br />
<br />
    object oSpawn = CreateObject(OBJECT_TYPE_CREATURE, sTemplate, llocation, FALSE);<br />
<br />
    if(GetSpawnInCondition(NW_FLAG_DEATH_EVENT))<br />
    {<br />
<br />
    }<br />
<br />
<br />
When I leave the code like above the monters spawn instantly, soon as one of those types dies another spawns at the spawn point.  Also, if I put the object inside the last if nothing ever happens.<br />
<br />
When I tried your script Torch nothing re-spawned =(<br />
<br />
Any help would be awesome! The Napping Druid<br />
Tweil Firestorm<br />
Solusek Ro</div></div><hr />


<div class="post"><div class="posttop"><div class="username">braincandy99</div><div class="date">07-11-02, 08:46 PM</div></div><div class="posttext">the first bit of trouble I had with the script (which I did not originate, just modified) was that both the Tag of the monster (on the general tab of its properties) and the blueprint resref (on the advanced tab of its properties) have to be identical, meaning all lower case.<br />
<br />
That is the only reason I can think of that would make the script I use not work.  Without pictures there's no way for me to show it exactly.<br />
<br />
The last if-statement is only executed if the onspawn script has it uncommented.  by default it is commented.<br />
<br />
Torch</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZ_Tweil</div><div class="date">07-12-02, 05:10 AM</div></div><div class="posttext">The creature does spawn though, instantly at its spawn point.  The ActionWait() command does not cause any pause though. The Napping Druid<br />
Tweil Firestorm<br />
Solusek Ro</div></div><hr />


<div class="post"><div class="posttop"><div class="username">EZ_Keyno Nokey</div><div class="date">07-12-02, 10:04 AM</div></div><div class="posttext">MMORPG style multiple creature area spawner 1.1<br />
----- ----- ----- ----- ----- ----- ----- -----<br />
Copyright (c) 2002 by Nabo<br />
Released : 10.07.2002<br />
<br />
Features in 1.0:<br />
- spawns and handles multiple creatures at the same time with just one spawn point<br />
- creature spawn list with percentages of spawn probability (see mmorpg_spawnlist.nss for details)<br />
- spawns creatures within a circle defined by maxdistance and mindistance with the spawn point as the center<br />
- maximum and minimum delays between death and spawn<br />
- spawn engine and creature lists in different files for easy updating<br />
<br />
New Features in 1.1:<br />
- define spawn effect per creature list<br />
- day or night spawning (script can also kill creatures when current time is not within spawn time)<br />
- set a standard faction per creature list<br />
- set default facing per creature list (face next player / face north,east,south,west / face random direction)<br />
<br />
<br />
What to do with this?<br />
- fill your complete mmorpg graveyard with just one spawn point<br />
- create a mmorpg city and place two spawn points with different factions in it to simulate two factions battling each other<br />
<br />
Usage:<br />
- Place an invisible object into an area<br />
- Choose mmorpg_spawner as Heartbeat Event for the invisible object<br />
- Create the TAG for the invisible object:<br />
-&gt; CreatureList _ NumberOfCreatures _ MinDelay_MaxDelay _ MinDistance _ Maxdistance _ UniqueCounter<br />
e.g. : skeletons_05_10_20_00_15_a<br />
this would create a spawner with:<br />
- Creature list &quot;skeletons&quot; from mmorpg_spawnlist.nss will be used<br />
- 5 Creatures will be spawned<br />
- Minimum delay between death and new spawn is 10 seconds<br />
- Maximum delay between death and new spawn is 20 seconds<br />
- Minimum distance from spawn point is 0 (calculated by GetDistanceBetweenLocations() )<br />
- Maximum distance from spawn point is 15 (calculated by GetDistanceBetweenLocations() )<br />
- Unique TAG counter is &quot;a&quot; (this means nothing except that each TAG must be unique)<br />
so the next spawner of the same type should have the tag:<br />
skeletons_05_10_20_00_15_b<br />
<br />
Mail bugs or comments to nabo@subnatural.de (german or english please). <br />
<br />
included in zip file: <br />
- .erf import file for scripts<br />
- readme.txt<br />
- mmorpg spawner test module<br />
<br />
Download it here<br />
http://www.subnatural.de/nabo/mmorpg_spawner_1.1.zip<br />
<br />
Keyno</div></div><hr />


<div id="copyright">vBulletin v3.5.3, Copyright &copy;2000-2006, Jelsoft Enterprises Ltd.</div>
</div>
</body>
</html>