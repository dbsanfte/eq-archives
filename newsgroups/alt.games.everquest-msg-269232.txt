From -8521423860140484467
X-Google-Thread: fb739,7b009fdc9e030a95
X-Google-Attributes: gidfb739,public
X-Google-Language: ENGLISH,ASCII-7-bit
Path: g2news1.google.com!news3.google.com!news.glorb.com!newsfeed-east.nntpserver.com!nntpserver.com!chi1.usenetserver.com!news.usenetserver.com!pd7cy2so!shaw.ca!pd7tw2no.POSTED!53ab2750!not-for-mail
X-Trace-PostClient-IP: 70.65.78.236
From: Ben Sisson <ilkhanikeDIESPAM@yahoo.ca>
Newsgroups: alt.games.everquest
Subject: Re: EQ1: The Tic and Weapon Delay
Message-ID: <gcavq0t71rp0g806if5kiks6kuqilceoof@4ax.com>
References: <MPG.1c180c3b180a223b9898ee@shawnews> <207tq0du8d09r1j352pfkfpbbchlq0eqio@4ax.com> <MPG.1c18a374f8c15c4c9898f3@shawnews> <3a4vq0pkohf7f2oc37m5eiotfkvf5isajk@4ax.com> <MPG.1c19433281e8f5409898f8@shawnews>
X-Newsreader: Forte Agent 1.8/32.553
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Lines: 97
Date: Thu, 02 Dec 2004 23:59:15 GMT
NNTP-Posting-Host: 24.66.94.143
X-Complaints-To: abuse@shaw.ca
X-Trace: pd7tw2no 1102031955 24.66.94.143 (Thu, 02 Dec 2004 16:59:15 MST)
NNTP-Posting-Date: Thu, 02 Dec 2004 16:59:15 MST
Organization: Shaw Residential Internet
Xref: g2news1.google.com alt.games.everquest:25721

A thousand monkeys banging on keyboards posted the following under the
name 42 <nospam@nospam.com>:

>At any rate, a much simpler test than the one you suggest would be to 
>dry up your mana pool, and then sit-stand dance and see how long it 
>takes you to get to -full- (when you are full cast a level 1 5 mana 
>spell to force a resync and confirm you were actually full.), and then 
>do it again and sit the whole time. Time both tests from 0 to full.
>
>If the server is allocating mana in real time, the time to complete the 
>first test should be nearly 30-50% longer than the second test, as I am 
>standing 50% of the time in the first test and getting only "2-5/tic" 
>instead of "20-30/tic" or whatever I'm at for a given character.
>
>Or is there a flaw you see with this test?

Only a minor possibility that it won't register the "stand" command if
you do nothing but sit down immediately afterwards in the server's
calculations of mana regen. I doubt that would happen though, since we
know it does track sit/stand as it happens, as countless annoying
hyperactive kids doing circles because they're attention span has run
out have proven.

Try that and see what happens.


>That begs 4 questions:
>
>1) It happens relatively reliably, and as a late night player I'm 
>skeptical that its really internet dispruption. (Which is what it 
>appears you are suggesting... high ping, latency spike, lost packets, 
>etc) 
>
>2) I do often pull mobs with proximity (getting close enough and waiting 
>for them to aggro (ie when I've run out of arrows or other ranged 
>attacks, but want to maintain as much distance as possible so that I'm 
>not getting hit instantly...) and they do routinely take up to 2-5 
>seconds to come at me. Which suggests that aggro is not being checked 
>instantaneously.

Or that position is not being checked instantaneously. And we already
know its not. But yes, mob aggro is not in real time, it can't be
because that would be a huge strain on the server. But the
calculations for when a mob aggros is going to be more than a simple 6
second interval check.

Think of the reverse - how many times have you gotten aggro when you
*shouldn't* have, if this system was as simple as 6 second tick
checks?


>3) Unless the packets are outright -lost- why wouldn't the server still 
>receive them and and process aggro on them unless they were seriously 
>outdated or out of order. ( I mean, if I send x1,y1.... and then the 
>server gets x2,y2 and x3,y3 together 3 seconds later sure x3,y3 is 
>already out of range again... but why not process x2,y2 for aggro and 
>activate the mob, especially if x2, y2 is smack dab in the middle of a 
>stationary unengaged mobs aggro range...?)

You'd have to ask a network whiz this but I am about 60% sure the EQ
server will ignore any information packet significantly out of sync
(not commands, though, it will always process them). Isn't this the
core of why it uses UDP instead of TCP or something? For very minor
issues I'm sure it does do exactly what you describe.

>
>4) Similiarly but from the -other- side of the coin. Consider me being 
>stationary for an extended period of time. We can assume the server has 
>good accurate position data on me. When a mob wanders up, it will 
>frequently get right on top of me and or even pass me before aggroing. 
>Given the server has accurate position data on both an unengaged mob and 
>a stationary player there is no reason for this to occur unless aggro is 
>only checked periodically.

Yes, but the formula is more complicated than a 6 second tick.


>I also noted you didn't address my observations with bard buffs 
>simultaneously wearing off (which shouldn't even be possible!!) Mezzes 
>and DSes in particular as the effects of them wearing off more are 
>visceral than simply some stat number display changes).

Spell durations do use the 6 second timer, you are right about that.
My feeling is that a lot of things used that timer at an early alpha
stage of the game as a placeholder, then most things were changed to
more permanent forms later in development. Since it worked fine for
spell durations, they just left it that way. It would *not* work fine
for things like medding, mob aggro, movement, etc, and so all those
things got changed or never were like that.

 
-- 

"Why stop now, just when I'm hating it?" - Marvin

"It's certainly not a "memory leak." - 'shadows', my latest stalker
"No one said it wasn't a memory leak." - 'shadows' a few posts later


